(this.webpackJsonplivechat=this.webpackJsonplivechat||[]).push([[0],{105:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var a=_(152),n=_(0),o=_.n(n),r=_(3),s=["children"],i=function(e){var t,_,n=e.children,i=Object(a.a)(e,s);return o.a.createElement(r.d,{sx:{margin:3,wordWrap:"break-word"}},o.a.createElement(r.d,Object.assign({className:"rcw-message-text",ml:"auto",sx:{boxSizing:"border-box",alignItems:"center",borderRadius:10,p:15,maxWidth:215,textAlign:"left",fontSize:(null===i||void 0===i||null===(t=i.style)||void 0===t?void 0:t.fontSize)&&(null===i||void 0===i||null===(_=i.style)||void 0===_?void 0:_.fontSize)}},i),n))}},117:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var a=_(1),n=_(0),o=_.n(n);function r(){var e=o.a.useState(!1),t=Object(a.a)(e,2),_=t[0],n=t[1];return o.a.useEffect((function(){var e=navigator.userAgent.toLowerCase();-1!=e.indexOf("safari")&&(e.indexOf("chrome")>-1?console.log("chrome"):n(!0))}),[]),{isSafari:_}}},125:function(e,t,_){"use strict";_.d(t,"a",(function(){return c}));var a=_(0),n=_.n(a),o=_(3),r=_(51),s=_(44),i=_(15),l=_.n(i),u=_(176),c=function(e){var t=e.item,_=e.handleNewUserMessage;return n.a.createElement(o.b,{sx:{borderRadius:8},bg:"#fff"},n.a.createElement(o.a,{ratio:1.6},n.a.createElement(u.a,{src:t.url,style:{width:"100%",height:"100%"},alt:"img-type",preview:!0})),n.a.createElement(o.b,{mt:2,sx:{color:"rgba(0, 0, 0, 0.65)",fontWeight:600,fontSize:3,fontFamily:"Open Sans, sans-serif",lineHeight:"18px",textAlign:"left",paddingLeft:1}},l()(Object(s.a)(t.title))),n.a.createElement(o.b,{sx:{color:"rgba(0, 0, 0, 0.65)",fontSize:2,whiteSpace:"pre-line",fontFamily:"Open Sans, sans-serif",lineHeight:"18px",textAlign:"left",paddingLeft:1}},l()(Object(s.a)(t.subtitle))),t.buttons.length>=1&&t.buttons.map((function(e,t){return n.a.createElement(o.b,{sx:{borderTop:"1px solid #EEEEEE"},key:t},n.a.createElement(r.a,{item:e,key:t,handleNewUserMessage:_}))})))}},126:function(e,t,_){e.exports=_.p+"static/media/prev.02ee2888.svg"},127:function(e,t,_){e.exports=_.p+"static/media/next.3935fe6a.svg"},128:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var a=_(1),n=_(0),o=_.n(n);function r(){var e=o.a.useState(!1),t=Object(a.a)(e,2),_=t[0],n=t[1];return o.a.useEffect((function(){var e="undefined"===typeof window.navigator?"":navigator.userAgent,t=Boolean(e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));n(t)}),[]),{isMobile:_}}},129:function(e,t,_){"use strict";_.d(t,"a",(function(){return a}));var a={colors:{bgPrimary:"#121212",primary:"#EF3C48",black:"#000",background:"#fff",textanswer:"#545454",textquestion:"#fff"},fontSizes:[10,12,13,14,18,20,24,32],space:[0,4,8,16,24,32,64,128,256],breakpoints:["768px","992px","1200px"],sizes:{containers:"1112px"},fonts:{body:"Open Sans, sans-serif",heading:'"Avenir Next", sans-serif',monospace:"Menlo, monospace"},text:{gradient:{background:"-webkit-linear-gradient(#09C6F9, #045DE9)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},buttons:{outline:{color:"white",bg:"bgPrimary",fontSize:2,fontWeight:600,borderRadius:8,border:"1px solid #7D8FA9;",sm:{fontSize:2,fontWeight:600,border:"1px solid #7D8FA9;",bg:"bgPrimary",flexDirection:"row",justifyContent:"center",alignItems:"center",display:"flex",borderRadius:8,"> svg":{marginRight:10}}},primary:{colors:"white",bg:"primary",borderRadius:16,fontSize:2,md:{fontWeight:600,colors:"white",bg:"primary",borderRadius:8}}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body"}}}},131:function(e,t,_){"use strict";_.d(t,"a",(function(){return l}));var a=_(2),n=_.n(a),o=_(11),r=_(7),s=_(1),i=_(0),l=function(e,t,_,a,l){var u,c=i.useState(null!==e&&void 0!==e?e:[]),d=Object(s.a)(c,2),p=d[0],E=d[1],m=i.useState(!1),b=Object(s.a)(m,2),O=b[0],f=b[1],v=i.useState(e?t:0),g=Object(s.a)(v,2),M=g[0],h=g[1],P=i.useState((null!==(u=null===p||void 0===p?void 0:p.length)&&void 0!==u?u:0)>=t),D=Object(s.a)(P,2),T=D[0],C=D[1],A=i.useCallback(Object(r.a)(n.a.mark((function e(){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,_(M,t);case 4:r=e.sent,a&&a(r),h(M+t),E([].concat(Object(o.a)(null!==p&&void 0!==p?p:[]),Object(o.a)(r))),C(r.length>=t);case 9:return e.prev=9,f(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,,9,12]])}))),[p,M].concat(Object(o.a)(null!==l&&void 0!==l?l:[])));return i.useEffect((function(){var _;E(null!==e&&void 0!==e?e:[]),C((null!==(_=null===e||void 0===e?void 0:e.length)&&void 0!==_?_:0)>=t),h(e?t:0)}),[e].concat(Object(o.a)(null!==l&&void 0!==l?l:[]))),i.useEffect((function(){0===M&&A()}),[M]),{data:p,fetchMore:A,hasMore:T,loading:O}}},132:function(e,t,_){"use strict";_.d(t,"a",(function(){return d}));var a=_(0),n=_.n(a),o=_(3),r=_(225),s=_.n(r),i=_(226),l=_.n(i),u=_(227),c=_.n(u),d=function(e){var t=e.onAction;return n.a.createElement(o.b,null,n.a.createElement(o.b,{sx:{textAlign:"center"},mt:6,mb:3},n.a.createElement(o.k,{sx:{display:"block",fontSize:4,fontWeight:600,color:"#1F1F1F"}},"Ch\xfang t\xf4i \u0111ang s\u1eb5n s\xe0ng h\u1ed7 tr\u1ee3 b\u1ea1n!"),n.a.createElement(o.k,{sx:{display:"block",fontSize:3,color:"#1F1F1F"}},"H\xe3y ch\u1ecdn t\u1ed5ng \u0111\xe0i vi\xean h\u1ed7 tr\u1ee3.")),n.a.createElement(o.d,{sx:{height:158,backgroundImage:"url(".concat(s.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",justifyContent:"space-around"}},n.a.createElement(o.d,{sx:{flexDirection:"column",justifyContent:"center",cursor:"pointer"},onClick:function(){return t("female")}},n.a.createElement(o.f,{width:126,src:l.a}),n.a.createElement(o.k,{variant:"gradient",sx:{fontFamily:"Barlow Condensed",fontWeight:600,fontSize:3}},"T\u1ed5ng \u0111\xe0i vi\xean n\u1eef mi\u1ec1n b\u1eafc")),n.a.createElement(o.d,{sx:{flexDirection:"column",justifyContent:"center",cursor:"pointer"},onClick:function(){return t("male")}},n.a.createElement(o.f,{width:126,src:c.a}),n.a.createElement(o.k,{variant:"gradient",sx:{fontFamily:"Barlow Condensed",fontWeight:600,fontSize:3}},"T\u1ed5ng \u0111\xe0i vi\xean nam mi\u1ec1n nam"))))}},133:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var a=_(2),n=_.n(a),o=_(7),r=_(32),s=_(45),i=function(){function e(){Object(r.a)(this,e),this.stringify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},this.connection=void 0}return Object(s.a)(e,[{key:"open",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection=new WebSocket("wss://livechat-smartbot.vnpt.vn/cable");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(o.a)(n.a.mark((function e(t,_,a){var o=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onopen=function(){var e=o.stringify({command:"subscribe",identifier:o.stringify({channel:"RoomChannel",pubsub_token:t,account_id:_,user_id:a})});o.connection.send(e)};case 1:case"end":return e.stop()}}),e,this)})));return function(t,_,a){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(o.a)(n.a.mark((function e(t,_){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onmessage=function(e){var a,n,o,r,s=JSON.parse(e.data);if("AgentBot"==(null===s||void 0===s||null===(a=s.message)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.sender_type)||"User"==(null===s||void 0===s||null===(o=s.message)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.sender_type)){var i,l,u,c,d=null!==(i=null===s||void 0===s||null===(l=s.message)||void 0===l||null===(u=l.data)||void 0===u||null===(c=u.content_attributes.items)||void 0===c?void 0:c.card_data)&&void 0!==i?i:[];_(d)}t(s)};case 1:case"end":return e.stop()}}),e,this)})));return function(t,_){return e.apply(this,arguments)}}()},{key:"onclose",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onclose=function(){console.log("Connection Closed!")};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onerror",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onerror=function(){console.log("WS Error")};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.close();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},134:function(e,t,_){e.exports=_.p+"static/media/default.9b2e5e76.svg"},135:function(e,t,_){e.exports=_.p+"static/media/doc-file.125c5c69.svg"},136:function(e,t,_){e.exports=_.p+"static/media/gif-file.0debac06.svg"},137:function(e,t,_){e.exports=_.p+"static/media/img-file.3f90f920.svg"},138:function(e,t,_){e.exports=_.p+"static/media/pdf-file.4a26abbb.svg"},139:function(e,t,_){e.exports=_.p+"static/media/txt-file.45c6c2d2.svg"},140:function(e,t,_){e.exports=_.p+"static/media/xls-file.f5c0f7e2.svg"},169:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE0SURBVHgB3ZXNVYQwEMf/E5DnMR587nFLsAOxA9OBLdiBJawVqBVAB2IFWgLHVS85+kXGxBUesAqRzR70dwFm5vHPfCQB/jrkE/Sa7R8KiFP3HoEWpJYlPBkV4Gw2r8jc2VD5ZdKGzXGinu7hgRgLqGDOWz93SEJ0Ak9GBYjoCBswKOBqz8AcGxAPu0X6vd189mbd/qxJad22DDb5PT+4sY8Uv8AwzhL1sPAVYEwg4pe9OpMfe/CWzVJMpMJuM2VNDziTcuUwOlaPOYG9R7GPTbtcE6iQpCC+JJBz5qvZn1QhvaOWRf3RKpGQCIBtameKRjfaBIliqwLMuN2qgM2gU6IYAbH1LwW4c8oGz6B/V4QW0H1DUAFmuujbmh5EQGHPyCt7AdSrKMjNhCeGxXV7g/0fPgCBYFsVibnWOgAAAABJRU5ErkJggg=="},170:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEySURBVHgB5ZXBTYRAFIb/B8R4kyPH7UA7kA6UCqQDpQJjB9rBdgDbgXZACXtc42WOaxR+30pAXVgWkTmY/RISZjIz33uPNwH470j9wjSYlVLeQsS4F8/JexrEIuX50INI58mLVvPtea9+KYBQfbEQSx0m+oSEXGFwqIw1KGxLHEyJsBXQpAKt98yqgIDP1PetCRS/wPGlTUGLyQUE7WbgCE6tChTTKXCxzvQ6RiSTaoYGI9BOOntLg7AeNzdZIrM5MPtaKJmA1xiBQJpW3VkiD+t8bBYumO8VVBlJjl9BUxKJRKslmkB70MUL7YqwdQzlTjfO2ztejVeVGoMEqnjcleT3KPvobdOj6GX0dxgk+ITOAn9gr6BEcf8zC5ru+ncjQxZtfqcFeCPCk4J8qEp3KHwAHFRqXigg3R0AAAAASUVORK5CYII="},172:function(e,t,_){e.exports=_.p+"static/media/send.ebd31c37.svg"},18:function(e,t,_){e.exports=_.p+"static/media/logo.c33d0499.svg"},212:function(e,t,_){"use strict";_.d(t,"a",(function(){return f}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(51),i=_(18),l=_.n(i),u=_(40),c=_(25),d=_(66),p=_(44),E=_(15),m=_.n(E),b=_(117),O=_(67),f=function(e){var t,_,i,E,f,v,g,M,h,P,D=e.item,T=Object(n.useRef)(null),C=null!==(t=null===D||void 0===D?void 0:D.delayTime)&&void 0!==t?t:0,A=e.handleNewUserMessage,I=e.style,S=e.hiddenAudio,x=Object(u.b)(),y=Object(c.a)(C),R=Object(n.useState)(!1),w=Object(a.a)(R,2),U=w[0],L=w[1],B=Object(n.useState)(!1),W=Object(a.a)(B,2),K=W[0],k=W[1];Object(b.a)().isSafari;Object(n.useEffect)((function(){if("old"===(null===D||void 0===D?void 0:D.type_msg))T.current&&T.current.pause();else if(K){var e=T.current.play();void 0!==e&&e.catch((function(e){var t=new Audio;t.src=null===D||void 0===D?void 0:D.audio_url,setTimeout((function(){t.play()}),0)})).then((function(){console.log("sp")}))}}),[null===D||void 0===D?void 0:D.type_msg,K,null===D||void 0===D?void 0:D.audio_url]),Object(n.useEffect)((function(){0===(null===D||void 0===D?void 0:D.delayTime)&&L(!0)}),[null===D||void 0===D?void 0:D.delayTime]),o.a.useEffect((function(){var e;T.current&&(T.current.playbackRate=null!==(e=null===D||void 0===D?void 0:D.play_rate)&&void 0!==e?e:1)}),[null===D||void 0===D?void 0:D.play_rate,T]),Object(n.useEffect)((function(){if(!0===y.show&&0===e.index){if((null===D||void 0===D?void 0:D.audio_url)&&"old"!==(null===D||void 0===D?void 0:D.type_msg)){var t=setTimeout((function(){return e.showIconTalk(!1)}),1e3*(null===D||void 0===D?void 0:D.timeaudio));return function(){clearTimeout(t)}}e.showIconTalk(!1)}}),[y.show]);return o.a.createElement(o.a.Fragment,null,(null===y||void 0===y?void 0:y.show)||U?o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===x||void 0===x||null===(_=x.stylesJSon)||void 0===_?void 0:_.botIcon)||l.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)"},className:function(e){switch(e){case"1":return"item-card-first";case"2":return"item-card";case"3":return"item-card-last"}}(I||"2"),p:2},"text"!==(null===D||void 0===D?void 0:D.play_type)&&(null===D||void 0===D?void 0:D.audio_url)&&o.a.createElement("audio",{controls:!0,autoPlay:"old"!==(null===D||void 0===D?void 0:D.type_msg),playsInline:!0,ref:function(e){T.current=e,k(!!e)},style:"true"===S?{display:"none"}:{}},o.a.createElement("source",{src:null===D||void 0===D?void 0:D.audio_url,type:"audio/mpeg"})),"audio"!==(null===D||void 0===D?void 0:D.play_type)&&o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"},mt:1},o.a.createElement(r.b,{className:"textCard",ml:"-3px",sx:{height:"100%",position:"relative",background:"#fff",borderRadius:8,px:2}},o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.k,{py:3,sx:{fontSize:(null===x||void 0===x||null===(i=x.stylesJSon)||void 0===i||null===(E=i.answer)||void 0===E?void 0:E.fontSize)?null===x||void 0===x||null===(f=x.stylesJSon)||void 0===f||null===(v=f.answer)||void 0===v?void 0:v.fontSize:1,color:(null===x||void 0===x||null===(g=x.stylesJSon)||void 0===g||null===(M=g.answer)||void 0===M?void 0:M.color)?null===x||void 0===x||null===(h=x.stylesJSon)||void 0===h||null===(P=h.answer)||void 0===P?void 0:P.color:"textanswer",whiteSpace:"pre-line"}},m()(Object(p.a)(D.text)))))),D.buttons.length>=1&&D.buttons.map((function(e,t){return o.a.createElement(r.b,{mt:1,key:t},o.a.createElement(s.a,{typeBtn:"quick",item:e,handleNewUserMessage:A}))})))),(null===D||void 0===D?void 0:D.isFinal)&&o.a.createElement(O.a,{onVote:e.voting,resultChat:D})):o.a.createElement(d.a,null))}},214:function(e,t,_){"use strict";_.d(t,"a",(function(){return m}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(51),i=_(25),l=_(66),u=_(40),c=_(18),d=_.n(c),p=_(67),E=_(176),m=function(e){var t,_,c=e.item,m=null!==(t=null===c||void 0===c?void 0:c.delayTime)&&void 0!==t?t:0,b=e.handleNewUserMessage,O=Object(i.a)(m),f=Object(n.useState)(!1),v=Object(a.a)(f,2),g=v[0],M=v[1],h=Object(u.b)();return Object(n.useEffect)((function(){0===(null===c||void 0===c?void 0:c.delayTime)&&M(!0)}),[null===c||void 0===c?void 0:c.delayTime]),Object(n.useEffect)((function(){!0===O.show&&0===e.index&&e.showIconTalk(!1)}),[O.show]),o.a.createElement(o.a.Fragment,null,O.show||g?o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===h||void 0===h||null===(_=h.stylesJSon)||void 0===_?void 0:_.botIcon)||d.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.b,{mt:3},o.a.createElement(E.a,{src:c.url,alt:"img-type",preview:!0}),c.buttons.length>=1&&o.a.createElement(r.b,{className:"bot-result-btn"},c.buttons.map((function(e,t){return o.a.createElement(s.a,{item:e,key:t,handleNewUserMessage:b})}))))),(null===c||void 0===c?void 0:c.isFinal)&&o.a.createElement(p.a,{onVote:e.voting,resultChat:c})):o.a.createElement(l.a,null))}},218:function(e,t,_){"use strict";_.d(t,"a",(function(){return O}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(51),i=_(18),l=_.n(i),u=_(40),c=_(25),d=_(44),p=_(15),E=_.n(p),m=_(66),b=_(67),O=function(e){var t,_,i,p,O,f,v=e.item,g=null!==(t=null===v||void 0===v?void 0:v.delayTime)&&void 0!==t?t:0,M=Object(n.useRef)(null),h=Object(n.useState)(!1),P=Object(a.a)(h,2),D=P[0],T=P[1],C=Object(n.useState)(!1),A=Object(a.a)(C,2),I=A[0],S=A[1],x=e.handleNewUserMessage,y=e.hiddenAudio,R=Object(u.b)(),w=Object(c.a)(g),U=Object(n.useState)(!0),L=Object(a.a)(U,2),B=L[0],W=L[1];return o.a.useEffect((function(){!0===e.chat&&W(!1)}),[e.chat]),o.a.useEffect((function(){var e;M.current&&(M.current.playbackRate=null!==(e=null===v||void 0===v?void 0:v.play_rate)&&void 0!==e?e:1)}),[null===v||void 0===v?void 0:v.play_rate,M]),Object(n.useEffect)((function(){0===(null===v||void 0===v?void 0:v.delayTime)&&T(!0)}),[null===v||void 0===v?void 0:v.delayTime]),Object(n.useEffect)((function(){if("old"===(null===v||void 0===v?void 0:v.type_msg))M.current&&M.current.pause();else if(I){var e=M.current.play();void 0!==e&&e.catch((function(e){var t=new Audio;t.src=null===v||void 0===v?void 0:v.audio_url,t.play()})).then((function(){console.log("sp")}))}}),[null===v||void 0===v?void 0:v.type_msg,I,null===v||void 0===v?void 0:v.audio_url]),Object(n.useEffect)((function(){if(!0===w.show&&0===e.index){if((null===v||void 0===v?void 0:v.audio_url)&&"old"!==(null===v||void 0===v?void 0:v.type_msg)){var t=setTimeout((function(){return e.showIconTalk(!1)}),1e3*(null===v||void 0===v?void 0:v.timeaudio));return function(){clearTimeout(t)}}e.showIconTalk(!1)}}),[w.show]),o.a.createElement(o.a.Fragment,null,w.show||D?o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===R||void 0===R||null===(_=R.stylesJSon)||void 0===_?void 0:_.botIcon)||l.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:8,bg:"#fff"},p:2},"text"!==(null===v||void 0===v?void 0:v.play_type)&&(null===v||void 0===v?void 0:v.audio_url)&&o.a.createElement("audio",{controls:!0,playsInline:!0,autoPlay:"old"!==(null===v||void 0===v?void 0:v.type_msg),ref:function(e){M.current=e,S(!!e)},style:"true"===y?{display:"none"}:{}},o.a.createElement("source",{src:null===v||void 0===v?void 0:v.audio_url,type:"audio/mpeg"})),"audio"!==(null===v||void 0===v?void 0:v.play_type)&&o.a.createElement(r.d,{mt:1,sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.b,{className:"textCard",ml:"-3px",sx:{height:"100%",position:"relative",background:"#fff",borderRadius:8,px:2}},o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.k,{sx:{fontSize:(null===R||void 0===R||null===(i=R.stylesJSon)||void 0===i||null===(p=i.answer)||void 0===p?void 0:p.fontSize)?null===R||void 0===R||null===(O=R.stylesJSon)||void 0===O||null===(f=O.answer)||void 0===f?void 0:f.fontSize:1,color:"textanswer",whiteSpace:"pre-line"},py:2},E()(Object(d.a)(v.text)))))),B&&v.buttons.length>=1&&o.a.createElement(r.d,{sx:{alignItems:"center",overflowX:"scroll","::-webkit-scrollbar":{width:5,height:5},"::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10}}},v.buttons.map((function(e,t){return o.a.createElement(r.b,{mt:1,ml:t>0?1:null,key:t,sx:{flexShrink:0,maxWidth:120}},o.a.createElement(s.a,{typeBtn:"quick",item:e,handleNewUserMessage:x}))}))))),(null===v||void 0===v?void 0:v.isFinal)&&o.a.createElement(b.a,{onVote:e.voting,resultChat:v})):o.a.createElement(m.a,null))}},219:function(e,t,_){"use strict";_.d(t,"a",(function(){return h}));var a=_(1),n=_(0),o=_.n(n),r=_(124),s=(_(209),_(125)),i=_(49),l=_.n(i),u=_(3),c=_(126),d=_.n(c),p=_(127),E=_.n(p),m=_(128),b=_(25),O=_(66),f=_(40),v=_(18),g=_.n(v),M=_(67),h=function(e){var t,_,i=e.item,c=Object(m.a)().isMobile,p=[];null===i||void 0===i||i.data.map((function(e,t){p.push(e),t>0&&t<=(null===i||void 0===i?void 0:i.data.length)-1&&p.push(e)}));var v=l.a.chunk(p,2),h=o.a.useState(0),P=Object(a.a)(h,2),D=P[0],T=P[1],C=e.handleNewUserMessage,A=D<v.length-1&&v.length>1,I=D>0&&v.length>1,S=function(e,t){return function(_){return o.a.createElement(u.d,{sx:{display:t?"flex":"none !important",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:12,overflow:"hidden",position:"absolute",top:"50%",right:e?-23:-35,zIndex:1e3},onClick:_},o.a.createElement("img",{src:E.a,alt:"next"}))}}(c,A),x=function(e,t){return function(_){return o.a.createElement(u.d,{sx:{display:t?"flex":"none !important",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:100,borderRadius:12,overflow:"hidden",position:"absolute",top:"50%",left:e?-23:-35},onClick:_},o.a.createElement("img",{src:d.a,alt:"prev"}))}}(c,I),y=null!==(t=null===i||void 0===i?void 0:i.delayTime)&&void 0!==t?t:0,R=Object(n.useState)(!1),w=Object(a.a)(R,2),U=w[0],L=w[1],B=Object(f.b)();Object(n.useEffect)((function(){0===(null===i||void 0===i?void 0:i.delayTime)&&L(!0)}),[null===i||void 0===i?void 0:i.delayTime]);var W=Object(b.a)(y);return Object(n.useEffect)((function(){!0===W.show&&0===e.index&&e.showIconTalk(!1)}),[W.show]),o.a.createElement(o.a.Fragment,null,W.show||U?o.a.createElement(o.a.Fragment,null,o.a.createElement(u.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===B||void 0===B||null===(_=B.stylesJSon)||void 0===_?void 0:_.botIcon)||g.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(u.b,{px:3,mt:3,sx:{width:"100%",".carousel .slide":{background:"inherit"},".css-i9l3dq":{overflow:"unset !important"},".carousel.carousel-slider":{overflow:"visible"},".carousel .control-dots":{bottom:-20,margin:0,padding:0},".dot":{width:8,height:8},position:"relative"}},o.a.createElement(r.Carousel,{renderArrowPrev:x,renderArrowNext:S,onChange:function(e){T(e)},showThumbs:!1},v.map((function(e,t){return o.a.createElement(u.d,{key:t,sx:{justifyContent:"space-between",overflow:"hidden"}},e.map((function(e,t){return o.a.createElement(u.b,{ml:3,sx:{width:"70%",borderRadius:8,overflow:"hidden",border:"1px solid #CBCBCB",flexShrink:0},key:t},o.a.createElement(s.a,{item:e,handleNewUserMessage:C}))})))}))))),(null===i||void 0===i?void 0:i.isFinal)&&o.a.createElement(M.a,{onVote:e.voting,resultChat:i})):o.a.createElement(O.a,null))}},220:function(e,t,_){e.exports=_.p+"static/media/sendGradient.1a51bbc6.svg"},221:function(e,t,_){e.exports=_.p+"static/media/microphone.cf95a8e4.svg"},222:function(e,t,_){e.exports=_.p+"static/media/banphim.30d59412.svg"},223:function(e,t,_){e.exports=_.p+"static/media/bgVoice.552e5c2c.svg"},224:function(e,t,_){e.exports=_.p+"static/media/voicegradient.efbef5f4.svg"},225:function(e,t,_){e.exports=_.p+"static/media/backgroundWaiting.1578859f.svg"},226:function(e,t,_){e.exports=_.p+"static/media/chatFemale.a439b1fa.svg"},227:function(e,t,_){e.exports=_.p+"static/media/chatMale.a8efd228.svg"},229:function(e,t,_){"use strict";_.d(t,"a",(function(){return E}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(51),i=_(25),l=_(30),u=_(18),c=_.n(u),d=_(176),p=_(54),E=function(e){var t,_,u=e.item,E=null!==(t=null===u||void 0===u?void 0:u.delayTime)&&void 0!==t?t:0,m=e.handleNewUserMessage,b=Object(i.a)(E),O=Object(n.useState)(!1),f=Object(a.a)(O,2),v=f[0],g=f[1],M=Object(l.b)();return Object(n.useEffect)((function(){0===(null===u||void 0===u?void 0:u.delayTime)&&g(!0)}),[null===u||void 0===u?void 0:u.delayTime]),Object(n.useEffect)((function(){!0===b.show&&0===e.index&&e.showIconTalk(!1)}),[b.show]),o.a.createElement(o.a.Fragment,null,b.show||v?o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{mt:3},o.a.createElement("img",{src:(null===M||void 0===M||null===(_=M.stylesJSon)||void 0===_?void 0:_.botIcon)||c.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.b,{mt:3,sx:{borderRadius:"8px",overflow:"hidden",border:"1px solid #CBCBCB"}},o.a.createElement(d.a,{src:u.url,alt:"img-type",preview:!0}),u.buttons.length>=1&&o.a.createElement(r.b,{className:"bot-result-btn",sx:{background:"#fff"}},u.buttons.map((function(e,t){return o.a.createElement(s.a,{item:e,key:t,handleNewUserMessage:m})}))))),(null===u||void 0===u?void 0:u.isFinal)&&o.a.createElement(p.a,{onVote:e.voting,resultChat:u})):o.a.createElement(o.a.Fragment,null))}},23:function(e,t,_){"use strict";_.d(t,"a",(function(){return E}));var a=_(5),n=_(2),o=_.n(n),r=_(7),s=_(32),i=_(45),l=_(99),u=_.n(l),c=_(70),d=_.n(c),p=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TIMEOUT?parseInt(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TIMEOUT):60,E=new(function(){function e(t){var _=this;Object(s.a)(this,e),this.baseUrl=t,this.getHeader=function(){return{"Content-Type":"application/json",Authorization:"Bearer "+d.a.get("est")}},this.handleErr=function(e){var t;return{status:null===e||void 0===e?void 0:e.status,msg:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.object}},this.getInfoBot=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/livechatbotinfo",{data:{bot_id:t}},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),this.livechat=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/livechat",{data:t},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),this.livechatIDG=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/livechatIDG",{data:t},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),this.getHistory=function(){var e=Object(r.a)(o.a.mark((function e(t,a,n,r,s){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.get("/api/chatbot/history/livechat",{params:{bot_id:a,sender_id:t,offset:n,limit:r}},s));case 1:case"end":return e.stop()}}),e)})));return function(t,_,a,n,o){return e.apply(this,arguments)}}(),this.feedbackMsg=function(){var e=Object(r.a)(o.a.mark((function e(t,a,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/history/feedback",{data:t,params:n},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_,a){return e.apply(this,arguments)}}(),this.socketChatwootConnect=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/chatwoot/socket/connect",{data:t},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),this.socketChatwootMessage=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/chatwoot/socket/message",{data:t},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),this.suggestChat=function(){var e=Object(r.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.post("/api/chatbot/query_suggest",{data:t},a));case 1:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}()}return Object(i.a)(e,[{key:"get",value:function(){var e=Object(r.a)(o.a.mark((function e(t,_,n){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,u.a.get("".concat(this.baseUrl).concat(t),{params:null===_||void 0===_?void 0:_.params,timeout:1e3*p,headers:Object(a.a)(Object(a.a)({},r),{},{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)})});case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,_,a){return e.apply(this,arguments)}}()},{key:"post",value:function(e,t,_){try{return u.a.post("".concat(this.baseUrl).concat(e),null===t||void 0===t?void 0:t.data,{params:null===t||void 0===t?void 0:t.params,timeout:1e3*p,headers:Object(a.a)(Object(a.a)({},{}),{},{"Content-Type":"application/json",Authorization:"Bearer ".concat(_)})})}catch(n){this.handleErr(n)}}}]),e}())("https://api-smartbot.vnpt.vn")},230:function(e,t,_){"use strict";_.d(t,"a",(function(){return n}));var a="https://api-smartbot.vnpt.vn",n=a+"/api/chatbot/livechat/upfile"},231:function(e,t,_){"use strict";_.d(t,"a",(function(){return h}));var a=_(1),n=_(0),o=_.n(n),r=_(124),s=(_(209),_(125)),i=_(49),l=_.n(i),u=_(3),c=_(126),d=_.n(c),p=_(127),E=_.n(p),m=_(128),b=_(25),O=_(30),f=_(18),v=_.n(f),g=_(54),M=_(60),h=function(e){var t,_,i,c,p,f,h,P,D,T,C,A=e.item,I=Object(m.a)().isMobile,S=[];null===A||void 0===A||A.data.map((function(e,t){S.push(e),t>0&&t<=(null===A||void 0===A?void 0:A.data.length)-1&&S.push(e)}));var x=l.a.chunk(S,2),y=o.a.useState(0),R=Object(a.a)(y,2),w=R[0],U=R[1],L=e.handleNewUserMessage,B=e.timeTyping,W=e.isTyping,K=w<x.length-1&&x.length>1,k=w>0&&x.length>1,j=function(e,t){return function(_){return o.a.createElement(u.d,{sx:{display:t?"flex":"none !important",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:12,overflow:"hidden",position:"absolute",top:"50%",right:e?-23:-35,zIndex:0,cursor:"pointer"},onClick:_},o.a.createElement("img",{src:E.a,alt:"next"}))}}(I,K),N=function(e,t){return function(_){return o.a.createElement(u.d,{sx:{display:t?"flex":"none !important",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:0,borderRadius:12,overflow:"hidden",position:"absolute",top:"50%",left:e?-23:-35,cursor:"pointer"},onClick:_},o.a.createElement("img",{src:d.a,alt:"prev"}))}}(I,k),V=Object(n.useState)(!1),F=Object(a.a)(V,2),q=F[0],H=F[1],J=Object(n.useState)(!1),z=Object(a.a)(J,2),Y=z[0],G=z[1],Q=null!==(t=null===A||void 0===A?void 0:A.delayTime)&&void 0!==t?t:0,$=Object(n.useState)(!1),X=Object(a.a)($,2),Z=X[0],ee=X[1],te=Object(O.b)();Object(n.useEffect)((function(){"true"===W&&H(!0)}),[W]),Object(n.useEffect)((function(){"old"===(null===A||void 0===A?void 0:A.type_msg)?(H(!1),G(!1)):("true"===W&&setTimeout((function(){H(!1),G(!0)}),B),H(!1),G(!0))}),[null===A||void 0===A?void 0:A.type_msg]),Object(n.useEffect)((function(){0===(null===A||void 0===A?void 0:A.delayTime)&&ee(!0)}),[null===A||void 0===A?void 0:A.delayTime]);var _e=Object(b.a)(Q);return Object(n.useEffect)((function(){!0===_e.show&&0===e.index&&"old"!==(null===A||void 0===A?void 0:A.type_msg)&&(G(!1),setTimeout((function(){H(!1),G(!0),e.showIconTalk(!1)}),B))}),[_e.show]),o.a.createElement(o.a.Fragment,null,_e.show||Z?o.a.createElement(o.a.Fragment,null,q?o.a.createElement(u.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===te||void 0===te||null===(_=te.stylesJSon)||void 0===_?void 0:_.botIcon)||v.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(u.d,{sx:{flexDirection:"column",bg:(null===te||void 0===te||null===(i=te.stylesJSon)||void 0===i||null===(c=i.answer)||void 0===c?void 0:c.bg)?null===te||void 0===te||null===(p=te.stylesJSon)||void 0===p||null===(f=p.answer)||void 0===f?void 0:f.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(M.a,null))):o.a.createElement(o.a.Fragment,null,o.a.createElement(u.d,{sx:{alignItems:"center",marginLeft:"10px"},mt:3},o.a.createElement(u.b,{px:3,sx:{width:"100%",".carousel .slide":{background:"inherit"},".css-i9l3dq":{overflow:"unset !important"},".carousel.carousel-slider":{overflow:"visible"},".carousel .control-dots":{bottom:-20,margin:0,padding:0,zIndex:0,display:"none"},".dot":{width:8,height:8},position:"relative",".carousel .thumbs-wrapper":{display:"none"}}},o.a.createElement(r.Carousel,{renderArrowPrev:N,renderArrowNext:j,onChange:function(e){U(e)},showThumbs:!1},x.map((function(e,t){return o.a.createElement(u.d,{key:t,sx:{justifyContent:"space-between",overflow:"hidden"}},e.map((function(e,t){return o.a.createElement(u.b,{ml:3,sx:{width:"70%",borderRadius:8,overflow:"hidden",border:"1px solid #CBCBCB",flexShrink:0,backgroundColor:"#FFFFFF"},key:t},o.a.createElement(s.a,{item:e,handleNewUserMessage:L}))})))}))))),(null===A||void 0===A?void 0:A.isFinal)&&o.a.createElement(g.a,{onVote:e.voting,resultChat:A}))):o.a.createElement(o.a.Fragment,null,"true"===W&&Y&&0===e.index&&o.a.createElement(u.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===te||void 0===te||null===(h=te.stylesJSon)||void 0===h?void 0:h.botIcon)||v.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(u.d,{sx:{flexDirection:"column",bg:(null===te||void 0===te||null===(P=te.stylesJSon)||void 0===P||null===(D=P.answer)||void 0===D?void 0:D.bg)?null===te||void 0===te||null===(T=te.stylesJSon)||void 0===T||null===(C=T.answer)||void 0===C?void 0:C.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(M.a,null)))))}},232:function(e,t,_){Object.defineProperty(t,"__esModule",{value:!0}),t.Recorder=void 0;var a,n=_(376),o=(a=n)&&a.__esModule?a:{default:a};var r=function(){function e(e,t){for(var _=0;_<t.length;_++){var a=t[_];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,_,a){return _&&e(t.prototype,_),a&&e(t,a),t}}();var s=t.Recorder=function(){function e(){var t=this;this.callbacks={buffer:[],exportWAV:[]},function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.worker=new o.default((function(){var e;this.onmessage=function(s){switch(s.data.command){case"init":!function(t){e=t;for(var _=0;_<1;_++)a[_]=[]}(s.data.inputSampleRate);break;case"process":!function(n){for(var o=0;o<n.length;o++)t.push(32767*n[o]);for(;16e3*t.length/e>320;){for(var r=new Int16Array(320),s=0,i=0,l=0,u=0;l<320;){for(s=0,i=0;u<Math.min(t.length,(l+1)*e/16e3);)s+=t[u],i++,u++;r[l]=s/i,l++}postMessage(r),t=t.slice(u)}for(var c=0;c<1;c++)a[c].push(n);_+=n.length}(s.data.inputFrame);break;case"exportWAV":!function(){for(var t=[],r=0;r<1;r++)t.push(n(a[r],_));var s=function(e){var t=new ArrayBuffer(44+2*e.length),_=new DataView(t);return o(_,0,"RIFF"),_.setUint32(4,36+2*e.length,!0),o(_,8,"WAVE"),o(_,12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,1,!0),_.setUint16(22,1,!0),_.setUint32(24,16e3,!0),_.setUint32(28,32e3,!0),_.setUint16(32,2,!0),_.setUint16(34,16,!0),o(_,36,"data"),_.setUint32(40,2*e.length,!0),function(e,t,_){for(var a=0;a<_.length;a++,t+=2){var n=Math.max(-1,Math.min(1,_[a]));e.setInt16(t,n<0?32768*n:32767*n,!0)}}(_,44,e),_}(function(t,_){if(_===e)return t;var a=e/_,n=Math.round(t.length/a),o=new Float32Array(n),r=0,s=0;for(;r<o.length;){for(var i=Math.round((r+1)*a),l=0,u=0,c=s;c<i&&c<t.length;c++)l+=t[c],u++;o[r]=l/u,r++,s=i}return o}(t[0],16e3)),i=new Blob([s],{type:"audio/wav"});this.postMessage({command:"exportWAV",data:i})}();break;case"reset":default:r()}};var t=[],_=0,a=[];function n(e,t){for(var _=new Float32Array(t),a=0,n=0;n<e.length;n++)_.set(e[n],a),a+=e[n].length;return _}function o(e,t,_){for(var a=0;a<_.length;a++)e.setUint8(t+a,_.charCodeAt(a))}function r(){t=[]}}),{}),this.worker.onmessage=function(e){if(t.callbacks[e.data.command]){var _=t.callbacks[e.data.command].pop();"function"==typeof _&&_(e.data.data)}}}return r(e,[{key:"init",value:function(e){this.worker.postMessage({command:"init",inputSampleRate:e})}},{key:"process",value:function(e){this.worker.postMessage({command:"process",inputFrame:e})}},{key:"exportWAV",value:function(e){if(!e)throw new Error("Callback not set");this.callbacks.exportWAV.push(e),this.worker.postMessage({command:"exportWAV"})}}],[{key:"forceDownload",value:function(e,t){var _=(window.URL||window.webkitURL).createObjectURL(e),a=window.document.createElement("a");a.href=_,a.download=t||"output.wav";var n=document.createEvent("Event");n.initEvent("click",!0,!0),a.dispatchEvent(n)}}]),e}();e.exports.default=s},233:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var a=_(2),n=_.n(a),o=_(7),r=_(32),s=_(45),i=function(){function e(){Object(r.a)(this,e),this.stringify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.stringify(e)},this.url=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).REACT_APP_SOCKET_VOICE_URL?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).REACT_APP_SOCKET_VOICE_URL:"wss://websocket.vnpt.vn/v1/streaming-recognize",this.authorization=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).ACCESS_TOKEN_VOICE?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).ACCESS_TOKEN_VOICE:"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkYjA0NzVhZC02NzYzLTcyODgtZTA1My02MzE5OWYwYTM2NTkiLCJhdWQiOlsicmVzdHNlcnZpY2UiXSwidXNlcl9uYW1lIjoidGh1eW50MTEyOTVAZ21haWwuY29tIiwic2NvcGUiOlsicmVhZCJdLCJpc3MiOiJodHRwczovL2xvY2FsaG9zdCIsIm5hbWUiOiJ0aHV5bnQxMTI5NUBnbWFpbC5jb20iLCJ1dWlkX2FjY291bnQiOiJkYjA0NzVhZC02NzYzLTcyODgtZTA1My02MzE5OWYwYTM2NTkiLCJhdXRob3JpdGllcyI6WyJVU0VSIl0sImp0aSI6IjYzYTY2MDgyLTJhNzktNDVkMS1iM2JkLTk1ZTkyM2MxNjRmYiIsImNsaWVudF9pZCI6ImFkbWluYXBwIn0.pQH2wt1-uQwdT2yVMNUvEUqvYQ92OW_UAKoLYKF5T0TPYeqyuXlHNnlo9TbJs0SKKQggoknA5DKnHbAwT24Mkzo170lC4TQvQ-oTyNlIon7pSM5e0V1e9jb1fdtTYUPA_TZ86V33RbKaX_gBvX7Qs-wByXZ_taie2qly8MsQHccKHn1EJcYEUcd-UTPW1oSF2x0p9xHvJDo1d-O2SxUufmjzezAOqkbPklQyx55wMg3RSYIYyHD8o7doE6V1XP-TOhcGE9Pvm-Y3bhpjjwtWX3z_g_W9n0wgCqJ0QcTmEmFTXQA_MN10ht313vn9GM44BVEtLpKgd2DRfdNvQKrUGg",this.tokenId=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TOKEN_ID_VOICE?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TOKEN_ID_VOICE:"db068da4-df0f-6f3b-e053-63199f0a948b",this.tokenKey=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TOKEN_KEY_VOICE?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).TOKEN_KEY_VOICE:"MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAJjebfAXJF3BCLVMs6wLd/bSVIgwwPn6Yvef44Yu4PBo/ihg2MTLj4cVZzorMVUafCuN3yFspFVbNbkBQUaIQ0cCAwEAAQ==",this.connection=void 0}return Object(s.a)(e,[{key:"open",value:function(){var e=Object(o.a)(n.a.mark((function e(t,_,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection=new WebSocket(this.url+"?authorization=".concat(this.authorization,"&token-id=").concat(this.tokenId,"&token-key=").concat(this.tokenKey));case 1:case"end":return e.stop()}}),e,this)})));return function(t,_,a){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onopen=function(){var e=t.stringify({streamingConfig:{config:{encoding:"LINEAR_PCM",sampleRateHertz:16e3,languageCode:"vi-VN",maxAlternatives:1,audioChannelCount:1,enableWordTimeOffsets:!1,enableSeparateRecognitionPerChannel:!1,model:"fast_streaming",customConfiguration:{invert_text:"1",capt_punct_recovery:"1"}},interimResults:!0}});t.connection.send(e)};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===this.connection.readyState&&this.connection.send(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkReadyState",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.connection.readyState);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(){var e=Object(o.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onmessage=function(e){var _=JSON.parse(e.data);t(_)};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onclose",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onclose=function(){console.log("Connection Closed!")};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onerror",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.onerror=function(){console.log("WS Error")};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(o.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.connection.close();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},234:function(e,t,_){e.exports=_.p+"static/media/stop.0a6e50db.svg"},235:function(e,t,_){"use strict";var a=_(1),n=_(0),o=_.n(n),r=_(25),s=_(30),i=_(3),l=_(54),u=_(18),c=_.n(u),d=_(134),p=_.n(d),E=_(135),m=_.n(E),b=_(136),O=_.n(b),f=_(137),v=_.n(f),g=_(138),M=_.n(g),h=_(139),P=_.n(h),D=_(140),T=_.n(D);function C(e){var t=e.split("."),_=t[t.length-1];return["jpg","jpeg","png"].includes(_)?v.a:["pdf"].includes(_)?M.a:["doc","docx"].includes(_)?m.a:["xls","xlsx"].includes(_)?T.a:["gif"].includes(_)?O.a:["txt"].includes(_)?P.a:p.a}t.a=function(e){var t,_,u,d,p,E,m,b,O,f,v,g,M,h,P=e.item,D=null!==(t=null===P||void 0===P?void 0:P.delayTime)&&void 0!==t?t:0,T=Object(r.a)(D),A=Object(n.useState)(!1),I=Object(a.a)(A,2),S=I[0],x=I[1],y=Object(s.b)();Object(n.useEffect)((function(){0===(null===P||void 0===P?void 0:P.delayTime)&&x(!0)}),[null===P||void 0===P?void 0:P.delayTime]),Object(n.useEffect)((function(){!0===T.show&&0===e.index&&e.showIconTalk(!1)}),[T.show]);return o.a.createElement(o.a.Fragment,null,T.show||S?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.d,{mt:3},o.a.createElement("img",{src:(null===y||void 0===y||null===(_=y.stylesJSon)||void 0===_?void 0:_.botIcon)||c.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(i.b,{sx:{borderRadius:"8px",overflow:"hidden",border:"1px solid #CBCBCB",padding:"12px",background:(null===y||void 0===y||null===(u=y.stylesJSon)||void 0===u||null===(d=u.answer)||void 0===d?void 0:d.bg)?null===y||void 0===y||null===(p=y.stylesJSon)||void 0===p||null===(E=p.answer)||void 0===E?void 0:E.bg:"#fff",color:(null===y||void 0===y||null===(m=y.stylesJSon)||void 0===m||null===(b=m.answer)||void 0===b?void 0:b.color)?null===y||void 0===y||null===(O=y.stylesJSon)||void 0===O||null===(f=O.answer)||void 0===f?void 0:f.color:"textanswer"}},o.a.createElement(i.d,{sx:{gap:"10px"}},o.a.createElement("div",{style:{width:"28px",height:"28px"}},o.a.createElement("img",{src:C(P.text),alt:"icon_file",style:{width:"28px"}})),o.a.createElement("div",{style:{overflow:"hidden"}},o.a.createElement("p",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",color:(null===y||void 0===y||null===(v=y.stylesJSon)||void 0===v||null===(g=v.answer)||void 0===g?void 0:g.color)?null===y||void 0===y||null===(M=y.stylesJSon)||void 0===M||null===(h=M.answer)||void 0===h?void 0:h.color:"textanswer",cursor:"pointer"},onClick:function(){fetch(P.file_url,{method:"GET"}).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(new Blob([e])),_=document.createElement("a");_.href=t,_.download=P.text,document.body.appendChild(_),_.click(),document.body.removeChild(_)}))}},P.text))))),(null===P||void 0===P?void 0:P.isFinal)&&o.a.createElement(l.a,{onVote:e.voting,resultChat:P})):o.a.createElement(o.a.Fragment,null))}},246:function(e,t,_){"use strict";_.d(t,"a",(function(){return f}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(18),i=_.n(s),l=_(30),u=_(25),c=_(44),d=_(15),p=_.n(d),E=_(117),m=_(54),b=_(60),O=function(e){var t,_,a,n,s,i,u,c,d,E,m,b,O,f=e.handleNewUserMessage,v=e.item,g=v.title,M=v.type,h=v.payload,P=(e.typeBtn,Object(l.b)()),D=null===P||void 0===P||null===(t=P.stylesJSon)||void 0===t?void 0:t.button;switch(M){case"postback":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:D.bg,title:g,sx:{background:"#ffffff",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,borderRadius:"0px",fontSize:(null===P||void 0===P||null===(_=P.stylesJSon)||void 0===_||null===(a=_.answer)||void 0===a?void 0:a.fontSize)?null===P||void 0===P||null===(n=P.stylesJSon)||void 0===n||null===(s=n.answer)||void 0===s?void 0:s.fontSize:1},onClick:function(){return f&&f(h,g)}},p()(g)));case"web_url":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:D.bg,title:g,sx:{background:"#ffffff",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,borderRadius:"0px",fontSize:(null===P||void 0===P||null===(i=P.stylesJSon)||void 0===i||null===(u=i.answer)||void 0===u?void 0:u.fontSize)?null===P||void 0===P||null===(c=P.stylesJSon)||void 0===c||null===(d=c.answer)||void 0===d?void 0:d.fontSize:1}},o.a.createElement(r.i,{color:D.bg,href:h,target:"_blank"},p()(g))));case"phone_number":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:D.bg,title:g,sx:{background:"#ffffff",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,borderRadius:"0px",fontSize:(null===P||void 0===P||null===(E=P.stylesJSon)||void 0===E||null===(m=E.answer)||void 0===m?void 0:m.fontSize)?null===P||void 0===P||null===(b=P.stylesJSon)||void 0===b||null===(O=b.answer)||void 0===O?void 0:O.fontSize:1}},o.a.createElement(r.i,{color:D.bg,href:"tel:".concat(h),target:"_blank"},p()(g))));default:return o.a.createElement(o.a.Fragment,null)}},f=function(e){var t,_,s,d,f,v,g,M,h,P,D,T,C,A,I,S,x,y,R,w,U,L,B,W,K,k,j,N,V=e.item,F=Object(n.useRef)(null),q=null!==(t=null===V||void 0===V?void 0:V.delayTime)&&void 0!==t?t:0,H=e.handleNewUserMessage,J=e.style,z=e.hiddenAudio,Y=e.timeTyping,G=e.isTyping,Q=Object(l.b)(),$=Object(u.a)(q),X=Object(n.useState)(!1),Z=Object(a.a)(X,2),ee=Z[0],te=Z[1],_e=Object(n.useState)(!1),ae=Object(a.a)(_e,2),ne=ae[0],oe=ae[1],re=(Object(E.a)().isSafari,Object(n.useState)(!1)),se=Object(a.a)(re,2),ie=se[0],le=se[1],ue=Object(n.useState)(!1),ce=Object(a.a)(ue,2),de=ce[0],pe=ce[1];Object(n.useEffect)((function(){"true"===G&&le(!0)}),[G]),Object(n.useEffect)((function(){if("old"===(null===V||void 0===V?void 0:V.type_msg))pe(!1),le(!1),F.current&&F.current.pause();else if(setTimeout((function(){le(!1),pe(!0)}),Y),ne){var t=F.current.play();e.showIconTalk(!0),void 0!==t&&t.catch((function(e){var t=new Audio;t.src=null===V||void 0===V?void 0:V.audio_url,setTimeout((function(){t.play()}),0)})).then((function(){console.log("sp")}))}}),[null===V||void 0===V?void 0:V.type_msg,ne,null===V||void 0===V?void 0:V.audio_url]),Object(n.useEffect)((function(){0===(null===V||void 0===V?void 0:V.delayTime)&&te(!0)}),[null===V||void 0===V?void 0:V.delayTime]),o.a.useEffect((function(){var e;F.current&&(F.current.playbackRate=null!==(e=null===V||void 0===V?void 0:V.play_rate)&&void 0!==e?e:1)}),[null===V||void 0===V?void 0:V.play_rate,F]),Object(n.useEffect)((function(){if(1==$.show){if((null===V||void 0===V?void 0:V.audio_url)&&"old"!==(null===V||void 0===V?void 0:V.type_msg)){var t=setTimeout((function(){e.showIconTalk(!1),pe(!1)}),1e3*(null===V||void 0===V?void 0:V.timeaudio));return function(){clearTimeout(t)}}e.showIconTalk(!1),pe(!1)}}),[$.show]);return o.a.createElement(o.a.Fragment,null,(null===$||void 0===$?void 0:$.show)||ee?o.a.createElement(o.a.Fragment,null,ie?o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===Q||void 0===Q||null===(_=Q.stylesJSon)||void 0===_?void 0:_.botIcon)||i.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:(null===Q||void 0===Q||null===(s=Q.stylesJSon)||void 0===s||null===(d=s.answer)||void 0===d?void 0:d.bg)?null===Q||void 0===Q||null===(f=Q.stylesJSon)||void 0===f||null===(v=f.answer)||void 0===v?void 0:v.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(b.a,null))):o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{mt:3},o.a.createElement("img",{src:(null===Q||void 0===Q||null===(g=Q.stylesJSon)||void 0===g?void 0:g.botIcon)||i.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",flexBasis:"100%"}},o.a.createElement(r.d,{sx:{flexDirection:"column",flexBasis:"100%"}},"audio"!=(null===V||void 0===V?void 0:V.play_type)&&o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"},className:function(e){switch(e){case"1":return"item-card-first";case"2":return"item-card";case"3":return"item-card-last"}}(J||"2")},o.a.createElement(r.b,{className:"textCard",sx:{height:"100%",position:"relative",background:(null===Q||void 0===Q||null===(M=Q.stylesJSon)||void 0===M||null===(h=M.answer)||void 0===h?void 0:h.bg)?null===Q||void 0===Q||null===(P=Q.stylesJSon)||void 0===P||null===(D=P.answer)||void 0===D?void 0:D.bg:"#fff",borderRadius:V.buttons.length>=1?"8px 8px 0 0":8,padding:"12px",bg:(null===Q||void 0===Q||null===(T=Q.stylesJSon)||void 0===T||null===(C=T.answer)||void 0===C?void 0:C.bg)?null===Q||void 0===Q||null===(A=Q.stylesJSon)||void 0===A||null===(I=A.answer)||void 0===I?void 0:I.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",overflow:"hidden",border:"0.5px solid #D7DAED"}},o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.k,{sx:{fontSize:(null===Q||void 0===Q||null===(S=Q.stylesJSon)||void 0===S||null===(x=S.answer)||void 0===x?void 0:x.fontSize)?null===Q||void 0===Q||null===(y=Q.stylesJSon)||void 0===y||null===(R=y.answer)||void 0===R?void 0:R.fontSize:1,color:(null===Q||void 0===Q||null===(w=Q.stylesJSon)||void 0===w||null===(U=w.answer)||void 0===U?void 0:U.color)?null===Q||void 0===Q||null===(L=Q.stylesJSon)||void 0===L||null===(B=L.answer)||void 0===B?void 0:B.color:"textanswer",whiteSpace:"pre-line",textAlign:"justify"}},p()(Object(c.a)(V.text)))))),o.a.createElement(r.d,{style:{flexDirection:"column",padding:"0 12px",backgroundColor:"#ffffff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"0 0 8px 8px"}},V.buttons.length>=1&&V.buttons.map((function(e,t){return o.a.createElement(r.b,{sx:{borderTop:"1px solid #D7DAED","&:first-of-type":{borderTop:"none"}},key:t},o.a.createElement(O,{typeBtn:"quick",item:e,handleNewUserMessage:H}))})))),o.a.createElement(r.b,{style:{marginTop:"6px",flexBasis:"100%"}},"text"!==(null===V||void 0===V?void 0:V.play_type)&&(null===V||void 0===V?void 0:V.audio_url)&&o.a.createElement("audio",{controls:!0,autoPlay:"old"!==(null===V||void 0===V?void 0:V.type_msg),playsInline:!0,ref:function(e){F.current=e,oe(!!e)},style:"true"===z?{display:"none"}:{width:"100%"}},o.a.createElement("source",{src:null===V||void 0===V?void 0:V.audio_url,type:"audio/mpeg"}))))),(null===V||void 0===V?void 0:V.isFinal)&&o.a.createElement(m.a,{onVote:e.voting,resultChat:V}))):o.a.createElement(o.a.Fragment,null,"true"===G&&de&&0===e.index&&o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===Q||void 0===Q||null===(W=Q.stylesJSon)||void 0===W?void 0:W.botIcon)||i.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:(null===Q||void 0===Q||null===(K=Q.stylesJSon)||void 0===K||null===(k=K.answer)||void 0===k?void 0:k.bg)?null===Q||void 0===Q||null===(j=Q.stylesJSon)||void 0===j||null===(N=j.answer)||void 0===N?void 0:N.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(b.a,null)))))}},247:function(e,t,_){"use strict";_.d(t,"a",(function(){return O}));var a=_(1),n=_(0),o=_.n(n),r=_(3),s=_(30),i=_(15),l=_.n(i),u=function(e){var t,_,a,n,i,u,c,d,p,E,m,b,O,f=e.handleNewUserMessage,v=e.item,g=v.title,M=v.type,h=v.payload,P="quick"===e.typeBtn,D=Object(s.b)(),T=null===D||void 0===D||null===(t=D.stylesJSon)||void 0===t?void 0:t.button,C=function(e,t){return e?t?e.color:e.bg:t?"#fff":"#17c48a"},A=function(e,t){return e?t?e.bg:e.color:t?"#53C088":"#fff"},I=function(e){return e?e.border:void 0};switch(M){case"postback":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:A(T,P),title:g,sx:{background:"#ffffff",border:"1px solid ".concat(A(T,P)),width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,padding:"4px 16px",borderRadius:"16px",fontSize:(null===D||void 0===D||null===(_=D.stylesJSon)||void 0===_||null===(a=_.answer)||void 0===a?void 0:a.fontSize)?null===D||void 0===D||null===(n=D.stylesJSon)||void 0===n||null===(i=n.answer)||void 0===i?void 0:i.fontSize:1,boxShadow:"0px 2px 8px 0px rgba(0, 0, 0, 0.15)"},onClick:function(){return f&&f(h,g)}},l()(g)));case"web_url":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:C(T,P),title:g,sx:{background:A(T,P),border:I(T),width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,padding:"4px 16px",borderRadius:"16px",fontSize:(null===D||void 0===D||null===(u=D.stylesJSon)||void 0===u||null===(c=u.answer)||void 0===c?void 0:c.fontSize)?null===D||void 0===D||null===(d=D.stylesJSon)||void 0===d||null===(p=d.answer)||void 0===p?void 0:p.fontSize:1}},o.a.createElement(r.i,{color:C(T,P),href:h,target:"_blank"},l()(g))));case"phone_number":return o.a.createElement(r.b,{sx:{minWidth:76}},o.a.createElement(r.c,{color:C(T,P),title:g,sx:{border:I(T),background:A(T,P),width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:600,padding:"4px 16px",borderRadius:"16px",fontSize:(null===D||void 0===D||null===(E=D.stylesJSon)||void 0===E||null===(m=E.answer)||void 0===m?void 0:m.fontSize)?null===D||void 0===D||null===(b=D.stylesJSon)||void 0===b||null===(O=b.answer)||void 0===O?void 0:O.fontSize:1}},o.a.createElement(r.i,{color:C(T,P),href:"tel:".concat(h),target:"_blank"},l()(g))));default:return o.a.createElement(o.a.Fragment,null)}},c=_(18),d=_.n(c),p=_(25),E=_(44),m=_(54),b=_(60),O=function(e){var t,_,i,c,O,f,v,g,M,h,P,D,T,C,A,I,S,x,y,R,w,U,L,B,W,K,k,j,N,V=e.item,F=null!==(t=null===V||void 0===V?void 0:V.delayTime)&&void 0!==t?t:0,q=Object(n.useRef)(null),H=Object(n.useState)(!1),J=Object(a.a)(H,2),z=J[0],Y=J[1],G=Object(n.useState)(!1),Q=Object(a.a)(G,2),$=Q[0],X=Q[1],Z=e.handleNewUserMessage,ee=e.hiddenAudio,te=e.timeTyping,_e=e.isTyping,ae=Object(s.b)(),ne=Object(p.a)(F),oe=Object(n.useState)(!0),re=Object(a.a)(oe,2),se=re[0],ie=re[1],le=Object(n.useState)(!1),ue=Object(a.a)(le,2),ce=ue[0],de=ue[1],pe=Object(n.useState)(!1),Ee=Object(a.a)(pe,2),me=Ee[0],be=Ee[1];return Object(n.useEffect)((function(){"true"===_e&&de(!0)}),[_e]),o.a.useEffect((function(){!0===e.chat&&ie(!1)}),[e.chat]),o.a.useEffect((function(){var e;q.current&&(q.current.playbackRate=null!==(e=null===V||void 0===V?void 0:V.play_rate)&&void 0!==e?e:1)}),[null===V||void 0===V?void 0:V.play_rate,q]),Object(n.useEffect)((function(){0===(null===V||void 0===V?void 0:V.delayTime)&&Y(!0)}),[null===V||void 0===V?void 0:V.delayTime]),Object(n.useEffect)((function(){if("old"===(null===V||void 0===V?void 0:V.type_msg))de(!1),be(!1),q.current&&q.current.pause();else if(setTimeout((function(){de(!1),be(!0)}),te),$){e.showIconTalk(!0);var t=q.current.play();void 0!==t&&t.catch((function(e){var t=new Audio;t.src=null===V||void 0===V?void 0:V.audio_url,t.play()})).then((function(){console.log("sp")}))}}),[null===V||void 0===V?void 0:V.type_msg,$,null===V||void 0===V?void 0:V.audio_url]),Object(n.useEffect)((function(){if(!0===ne.show){if((null===V||void 0===V?void 0:V.audio_url)&&"old"!==(null===V||void 0===V?void 0:V.type_msg)){var t=setTimeout((function(){e.showIconTalk(!1),be(!1)}),1e3*(null===V||void 0===V?void 0:V.timeaudio));return function(){clearTimeout(t)}}e.showIconTalk(!1),be(!1)}}),[ne.show]),o.a.createElement(o.a.Fragment,null,ne.show||z?o.a.createElement(o.a.Fragment,null,ce?o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===ae||void 0===ae||null===(_=ae.stylesJSon)||void 0===_?void 0:_.botIcon)||d.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:(null===ae||void 0===ae||null===(i=ae.stylesJSon)||void 0===i||null===(c=i.answer)||void 0===c?void 0:c.bg)?null===ae||void 0===ae||null===(O=ae.stylesJSon)||void 0===O||null===(f=O.answer)||void 0===f?void 0:f.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(b.a,null))):o.a.createElement(o.a.Fragment,null,o.a.createElement(r.d,{mt:2},o.a.createElement("img",{src:(null===ae||void 0===ae||null===(v=ae.stylesJSon)||void 0===v?void 0:v.botIcon)||d.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",flexBasis:"100%"}},o.a.createElement(r.d,{sx:{flexDirection:"column"}},"audio"!==(null===V||void 0===V?void 0:V.play_type)&&o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.b,{className:"textCard",sx:{height:"100%",position:"relative",background:(null===ae||void 0===ae||null===(g=ae.stylesJSon)||void 0===g||null===(M=g.answer)||void 0===M?void 0:M.bg)?null===ae||void 0===ae||null===(h=ae.stylesJSon)||void 0===h||null===(P=h.answer)||void 0===P?void 0:P.bg:"#fff",borderRadius:8,boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",padding:"12px",border:"0.5px solid #D7DAED"}},o.a.createElement(r.d,{sx:{alignItems:"center",height:"100%"}},o.a.createElement(r.k,{sx:{fontSize:(null===ae||void 0===ae||null===(D=ae.stylesJSon)||void 0===D||null===(T=D.answer)||void 0===T?void 0:T.fontSize)?null===ae||void 0===ae||null===(C=ae.stylesJSon)||void 0===C||null===(A=C.answer)||void 0===A?void 0:A.fontSize:1,color:(null===ae||void 0===ae||null===(I=ae.stylesJSon)||void 0===I||null===(S=I.answer)||void 0===S?void 0:S.color)?null===ae||void 0===ae||null===(x=ae.stylesJSon)||void 0===x||null===(y=x.answer)||void 0===y?void 0:y.color:"textanswer",whiteSpace:"pre-line"}},l()(Object(E.a)(V.text))))))),o.a.createElement(r.b,null,se&&V.buttons.length>=1&&o.a.createElement(r.d,{mt:2,sx:{alignItems:"center",gap:"8px",flexWrap:"wrap",justifyContent:"center","::-webkit-scrollbar":{width:5,height:5},"::-webkit-scrollbar-thumb":{background:"#888",borderRadius:10}}},V.buttons.map((function(e,t){return o.a.createElement(r.b,{key:t,sx:{flexShrink:0}},o.a.createElement(u,{typeBtn:"quick",item:e,handleNewUserMessage:Z}))})))),"text"!==(null===V||void 0===V?void 0:V.play_type)&&(null===V||void 0===V?void 0:V.audio_url)&&o.a.createElement(r.b,{mt:2},o.a.createElement("audio",{controls:!0,playsInline:!0,autoPlay:"old"!==(null===V||void 0===V?void 0:V.type_msg),ref:function(e){q.current=e,X(!!e)},style:"true"===ee?{display:"none"}:{width:"100%"}},o.a.createElement("source",{src:null===V||void 0===V?void 0:V.audio_url,type:"audio/mpeg"}))))),(null===V||void 0===V?void 0:V.isFinal)&&o.a.createElement(m.a,{onVote:e.voting,resultChat:V}))):o.a.createElement(o.a.Fragment,null,(null===V||void 0===V?void 0:V.audio_url)?"true"===_e&&me&&0===e.index&&o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===ae||void 0===ae||null===(R=ae.stylesJSon)||void 0===R?void 0:R.botIcon)||d.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:(null===ae||void 0===ae||null===(w=ae.stylesJSon)||void 0===w||null===(U=w.answer)||void 0===U?void 0:U.bg)?null===ae||void 0===ae||null===(L=ae.stylesJSon)||void 0===L||null===(B=L.answer)||void 0===B?void 0:B.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(b.a,null))):"true"===_e&&me&&o.a.createElement(r.d,{sx:{alignItems:"center"},mt:3},o.a.createElement("img",{src:(null===ae||void 0===ae||null===(W=ae.stylesJSon)||void 0===W?void 0:W.botIcon)||d.a,alt:"logo",className:"rcw-avatar"}),o.a.createElement(r.d,{sx:{flexDirection:"column",bg:(null===ae||void 0===ae||null===(K=ae.stylesJSon)||void 0===K||null===(k=K.answer)||void 0===k?void 0:k.bg)?null===ae||void 0===ae||null===(j=ae.stylesJSon)||void 0===j||null===(N=j.answer)||void 0===N?void 0:N.bg:"#fff",boxShadow:"2px 2px 10px rgba(0, 0, 0, 0.15)",borderRadius:"8px"}},o.a.createElement(b.a,null)))))}},25:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var a=_(1),n=_(0),o=_.n(n);function r(e){var t=o.a.useState(!1),_=Object(a.a)(t,2),n=_[0],r=_[1];return o.a.useEffect((function(){setTimeout((function(){r(!0)}),1e3*e)}),[e]),{show:n}}},251:function(e,t,_){e.exports=_(377)},256:function(e,t,_){},283:function(e,t){},30:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return useLogo}));var _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(90),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_components_TextCardVer2__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(246),_components_ImgCardVer2__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(229),_components_QuickReplyCardVer2__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(247),axios__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(99),axios__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_11__),_constants_Url__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(230),_components_CarouselVer2__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(231),react_router_dom__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(8),react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(211),react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_15__),theme_ui__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3),query_string__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(52),query_string__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_17__),theme_ui__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(249),_src_theme__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(129),_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(23),react_infinite_scroll_component__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(130),react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(73),react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22__),_hooks_useFetchMore__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(131),md5__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(53),md5__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_24__),_components_Reply__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(39),_components_Questions__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(105),lodash__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(49),lodash__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_27__),_containers_WaitingHome__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(132),_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(92),moment__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(35),moment__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_30__),_apis_WebsocketService__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(133),js_cookie__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(70),js_cookie__WEBPACK_IMPORTED_MODULE_32___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_32__),react_html_parser__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(15),react_html_parser__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(react_html_parser__WEBPACK_IMPORTED_MODULE_33__),_lib_stream__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(232),_lib_stream__WEBPACK_IMPORTED_MODULE_34___default=__webpack_require__.n(_lib_stream__WEBPACK_IMPORTED_MODULE_34__),_apis_VoiceWebsocketService__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(233),antd__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(174),antd__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(378),_images_iconfile_default_svg__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(134),_images_iconfile_default_svg__WEBPACK_IMPORTED_MODULE_38___default=__webpack_require__.n(_images_iconfile_default_svg__WEBPACK_IMPORTED_MODULE_38__),_images_iconfile_doc_file_svg__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(135),_images_iconfile_doc_file_svg__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(_images_iconfile_doc_file_svg__WEBPACK_IMPORTED_MODULE_39__),_images_iconfile_gif_file_svg__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(136),_images_iconfile_gif_file_svg__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(_images_iconfile_gif_file_svg__WEBPACK_IMPORTED_MODULE_40__),_images_iconfile_img_file_svg__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(137),_images_iconfile_img_file_svg__WEBPACK_IMPORTED_MODULE_41___default=__webpack_require__.n(_images_iconfile_img_file_svg__WEBPACK_IMPORTED_MODULE_41__),_images_iconfile_pdf_file_svg__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(138),_images_iconfile_pdf_file_svg__WEBPACK_IMPORTED_MODULE_42___default=__webpack_require__.n(_images_iconfile_pdf_file_svg__WEBPACK_IMPORTED_MODULE_42__),_images_iconfile_txt_file_svg__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(139),_images_iconfile_txt_file_svg__WEBPACK_IMPORTED_MODULE_43___default=__webpack_require__.n(_images_iconfile_txt_file_svg__WEBPACK_IMPORTED_MODULE_43__),_images_iconfile_xls_file_svg__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(140),_images_iconfile_xls_file_svg__WEBPACK_IMPORTED_MODULE_44___default=__webpack_require__.n(_images_iconfile_xls_file_svg__WEBPACK_IMPORTED_MODULE_44__),_images_icons_stop_svg__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(234),_images_icons_stop_svg__WEBPACK_IMPORTED_MODULE_45___default=__webpack_require__.n(_images_icons_stop_svg__WEBPACK_IMPORTED_MODULE_45__),_components_FileCardVer2__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(235),facebookstyleReply=function(e){for(var t=0;t<e.length;t++){var _=e[t];if(!_.style&&("quickreply"==_.type||"text"==_.type))for(var a=t,n=t+1;n<e.length;n++){var o,r,s,i,l,u;if("quickreply"!=(null===(o=e[n])||void 0===o?void 0:o.type)&&"text"!=(null===(r=e[n])||void 0===r?void 0:r.type))break;n==a+1?(_.style="3","quickreply"!==(null===(s=e[n+1])||void 0===s?void 0:s.type)&&"text"!==(null===(i=e[n+1])||void 0===i?void 0:i.type)&&(e[n].style="1"),"quickreply"!=(null===(l=e[n+1])||void 0===l?void 0:l.type)&&"text"!=(null===(u=e[n+1])||void 0===u?void 0:u.type)||(e[n].style="2"),a=n):_.style="2"}}return e},VoiceSDK=window.VoiceSDK,MAX_TIME_VOICE=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).MAX_TIME_VOICE?Number(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).MAX_TIME_VOICE):30,DELAY_TIME=1,DEFAULT_MSG="C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 quan t\xe2m t\u1edbi d\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i, ch\xfac b\u1ea1n m\u1ed9t ng\xe0y t\u1ed1t l\xe0nh v\xe0 vui v\u1ebb",DEFAULT_TIME_END=420;function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function bytesToSize(e,t){return e>=0&&e<1024?e+" B":e>=1024&&e<1048576?(e/1024).toFixed(t)+" KB":e>=1048576&&e<1073741824?(e/1048576).toFixed(t)+" MB":e>=1073741824&&e<1099511627776?(e/1073741824).toFixed(t)+" GB":e>=1099511627776?(e/1099511627776).toFixed(t)+" TB":e+" B"}function checkLogoExtension(e){var t=e.split("."),_=t[t.length-1];return["jpg","jpeg","png"].includes(_)?_images_iconfile_img_file_svg__WEBPACK_IMPORTED_MODULE_41___default.a:["pdf"].includes(_)?_images_iconfile_pdf_file_svg__WEBPACK_IMPORTED_MODULE_42___default.a:["doc","docx"].includes(_)?_images_iconfile_doc_file_svg__WEBPACK_IMPORTED_MODULE_39___default.a:["xls","xlsx"].includes(_)?_images_iconfile_xls_file_svg__WEBPACK_IMPORTED_MODULE_44___default.a:["gif"].includes(_)?_images_iconfile_gif_file_svg__WEBPACK_IMPORTED_MODULE_40___default.a:["txt"].includes(_)?_images_iconfile_txt_file_svg__WEBPACK_IMPORTED_MODULE_43___default.a:_images_iconfile_default_svg__WEBPACK_IMPORTED_MODULE_38___default.a}var ParseReply=function(e){var t=e.data,_=e.msg,a=e.setMsg,n=e.hiddenAudio,o=e.timeTyping,r=e.isTyping,s=e.handleNewUserMessage,i=function(e,t){var n=_.map((function(_){return _.id==e?Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},_),{},{voting:t}):_}));a(n)};switch(null===t||void 0===t?void 0:t.type){case"text":return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_TextCardVer2__WEBPACK_IMPORTED_MODULE_8__.a,{item:t,handleNewUserMessage:s,index:e.indexing,showIconTalk:e.showIconTalk,style:t.style,voting:i,hiddenAudio:n,timeTyping:o,isTyping:r}));case"image":return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_ImgCardVer2__WEBPACK_IMPORTED_MODULE_9__.a,{item:t,handleNewUserMessage:s,index:e.indexing,showIconTalk:e.showIconTalk,voting:i,timeTyping:o,isTyping:r}));case"quickreply":return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_QuickReplyCardVer2__WEBPACK_IMPORTED_MODULE_10__.a,{item:t,chat:e.loading,handleNewUserMessage:s,index:e.indexing,showIconTalk:e.showIconTalk,voting:i,hiddenAudio:n,timeTyping:o,isTyping:r}));case"carousel":return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_CarouselVer2__WEBPACK_IMPORTED_MODULE_13__.a,{item:t,handleNewUserMessage:s,index:e.indexing,showIconTalk:e.showIconTalk,voting:i,timeTyping:o,isTyping:r}));case"file":return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_FileCardVer2__WEBPACK_IMPORTED_MODULE_46__.a,{item:t,index:e.indexing,showIconTalk:e.showIconTalk,voting:i,timeTyping:o,isTyping:r}));default:return null}},UserQuestion=function(e){var t,_,a,n,o,r,s,i,l,u,c,d;return"/home"===e.messUserChat?null:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null,"file"===e.type?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Questions__WEBPACK_IMPORTED_MODULE_26__.a,{style:{fontSize:null===(t=e.styleQues)||void 0===t?void 0:t.fontSize},bg:{bg:null===(_=e.styleQues)||void 0===_?void 0:_.bg,color:null===(a=e.styleQues)||void 0===a?void 0:a.color}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{bg:null===(n=e.styleQues)||void 0===n?void 0:n.bg,color:null===(o=e.styleQues)||void 0===o?void 0:o.color,gap:"10px"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{width:"28px",height:"28px"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img",{src:checkLogoExtension(e.file.file_name),alt:"icon_file",style:{width:"28px"}})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{overflow:"hidden"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("a",{style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",color:null===(r=e.styleQues)||void 0===r?void 0:r.color,cursor:"pointer"},href:e.file.file_url,download:e.file.file_name},e.file.file_name),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("p",{style:{color:null===(s=e.styleQues)||void 0===s?void 0:s.color}},bytesToSize(e.file.size,2))))):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Questions__WEBPACK_IMPORTED_MODULE_26__.a,{style:{fontSize:null===(i=e.styleQues)||void 0===i?void 0:i.fontSize},bg:{bg:null===(l=e.styleQues)||void 0===l?void 0:l.bg,color:null===(u=e.styleQues)||void 0===u?void 0:u.color}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{bg:null===(c=e.styleQues)||void 0===c?void 0:c.bg,color:null===(d=e.styleQues)||void 0===d?void 0:d.color}},e.messUserChat)))},BotContext=react__WEBPACK_IMPORTED_MODULE_7___default.a.createContext(null),useLogo=function(){return react__WEBPACK_IMPORTED_MODULE_7___default.a.useContext(BotContext)},getItem=function(e,t,_){var a=Object.keys(e).sort((function(e,t){return e-t})),n=a.indexOf(String(t));n+=_;for(var o=0,r=0;r<a.length;r++)r<=n&&(o+=e[a[r]].duration);return o},BotLiveVer2=function BotLiveVer2(props){var _stylesJSon$question$,_stylesJSon$question,_data$length,_colorIconParse$color5,_colorIconParse$color6,_useParams=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_14__.q)(),id=_useParams.id,tokenCodeString="VnptSmartbot"+id,txtHistory="historyChat"+id,txtTimeChat="timeStart"+id,infoChatwootName="infoChatwoot"+id,tokenCode=md5__WEBPACK_IMPORTED_MODULE_24___default()(tokenCodeString),_useState=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(""),_useState2=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState,2),logo=_useState2[0],setLogo=_useState2[1],location=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_14__.m)(),_queryString$parse=query_string__WEBPACK_IMPORTED_MODULE_17___default.a.parse(location.search),sendername=_queryString$parse.sendername,styles=_queryString$parse.styles,voiceType=_queryString$parse.voiceType,showHistory=_queryString$parse.showHistory,iconSend=_queryString$parse.iconSend,botMetadata=_queryString$parse.botMetadata,isSaveHistory=_queryString$parse.isSaveHistory,timeOpenUrl=_queryString$parse.timeOpenUrl,autoOpen=_queryString$parse.autoOpen,isSuggestions=_queryString$parse.isSuggestions,isOnMic=_queryString$parse.isOnMic,hiddenAudio=_queryString$parse.hiddenAudio,placeholderInput=_queryString$parse.placeholderInput,timeStopVoice=_queryString$parse.timeStopVoice,colorIcon=_queryString$parse.colorIcon,typeIcon=_queryString$parse.typeIcon,isTyping=_queryString$parse.isTyping,timeTyping=_queryString$parse.timeTyping,colorIconParse=colorIcon?JSON.parse(colorIcon):{},_useState3=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState4=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState6=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState5,2),loading=_useState6[0],setLoading=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState8=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState7,2),requestBot=_useState8[0],setRequestBot=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!0),_useState10=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState9,2),checkEndSession=_useState10[0],setCheckEndSession=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState12=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState11,2),boxchatOpen=_useState12[0],setBoxchatOpen=_useState12[1],stylesJSon=styles?JSON.parse(String(styles)):{},messagesEndRef=Object(react__WEBPACK_IMPORTED_MODULE_7__.useRef)(null),observed=Object(react__WEBPACK_IMPORTED_MODULE_7__.useRef)(null),_useState13=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState14=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState13,2),enableVoice=_useState14[0],setenableVoice=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState16=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState15,2),removeVoice=_useState16[0],setremoveVoice=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(""),_useState18=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState17,2),sendMsg=_useState18[0],setsendMsg=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)([]),_useState20=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState19,2),msg=_useState20[0],setMsg=_useState20[1],_useState21=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(MAX_TIME_VOICE+1),_useState22=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState21,2),countTime=_useState22[0],setCoutTime=_useState22[1],_useState23=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState24=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState23,2),showSend=_useState24[0],setShowSend=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(void 0),_useState26=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState25,2),tokenVoice=_useState26[0],setTokenVoice=_useState26[1],_useState27=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(void 0),_useState28=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState27,2),tokenIdVoice=_useState28[0],setTokenIdVoice=_useState28[1],_useState29=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(void 0),_useState30=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState29,2),tokenKeyVoice=_useState30[0],setTokenKeyVoice=_useState30[1],_useState31=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(""),_useState32=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState31,2),typeaudio=_useState32[0],settypeAudio=_useState32[1],_useState33=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState34=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState33,2),showUserVoice=_useState34[0],setshowUserVoice=_useState34[1],_useState35=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState36=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState35,2),showVoice=_useState36[0],setShowvoice=_useState36[1],_useState37=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(DEFAULT_TIME_END),_useState38=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState37,2),timeEnd=_useState38[0],setTimeEnd=_useState38[1],_useState39=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(DEFAULT_MSG),_useState40=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState39,2),msgSesion=_useState40[0],setMsgSesion=_useState40[1],_useState41=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(void 0),_useState42=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState41,2),endSessionStepId=_useState42[0],setEndSesionStepId=_useState42[1],_useState43=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(0),_useState44=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState43,2),delayTimeTotal=_useState44[0],setDelayTimeTotal=_useState44[1],_useState45=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState46=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState45,2),statusVoice=_useState46[0],setStatusVoice=_useState46[1],_useState47=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState48=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState47,2),isResetSession=_useState48[0],setIsResetSession=_useState48[1],_useState49=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(JSON.parse(js_cookie__WEBPACK_IMPORTED_MODULE_32___default.a.get(infoChatwootName)||"{}")),_useState50=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState49,2),infoChatwoot=_useState50[0],setInfoChatwoot=_useState50[1],currentTime=moment__WEBPACK_IMPORTED_MODULE_30___default()().format("X"),socketClient=new _apis_WebsocketService__WEBPACK_IMPORTED_MODULE_31__.a,_useState51=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(""),_useState52=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState51,2),newMess=_useState52[0],setNewMess=_useState52[1],_useState53=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)({}),_useState54=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState53,2),userMess=_useState54[0],setUserMess=_useState54[1],_useState55=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)([]),_useState56=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState55,2),listSuggests=_useState56[0],setListSuggests=_useState56[1],_useState57=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState58=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState57,2),showSuggestions=_useState58[0],setShowSuggestions=_useState58[1],InputChat=Object(react__WEBPACK_IMPORTED_MODULE_7__.useRef)(null),_useState59=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState60=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState59,2),statusOnMic=_useState60[0],setStatusOnMic=_useState60[1],resultText=[],_useState61=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(),_useState62=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState61,2),mediaStream=_useState62[0],setMediaStream=_useState62[1],_useState63=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(),_useState64=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState63,2),mediaStreamSource=_useState64[0],setMediaStreamSource=_useState64[1],_useState65=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(),_useState66=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState65,2),processor=_useState66[0],setProcessor=_useState66[1],_useState67=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState68=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState67,2),isProcessing=_useState68[0],setIsProcessing=_useState68[1],_useState69=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState70=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState69,2),isShowProcessing=_useState70[0],setIsShowProcessing=_useState70[1],_useState71=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(timeStopVoice||900),_useState72=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState71,2),timeStopRecorder=_useState72[0],setTimeStopRecorder=_useState72[1],_useState73=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState74=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState73,2),isAutoStopMic=_useState74[0],setIsAutoStopMic=_useState74[1],recorder,_useState75=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState76=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState75,2),recording=_useState76[0],setRecording=_useState76[1],audioContext;window.AudioContext=window.AudioContext||Object(lodash__WEBPACK_IMPORTED_MODULE_27__.get)(window,"webkitAudioContext");var voiceWebsocket=Object(react__WEBPACK_IMPORTED_MODULE_7__.useRef)();voiceWebsocket.current||(voiceWebsocket.current=new _apis_VoiceWebsocketService__WEBPACK_IMPORTED_MODULE_35__.a);var _useState77=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState78=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState77,2),statusConnectSocket=_useState78[0],setStatusConnectSocket=_useState78[1],_useState79=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)([]),_useState80=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState79,2),fileList=_useState80[0],setFileList=_useState80[1],_useState81=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)(!1),_useState82=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState81,2),isFocus=_useState82[0],setIsFocus=_useState82[1];Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){function e(){return(e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,socketChatwootConnect();case 2:return e.abrupt("return",(function(){socketClient.close()}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){if("true"==isSaveHistory){var dataHistory=localStorage.getItem(txtHistory)?localStorage.getItem(txtHistory):[],resultChatOld=eval(dataHistory);resultChatOld=resultChatOld.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old",buttons:"quickreply"==e.type?[]:e.buttons})})),setMsg(resultChatOld),setTimeout((function(){scrollToBottom()}),2e3)}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){if(!lodash__WEBPACK_IMPORTED_MODULE_27___default.a.isEmpty(userMess)&&!lodash__WEBPACK_IMPORTED_MODULE_27___default.a.isEmpty(newMess)&&window._callback&&"function"==typeof window._callback){var e={user:newMess,sb:userMess};window._callback(JSON.stringify(e))}}),[newMess,userMess]);var socketChatwootConnect=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r,s,i,l,u,c,d;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setStatusConnectSocket(!1),t={bot_id:id,input_channel:"livechat",identifier:sendername||"smartbot"},e.next=4,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.socketChatwootConnect(t,tokenCode);case 4:if(200!==(null===(_=e.sent)||void 0===_?void 0:_.status)){e.next=24;break}if(l=null===_||void 0===_?void 0:_.data.object,js_cookie__WEBPACK_IMPORTED_MODULE_32___default.a.set(infoChatwootName,JSON.stringify(l)),setInfoChatwoot(l),u=null===l||void 0===l||null===(a=l.object)||void 0===a||null===(n=a.contact)||void 0===n?void 0:n.pubsub_token,c=null===l||void 0===l||null===(o=l.object)||void 0===o||null===(r=o.contact)||void 0===r?void 0:r.account_id,d=null===l||void 0===l||null===(s=l.object)||void 0===s||null===(i=s.contact)||void 0===i?void 0:i.source_id,!(u&&c&&d)){e.next=23;break}return e.next=15,socketClient.open();case 15:return e.next=17,socketClient.connect(u,c,d);case 17:return e.next=19,socketClient.subscribe(_callbackSocket,setUserMess);case 19:return e.next=21,socketClient.onclose();case 21:return e.next=23,socketClient.onerror();case 23:setStatusConnectSocket(!0);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_callbackSocket=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var _,a,n,o,r,s,i,l,u,c,d,p,E,m,b,O,f,v,g,M,h,P,D,T,C,A,I,S,x,y;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("User"===(null===t||void 0===t||null===(_=t.message)||void 0===_||null===(a=_.data)||void 0===a?void 0:a.sender_type))if(setTimeout((function(){setIsShowProcessing(!1),setIsProcessing(!1)}),"true"===isTyping?timeTyping:0),"/others"===(i=null===t||void 0===t||null===(r=t.message)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.content)){p=null===t||void 0===t||null===(l=t.message)||void 0===l||null===(u=l.data)||void 0===u||null===(c=u.content_attributes)||void 0===c||null===(d=c.items)||void 0===d?void 0:d.card_data,E=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__.a)(p);try{for(b=function(){var e=m.value;setMsg((function(t){return[{id:uuidv4(),buttons:[],text:e.text,source:"bot",delayTime:1,timeaudio:0,type:"file",duration:0,file_url:e.file_url,file_mime:e.file_mime}].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(t.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))}))},E.s();!(m=E.n()).done;)b()}catch(R){E.e(R)}finally{E.f()}}else setMsg((function(e){return[{id:uuidv4(),buttons:[],text:i,source:"bot",delayTime:1,timeaudio:0,type:"text",play_type:"text",duration:0}].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))}));if("AgentBot"!=(null===t||void 0===t||null===(n=t.message)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.sender_type)){e.next=21;break}return setTimeout((function(){setIsShowProcessing(!1),setIsProcessing(!1)}),"true"===isTyping?timeTyping:0),(P=null!==(O=null===t||void 0===t||null===(f=t.message)||void 0===f||null===(v=f.data)||void 0===v||null===(g=v.content_attributes.items)||void 0===g?void 0:g.card_data)&&void 0!==O?O:[])[P.length-1].isFinal=!0,P[P.length-1].text_id=null===t||void 0===t||null===(M=t.message)||void 0===M||null===(h=M.data)||void 0===h?void 0:h.content_attributes.items.text_id,D=-1,T=Object(_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_29__.a)(),C={},A=0,I=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,_=!1,e.prev=2,n=_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,D+=1,e.t0=t.type,e.next="text"===e.t0?5:"quickreply"===e.t0?21:"image"===e.t0?37:"carousel"===e.t0?39:"open_current_tab"===e.t0?41:"open_new_tab"===e.t0?44:47;break;case 5:if(t.audio_url&&"text"!==t.play_type?"true"===isTyping&&setTimeout((function(){}),timeTyping):setshowUserVoice(!1),!t.audio_url||"text"===t.play_type){e.next=14;break}return e.next=9,T.getDuration(t.audio_url);case 9:e.t2=e.sent,e.t3=0==D&&("true"===isTyping?timeTyping/1e3:0),e.t1=e.t2+e.t3,e.next=15;break;case 14:e.t1=0;case 15:return _=e.t1,A+=_,a=0,0===D&&"true"===isTyping&&(a+=timeTyping/1e3),C[D]={id:t.id,duration:_+DELAY_TIME+a,play_type:t.play_type,index:D,timeaudio:_},e.abrupt("break",48);case 21:if(t.audio_url&&"text"!==t.play_type?"true"===isTyping&&setTimeout((function(){}),timeTyping):setshowUserVoice(!1),!t.audio_url||"text"===t.play_type){e.next=30;break}return e.next=25,T.getDuration(t.audio_url);case 25:e.t5=e.sent,e.t6=0==D&&("true"===isTyping?timeTyping/1e3:0),e.t4=e.t5+e.t6,e.next=31;break;case 30:e.t4=0;case 31:return n=e.t4,A+=n,o=0,0===D&&"true"===isTyping&&(o+=timeTyping/1e3),C[D]={id:t.id,duration:n+DELAY_TIME+o,play_type:t.play_type,index:D,timeaudio:n},e.abrupt("break",48);case 37:case 39:return C[D]={id:t.id,duration:DELAY_TIME,play_type:t.play_type,index:D},e.abrupt("break",48);case 41:return A=timeOpenUrl?1e3*A+Number(timeOpenUrl):1e3*A+2e3,setTimeout((function(){window.open(t.text,"_parent"),showIconTalk(!1)}),A),e.abrupt("break",48);case 44:return A=timeOpenUrl?1e3*A+Number(timeOpenUrl):1e3*A+2e3,setTimeout((function(){window.open(t.text,"_blank"),showIconTalk(!1)}),A),e.abrupt("break",48);case 47:return e.abrupt("break",48);case 48:case"end":return e.stop()}}),e)})),o=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_6__.a)(P);case 5:return e.next=7,o.next();case 7:if(!(t=!(r=e.sent).done)){e.next=12;break}return e.delegateYield(n(),"t0",9);case 9:t=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),_=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!_){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(){return e.apply(this,arguments)}}(),e.next=13,I();case 13:S=0,x=P.map((function(e,t){var _,a=getItem(C,t,-1);return S+=a,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{id:uuidv4(),delayTime:a,source:"bot",timeaudio:null===(_=C[t])||void 0===_?void 0:_.timeaudio})})),setDelayTimeTotal(S),y=x.reverse(),setMsg((function(e){return[].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(y),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))})),setRequestBot(!1),scrollToBottom(),setStatusOnMic("/home"!==newMess);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleNewUserMessage=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t,_,a,n){var o,r,s,i,l,u,c,d,p,E,m,b,O,f,v,g,M,h,P,D,T,C,A,I,S;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setsendMsg(""),s=n&&(null===n||void 0===n?void 0:n.length)>0?n.map((function(e){return{id:uuidv4(),text:"",source:"client",type:"file",file:e}})):[],_&&(n&&(null===n||void 0===n?void 0:n.length)>0&&setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(s),[{id:uuidv4(),text:_,source:"client"}],Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))),setMsg([{id:uuidv4(),text:_,source:"client"}].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})})))))),setLoading(!0),i={bot_id:id,sender_id:sendername||"smartbot",metadata:botMetadata?JSON.parse(botMetadata):{},text:t,input_channel:"livechat",audio_url:a,tts_model:"news",tts_region:"male"===typeaudio?"male_south":"female_north",logSTT_id:a,conversation_id:null===infoChatwoot||void 0===infoChatwoot||null===(o=infoChatwoot.object)||void 0===o?void 0:o.id},localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_30___default()().format("DD/MM/YYYY HH:mm")),e.next=9,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.socketChatwootMessage(i,tokenCode);case 9:if(l=e.sent,setLoading(!1),setTimeout((function(){setIsShowProcessing(!1),setIsProcessing(!1)}),"true"===isTyping?timeTyping:0),u=null===l||void 0===l||null===(r=l.data)||void 0===r?void 0:r.object.object,c=new Array,"normal"!==u.type){e.next=35;break}return c=null!==(d=null===l||void 0===l||null===(p=l.data)||void 0===p||null===(E=p.object)||void 0===E||null===(m=E.object.sb)||void 0===m?void 0:m.card_data)&&void 0!==d?d:[],window._callback&&"function"==typeof window._callback&&(M={user:t,sb:null!==(f=null===l||void 0===l||null===(v=l.data)||void 0===v||null===(g=v.object)||void 0===g?void 0:g.object.sb)&&void 0!==f?f:{}},window._callback(JSON.stringify(M))),c[c.length-1].isFinal=!0,c[c.length-1].text_id=null===l||void 0===l||null===(b=l.data)||void 0===b||null===(O=b.object.sb)||void 0===O?void 0:O.text_id,h=-1,P=Object(_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_29__.a)(),D={},T=0,C=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,_=!1,e.prev=2,n=_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,h+=1,e.t0=t.type,e.next="text"===e.t0?5:"quickreply"===e.t0?21:"image"===e.t0?37:"carousel"===e.t0?39:"open_current_tab"===e.t0?41:"open_new_tab"===e.t0?44:"file"===e.t0?47:49;break;case 5:if(t.audio_url&&"text"!==t.play_type?"true"===isTyping&&setTimeout((function(){}),timeTyping):setshowUserVoice(!1),!t.audio_url||"text"===t.play_type){e.next=14;break}return e.next=9,P.getDuration(t.audio_url);case 9:e.t2=e.sent,e.t3=0==h&&("true"===isTyping?timeTyping/1e3:0),e.t1=e.t2+e.t3,e.next=15;break;case 14:e.t1=0;case 15:return _=e.t1,T+=_,a=0,0===h&&"true"===isTyping&&(a+=timeTyping/1e3),D[h]={id:t.id,duration:_+DELAY_TIME+a,play_type:t.play_type,index:h,timeaudio:_},e.abrupt("break",50);case 21:if(t.audio_url&&"text"!==t.play_type?"true"===isTyping&&setTimeout((function(){}),timeTyping):setshowUserVoice(!1),!t.audio_url||"text"===t.play_type){e.next=30;break}return e.next=25,P.getDuration(t.audio_url);case 25:e.t5=e.sent,e.t6=0==h&&("true"===isTyping?timeTyping/1e3:0),e.t4=e.t5+e.t6,e.next=31;break;case 30:e.t4=0;case 31:return n=e.t4,T+=n,o=0,0===h&&"true"===isTyping&&(o+=timeTyping/1e3),D[h]={id:t.id,duration:n+DELAY_TIME+o,play_type:t.play_type,index:h,timeaudio:n},e.abrupt("break",50);case 37:case 39:return D[h]={id:t.id,duration:DELAY_TIME,play_type:t.play_type,index:h},e.abrupt("break",50);case 41:return T=timeOpenUrl?1e3*T+Number(timeOpenUrl):1e3*T+2e3,setTimeout((function(){window.open(t.text,"_parent"),showIconTalk(!1)}),T),e.abrupt("break",50);case 44:return T=timeOpenUrl?1e3*T+Number(timeOpenUrl):1e3*T+2e3,setTimeout((function(){window.open(t.text,"_blank"),showIconTalk(!1)}),T),e.abrupt("break",50);case 47:return D[h]={id:t.id,duration:DELAY_TIME,play_type:t.play_type,index:h},e.abrupt("break",50);case 49:return e.abrupt("break",50);case 50:case"end":return e.stop()}}),e)})),o=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_6__.a)(c);case 5:return e.next=7,o.next();case 7:if(!(t=!(r=e.sent).done)){e.next=12;break}return e.delegateYield(n(),"t0",9);case 9:t=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),_=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!_){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(){return e.apply(this,arguments)}}(),e.next=26,C();case 26:A=0,I=c.map((function(e,t){var _,a=getItem(D,t,-1);return A+=a,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{id:uuidv4(),delayTime:a,source:"bot",timeaudio:null===(_=D[t])||void 0===_?void 0:_.timeaudio})})),setDelayTimeTotal(A),_?(S=I.reverse(),n&&(null===n||void 0===n?void 0:n.length)>0?S.push.apply(S,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(s).concat([{id:uuidv4(),text:_,source:"client"}])):S.push({id:uuidv4(),text:_,source:"client"}),setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(S),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})})))))):setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(I.reverse()),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))),setRequestBot(!1),scrollToBottom(),setStatusOnMic("/home"!==newMess),e.next=36;break;case 35:setNewMess(t);case 36:case"end":return e.stop()}}),e)})));return function(t,_,a,n){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){0==firstPage.length&&loaded&&boxchatOpen&&0==msg.length&&statusConnectSocket&&(handleNewUserMessage("/home"),setIsProcessing(!0),setIsShowProcessing(!0))}),[loaded,msg,boxchatOpen,statusConnectSocket]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){"true"==autoOpen&&setBoxchatOpen(!0)}),[autoOpen]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){window.onmessage=function(e){if("resetSession"==e.data&&(setIsResetSession(!0),endSessionStepId&&checkEndSession)){var t="?ic_bot_button_".concat(endSessionStepId);handleNewUserMessage(t),localStorage.removeItem("audio"),setCheckEndSession(!1),stopRecording()}"openBoxchat"==e.data&&setBoxchatOpen(!0)}})),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){var e,t=(new Date).toLocaleString();!0!==(null===(e=msg[0])||void 0===e?void 0:e.endSession)&&setTimeout((function(){window.parent.postMessage({type:"endTime",time:[timeEnd,t]},"*")}),1e3*Number(delayTimeTotal))}),[msg.length,sendMsg]);var _useState83=Object(react__WEBPACK_IMPORTED_MODULE_7__.useState)([]),_useState84=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__.a)(_useState83,2),firstPage=_useState84[0],setFirstPage=_useState84[1],getConfigBot=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r,s,i,l,u,c,d,p,E,m,b,O;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.getInfoBot(String(id),tokenCode);case 2:d=e.sent,setTokenVoice(null===d||void 0===d||null===(t=d.data.object)||void 0===t?void 0:t.tk),setTokenIdVoice(null===d||void 0===d||null===(_=d.data.object)||void 0===_?void 0:_.tkId),setTokenKeyVoice(null===d||void 0===d||null===(a=d.data.object)||void 0===a?void 0:a.tkKey),setTimeEnd(null!==(n=null===d||void 0===d||null===(o=d.data.object)||void 0===o?void 0:o.timeEndSession)&&void 0!==n?n:DEFAULT_TIME_END),setMsgSesion(null!==(r=null===d||void 0===d||null===(s=d.data.object)||void 0===s?void 0:s.endSessionTxT)&&void 0!==r?r:DEFAULT_MSG),setEndSesionStepId(null===d||void 0===d||null===(i=d.data.object)||void 0===i?void 0:i.stepEndSessionId),localStorage.setItem("audio",null!==(l=null===d||void 0===d||null===(u=d.data.object)||void 0===u?void 0:u.region)&&void 0!==l?l:""),p=null===d||void 0===d||null===(c=d.data.object)||void 0===c?void 0:c.policies,E=null===p||void 0===p?void 0:p.find((function(e){return"Assistant policy"==e.policydefs})),(null===(m=E?JSON.parse(null===E||void 0===E?void 0:E.configuration):null)||void 0===m?void 0:m.speechToTextEnabled)?setStatusVoice(!0):setStatusVoice(!1),localStorage.getItem(txtTimeChat)&&moment__WEBPACK_IMPORTED_MODULE_30___default()(localStorage.getItem(txtTimeChat),"DD/MM/YYYY HH:mm").add(null!==(b=null===d||void 0===d||null===(O=d.data.object)||void 0===O?void 0:O.timeEndSession)&&void 0!==b?b:DEFAULT_TIME_END,"seconds").format("X")<currentTime&&(localStorage.removeItem(txtHistory),setMsg([]));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){getConfigBot()}),[]);var getFirstPage=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r,s;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(setLoaded(!1),!showHistory){e.next=9;break}return e.next=4,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.getHistory(String(sendername),String(id),0,10,tokenCode);case 4:r=e.sent,setFirstPage(null!==(t=null===r||void 0===r||null===(_=r.data)||void 0===_||null===(a=_.result)||void 0===a?void 0:a.reverse())&&void 0!==t?t:[]),s=[],((null===r||void 0===r||null===(n=r.data)||void 0===n||null===(o=n.result)||void 0===o?void 0:o.reverse())||[]).map((function(e){e.card_data.reverse().map((function(t){s.push(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},t),{},{id:uuidv4(),source:e.source,type_msg:"old"}))}))})),setMsg([].concat(s,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg)));case 9:setLoaded(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){getFirstPage()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){if(isSaveHistory&&msg.length>0)if(isResetSession)localStorage.removeItem(txtHistory);else if(msg.length>50){var e=msg.splice(msg.length-1,1);localStorage.setItem(txtHistory,JSON.stringify(e))}else localStorage.setItem(txtHistory,JSON.stringify(msg))}),[msg.length]);var scrollToBottom=function(){messagesEndRef.current&&messagesEndRef.current.scrollIntoView({behavior:"smooth",block:"end"})};react__WEBPACK_IMPORTED_MODULE_7___default.a.useEffect((function(){}),[enableVoice,removeVoice,showVoice]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){if(enableVoice){var e=setInterval((function(){recording&&setCoutTime((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}setCoutTime(MAX_TIME_VOICE+1)}),[enableVoice,showVoice]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){0===countTime&&(stopRecording(),onEnter())}),[countTime]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){showVoice||setCoutTime(MAX_TIME_VOICE+1)}),[showVoice]),react__WEBPACK_IMPORTED_MODULE_7___default.a.useEffect((function(){scrollToBottom(),messagesEndRef.current&&scrollToBottom()}),[messagesEndRef,msg.length]);var onEnter=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==sendMsg.trim()){e.next=14;break}if(setShowSend(!1),setshowUserVoice(!1),setShowvoice(!1),setCheckEndSession(!0),!(fileList.length>0)){e.next=10;break}return e.next=8,handleUpload();case 8:e.next=11;break;case 10:handleNewUserMessage(sendMsg,sendMsg);case 11:isProcessing&&setIsShowProcessing(!0),e.next=17;break;case 14:if(!(fileList.length>0)){e.next=17;break}return e.next=17,handleUpload();case 17:localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_30___default()().format("DD/MM/YYYY HH:mm")),setShowSuggestions(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mergMsg=function(e){var t=[];(e.reverse()||[]).map((function(e){e.card_data.reverse().map((function(_){t.push(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},_),{},{id:uuidv4(),source:e.source,type_msg:"old"}))}))})),setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{type_msg:"old"})}))),t))},_useFetchMore=Object(_hooks_useFetchMore__WEBPACK_IMPORTED_MODULE_23__.a)(firstPage,10,function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t,_){var a,n,o;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.getHistory(String(sendername),String(id),t,_,tokenCode);case 2:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===n;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=null===(o=n.data)||void 0===o?void 0:o.result;case 11:if(e.t4=a=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==a;case 15:if(!e.t0){e.next=19;break}e.t5=a,e.next=20;break;case 19:e.t5=[];case 20:return e.abrupt("return",e.t5);case 21:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),mergMsg),data=_useFetchMore.data,fetchMore=_useFetchMore.fetchMore,hasMore=_useFetchMore.hasMore,typingMsg=function(e){setsendMsg(e.target.value),""!=e.target.value?(setShowSend(!0),"true"===isSuggestions&&(suggestChat(e.target.value),setShowSuggestions(!0))):(setShowSend(!1),"true"===isSuggestions&&setShowSuggestions(!1))},setTypeAudio=function(e){settypeAudio(e),localStorage.setItem("audio",e)};Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){var e=String(localStorage.getItem("audio"));e.includes("male")&&setTypeAudio("male"),e.includes("female")&&setTypeAudio("female")}),[localStorage.getItem("audio")]);var showIconTalk=function(e){setshowUserVoice(e),"true"===isOnMic&&!1===e&&!0===statusOnMic&&(setenableVoice(!0),setremoveVoice(!1),setShowSend(!1),setShowvoice(!1),startRecording())},suggestChat=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var _,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _={text:t,highlight:!0,pre_tags:["<b>"],post_tags:["</b>"],bot_id:id},e.next=3,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.suggestChat(_,tokenCode);case 3:200===(null===(a=e.sent)||void 0===a?void 0:a.status)&&(n=a.data.object,o=n.result.map((function(e){return{value:e.replace(/(<([^>]+)>)/gi,""),code:e}})),r=getRandom(o,5),setListSuggests(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClickSuggest=function(e){setsendMsg(e.value),setShowSuggestions(!1),InputChat.current&&InputChat.current.focus()};function getRandom(e,t){var _=new Array(t),a=e.length,n=new Array(a);if(a>0&&a>t){for(;t--;){var o=Math.floor(Math.random()*a);_[t]=e[o in n?n[o]:o],n[o]=--a in n?n[a]:a}return _}return e}var onBLurInput=function(){setIsFocus(!1),setTimeout((function(){setShowSuggestions(!1)}),150)},onFocusInput=function(){setIsFocus(!0),sendMsg.length>0&&setShowSuggestions(!0)},IconSend=function(){var e;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M20.5875 11.3326L4.08754 3.08263C3.95821 3.01795 3.81295 2.99204 3.66924 3.00801C3.52554 3.02397 3.38951 3.08114 3.27754 3.17263C3.1706 3.26225 3.09079 3.37992 3.04707 3.51241C3.00334 3.6449 2.99745 3.78697 3.03004 3.92263L5.01754 11.2501H13.5V12.7501H5.01754L3.00004 20.0551C2.96946 20.1684 2.96589 20.2873 2.98961 20.4022C3.01334 20.5172 3.06371 20.6249 3.13665 20.7168C3.2096 20.8087 3.3031 20.8823 3.40964 20.9315C3.51617 20.9807 3.63276 21.0042 3.75004 21.0001C3.86744 20.9994 3.98304 20.9712 4.08754 20.9176L20.5875 12.6676C20.7104 12.6047 20.8135 12.5091 20.8855 12.3913C20.9575 12.2735 20.9956 12.1382 20.9956 12.0001C20.9956 11.8621 20.9575 11.7267 20.8855 11.609C20.8135 11.4912 20.7104 11.3956 20.5875 11.3326Z",fill:null!==(e=colorIconParse.colorSend)&&void 0!==e?e:"#53C088"}))},IconMic=function(){var e,t;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M12.3335 15.3333C15.0835 15.3333 17.3335 13.0833 17.3335 10.3333V7C17.3335 4.25 15.0835 2 12.3335 2C9.5835 2 7.3335 4.25 7.3335 7V10.3333C7.3335 13.0833 9.5835 15.3333 12.3335 15.3333Z",fill:null!==(e=colorIconParse.colorMic)&&void 0!==e?e:"#53C088"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M20.6667 10.3333C20.6667 9.83333 20.3333 9.5 19.8333 9.5C19.3333 9.5 19 9.83333 19 10.3333C19 14 16 17 12.3333 17C8.66667 17 5.66667 14 5.66667 10.3333C5.66667 9.83333 5.33333 9.5 4.83333 9.5C4.33333 9.5 4 9.83333 4 10.3333C4 14.6667 7.33333 18.1667 11.5 18.5833V20.3333H8.16667C7.66667 20.3333 7.33333 20.6667 7.33333 21.1667C7.33333 21.6667 7.66667 22 8.16667 22H16.5C17 22 17.3333 21.6667 17.3333 21.1667C17.3333 20.6667 17 20.3333 16.5 20.3333H13.1667V18.5833C17.3333 18.1667 20.6667 14.6667 20.6667 10.3333Z",fill:null!==(t=colorIconParse.colorMic)&&void 0!==t?t:"#53C088"}))},IconOnMic=function(){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"block"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("circle",{cx:"16",cy:"16",r:"16",fill:"url(#paint0_linear_124_3502)"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M16.2222 17.2224C18.0556 17.2224 19.5556 15.7224 19.5556 13.8891V11.6668C19.5556 9.8335 18.0556 8.3335 16.2222 8.3335C14.3889 8.3335 12.8889 9.8335 12.8889 11.6668V13.8891C12.8889 15.7224 14.3889 17.2224 16.2222 17.2224Z",fill:"white"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M21.7779 13.8891C21.7779 13.5557 21.5556 13.3335 21.2223 13.3335C20.889 13.3335 20.6667 13.5557 20.6667 13.8891C20.6667 16.3335 18.6667 18.3335 16.2223 18.3335C13.7779 18.3335 11.7779 16.3335 11.7779 13.8891C11.7779 13.5557 11.5556 13.3335 11.2223 13.3335C10.889 13.3335 10.6667 13.5557 10.6667 13.8891C10.6667 16.7779 12.889 19.1113 15.6667 19.3891V20.5557H13.4445C13.1112 20.5557 12.889 20.7779 12.889 21.1113C12.889 21.4446 13.1112 21.6668 13.4445 21.6668H19.0001C19.3334 21.6668 19.5556 21.4446 19.5556 21.1113C19.5556 20.7779 19.3334 20.5557 19.0001 20.5557H16.7779V19.3891C19.5556 19.1113 21.7779 16.7779 21.7779 13.8891Z",fill:"white"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("defs",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("linearGradient",{id:"paint0_linear_124_3502",x1:"0",y1:"16",x2:"32",y2:"16",gradientUnits:"userSpaceOnUse"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("stop",{stopColor:colorIconParse.colorType?"solid"===colorIconParse.colorType?colorIconParse.colorMic:colorIconParse.colorFrom:"#53C088"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("stop",{offset:"1",stopColor:colorIconParse.colorType?"solid"===colorIconParse.colorType?colorIconParse.colorMic:colorIconParse.colorTo:"#53C088"}))))},IconUpFile=function(){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M20.6886 11.4994L12.8567 19.3313C10.6317 21.5562 6.89376 21.5562 4.66879 19.3313C2.44382 17.1063 2.44382 13.3684 4.66879 11.1434L11.6107 4.20148C13.2127 2.59951 15.7046 2.59951 17.3066 4.20148C18.9086 5.80346 18.9086 8.29543 17.3066 9.8974L10.8987 16.2163C10.0087 17.1063 8.58473 17.1063 7.78374 16.2163C6.89376 15.3263 6.89376 13.9023 7.78374 13.1014L13.1237 7.76143",stroke:"#AFAFAF",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"square"}))};Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){function e(){return(e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!statusVoice){e.next=5;break}return e.next=3,voiceSocketConnect();case 3:return"true"===isOnMic&&0!==msg.length&&setTimeout((function(){setenableVoice(!0),setremoveVoice(!1),setShowvoice(!0),startRecording()}),1e3),e.abrupt("return",(function(){voiceWebsocket.current.close()}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[statusVoice]),Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){isAutoStopMic&&setTimeout((function(){stopRecording(),onEnter(),setIsAutoStopMic(!1)}),timeStopRecorder)}),[isAutoStopMic]);var voiceSocketConnect=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,voiceWebsocket.current.open(tokenVoice,tokenIdVoice,tokenKeyVoice);case 2:return e.next=4,voiceWebsocket.current.connect();case 4:return e.next=6,voiceWebsocket.current.subscribe(_callbackVoiceSocket);case 6:return e.next=8,voiceWebsocket.current.checkReadyState();case 8:return e.next=10,voiceWebsocket.current.onclose();case 10:return e.next=12,voiceWebsocket.current.onerror();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createAudioProcessor=function(e,t){var _=e.createScriptProcessor(4096,1,1),a=t.context.sampleRate;return(recorder=new _lib_stream__WEBPACK_IMPORTED_MODULE_34__.Recorder).init(a),recorder.worker.onmessage=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var _;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,voiceWebsocket.current.send(t.data.buffer);case 2:recorder.callbacks[t.data.command]&&"function"==typeof(_=recorder.callbacks[t.data.command].pop())&&_(t.data.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);recorder.process(t)},_.shutdown=function(){_.disconnect(),_.onaudioprocess=null},_.connect(e.destination),_},_callbackVoiceSocket=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var _,a;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(_=t)||void 0===_?void 0:_.code)){e.next=3;break}return e.abrupt("return");case 3:try{resultText.length||(resultText.push(_.results[0].alternatives[0].transcript),setsendMsg(resultText.join(" "))),a=[],_.results[0].alternatives[0].transcript.length&&a.push(_.results[0].alternatives[0].transcript),_.results.length>1&&_.results[1].alternatives[0].transcript.length&&a.push(_.results[1].alternatives[0].transcript),(_.results[0].alternatives[0].transcript.length||_.results.length>1&&_.results[1].alternatives[0].transcript.length)&&(resultText[resultText.length-1]=a.join(" "),setsendMsg(resultText.join(" "))),(_.results[0].isFinal||_.results.length>1&&_.results[1].isFinal)&&(resultText[resultText.length-1]=a.join(" "),resultText.push(""),setsendMsg(resultText.join(" ")),setIsAutoStopMic(!0),resultText=[])}catch(n){console.log(n.data)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),startRecording=function(){recording||(setIsProcessing(!0),setRecording(!0),startMicrophone())},startMicrophone=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=3;break}return alert("Missing support for navigator.mediaDevices.getUserMedia"),e.abrupt("return");case 3:return e.next=5,voiceWebsocket.current.checkReadyState();case 5:if(1===e.sent){e.next=9;break}return e.next=9,voiceSocketConnect();case 9:if(audioContext=new AudioContext,t=function(e){setMediaStream(e);var t=audioContext.createMediaStreamSource(e),_=createAudioProcessor(audioContext,t);t.connect(_),setMediaStreamSource(t),setProcessor(_)},_=function(e){console.error("recording failure",e)},!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=25;break}return e.prev=13,e.next=16,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 16:a=e.sent,t(a),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),_(e.t0);case 23:e.next=35;break;case 25:return e.prev=25,e.next=28,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 28:n=e.sent,t(n),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(25),_(e.t1);case 35:case"end":return e.stop()}}),e,null,[[13,20],[25,32]])})));return function(){return e.apply(this,arguments)}}(),stopRecording=function(){recording&&(setRecording(!1),stopMicrophone(),setenableVoice(!1),setShowSend(!1))},stopMicrophone=function(){mediaStream&&mediaStream.getTracks()[0].stop(),mediaStreamSource&&mediaStreamSource.disconnect(),processor&&processor.shutdown(),audioContext&&audioContext.close()},getAudio=function(){startRecording()},stopAllAudio=function(){var e=msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old",buttons:e.buttons})}));setMsg(e),showIconTalk(!1),setIsFocus(!0),setTimeout((function(){InputChat.current&&InputChat.current.focus(),scrollToBottom()}),400)},uploads={multiple:!0,beforeUpload:function(e,t){return e.size>10485760?(antd__WEBPACK_IMPORTED_MODULE_36__.b.error("File v\u01b0\u1ee3t qu\xe1 dung l\u01b0\u1ee3ng cho ph\xe9p"),!1):(setFileList([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(fileList),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(t))),!1)},fileList:fileList},handleUpload=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(){var t,_,a,n,o,r,s,i;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,Promise.all(fileList.map(function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark((function e(t){var _;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(_=new FormData).append("file",t),e.next=4,axios__WEBPACK_IMPORTED_MODULE_11___default.a.post("".concat(_constants_Url__WEBPACK_IMPORTED_MODULE_12__.a,"?bot_id=").concat(id),_,{headers:{Authorization:"Bearer ".concat(tokenCode)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){e.map((function(e){return t=[].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(t),[e.data.object])})),setFileList([])}));case 3:if(""===sendMsg){e.next=8;break}return e.next=6,handleNewUserMessage(sendMsg,sendMsg,void 0,t);case 6:e.next=11;break;case 8:n=(null===(_=t)||void 0===_?void 0:_.length)>0?t.map((function(e){return{id:uuidv4(),text:"",source:"client",type:"file",file:e}})):[],(null===(a=t)||void 0===a?void 0:a.length)>0&&setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(n),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))),localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_30___default()().format("DD/MM/YYYY HH:mm"));case 11:o=0;case 12:if(!(o<t.length)){e.next=21;break}return s=t[o],i={bot_id:id,sender_id:sendername||"smartbot",text:"/others",input_channel:"livechat",logSTT_id:"",conversation_id:null===infoChatwoot||void 0===infoChatwoot||null===(r=infoChatwoot.object)||void 0===r?void 0:r.id,debug:!1,metadata_content:[{type:"file",file_url:s.file_url,file_name:s.file_name,file_mime:s.file_mime,file_extract_info:{}}]},e.next=17,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_20__.a.socketChatwootMessage(i,tokenCode);case 17:e.sent;case 18:o++,e.next=12;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),delFile=function(e){var t=fileList.filter((function(t,_){return _!=e}));setFileList(t)};Object(react__WEBPACK_IMPORTED_MODULE_7__.useEffect)((function(){if(InputChat&&InputChat.current){InputChat.current.style.height="0px";var e=InputChat.current.scrollHeight;InputChat.current.style.height=e+"px",InputChat.current.scrollTop=e}}),[sendMsg]);var handleTouchEnd=function(){InputChat.current&&InputChat.current.blur()},IconHome=function(){var e;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M28.9122 14.2509L16.69 4.25094C16.4915 4.08866 16.243 4 15.9867 4C15.7303 4 15.4818 4.08866 15.2833 4.25094L3.0611 14.2509C2.83813 14.4391 2.69809 14.7073 2.67123 14.9978C2.64436 15.2883 2.73283 15.5777 2.91752 15.8036C3.10221 16.0294 3.3683 16.1735 3.65835 16.2049C3.9484 16.2362 4.23913 16.1521 4.46777 15.9709L5.98665 14.7287V27.3332C5.98665 27.6278 6.10372 27.9105 6.31209 28.1188C6.52047 28.3272 6.80308 28.4443 7.09777 28.4443H13.7644V21.7776H18.2089V28.4443H24.8755C25.1702 28.4443 25.4528 28.3272 25.6612 28.1188C25.8696 27.9105 25.9867 27.6278 25.9867 27.3332V14.7287L27.5055 15.9709C27.6182 16.066 27.7486 16.1376 27.8891 16.1818C28.0297 16.2259 28.1777 16.2417 28.3244 16.2281C28.4711 16.2145 28.6137 16.1719 28.7437 16.1027C28.8738 16.0336 28.9889 15.9392 29.0822 15.8251C29.1754 15.7111 29.2451 15.5796 29.2871 15.4384C29.3291 15.2971 29.3426 15.149 29.3268 15.0025C29.3109 14.856 29.2661 14.7141 29.195 14.5851C29.1238 14.456 29.0277 14.3425 28.9122 14.2509Z",fill:null!==(e=colorIconParse.colorSend)&&void 0!==e?e:"#53C088"}))};return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_18__.a,{theme:_src_theme__WEBPACK_IMPORTED_MODULE_19__.a},!typeaudio&&voiceType&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_containers_WaitingHome__WEBPACK_IMPORTED_MODULE_28__.a,{onAction:function(e){return setTypeAudio(e)}}),!typeaudio&&voiceType||!loaded?!loaded&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{alignItems:"center",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22___default.a,{size:10,color:"#7D8FA9"})):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{backgroundColor:stylesJSon.bg?stylesJSon.bg:"#F3F6F6",boxShadow:"-5px -5px 20px rgba(247, 247, 247, 0.25), 5px 5px 20px rgba(0, 0, 0, 0.25)",borderRadius:16,justifyContent:"flex-end",height:"100%",".rcw-header":{display:"none",fontFamily:"Open Sans, sans-serif"},".rcw-messages-container":{marginTop:"20px"},".rcw-message-text":{fontFamily:"Open Sans, sans-serif",fontSize:1,background:null!==(_stylesJSon$question$=null===stylesJSon||void 0===stylesJSon||null===(_stylesJSon$question=stylesJSon.question)||void 0===_stylesJSon$question?void 0:_stylesJSon$question.bg)&&void 0!==_stylesJSon$question$?_stylesJSon$question$:"#53C088",color:"#fff"},".infinite-scroll-component":{paddingBottom:"50px"},"#messages":{}}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(BotContext.Provider,{value:{logo:logo,timeout:0,stylesJSon:stylesJSon}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{ref:observed,className:"conversation",id:"scrollableDiv",bg:stylesJSon.bg?stylesJSon.bg:"#F3F6F6",sx:{width:"100%",maxHeight:"90%",overflowY:"scroll",flexDirection:"column-reverse"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{ref:messagesEndRef,sx:{visibility:"hidden",height:0}},"last"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_infinite_scroll_component__WEBPACK_IMPORTED_MODULE_21__.a,{dataLength:null!==(_data$length=null===data||void 0===data?void 0:data.length)&&void 0!==_data$length?_data$length:0,next:fetchMore,hasMore:hasMore,style:{display:"flex",flexDirection:"column-reverse"},inverse:!0,loader:react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22___default.a,{size:10,color:"#7D8FA9"})),scrollableTarget:"scrollableDiv"},requestBot?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_25__.a,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_22___default.a,{size:6,color:"#7D8FA9"})):null,facebookstyleReply(msg).map((function(e,t){return"bot"===e.source?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(ParseReply,{key:null===e||void 0===e?void 0:e.id,data:e,handleNewUserMessage:handleNewUserMessage,indexing:t,showIconTalk:showIconTalk,loading:loading,count:msg.length,msg:msg,setMsg:setMsg,hiddenAudio:hiddenAudio,timeTyping:timeTyping,isTyping:isTyping}):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(UserQuestion,{key:null===e||void 0===e?void 0:e.id,messUserChat:e.text,styleQues:null===stylesJSon||void 0===stylesJSon?void 0:stylesJSon.question,type:null===e||void 0===e?void 0:e.type,file:null===e||void 0===e?void 0:e.file})})))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{width:"100%",height:"56px",position:"fixed",bottom:"5.5px",alignItems:"center",borderRadius:"0 0 8px 8px"}},statusVoice&&(enableVoice?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:"solid"===colorIconParse.colorType?{width:"100%",alignItems:"center",border:"1px solid ".concat(colorIconParse.colorMic),position:"relative",maxHeight:"72px",minHeight:"56px",resize:"none",padding:"9px",boxSizing:"border-box"}:{width:"100%",alignItems:"center",background:"linear-gradient(white, white) padding-box, linear-gradient(to right, ".concat(colorIconParse.colorFrom,", ").concat(colorIconParse.colorTo,") border-box"),border:"1px solid transparent",position:"relative",maxHeight:"72px",minHeight:"56px",resize:"none",padding:"9px",boxSizing:"border-box"},bg:"#fff"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{style:{position:"absolute",width:"100%",textAlign:"center",top:"-24px",fontWeight:500,color:"solid"===colorIconParse.colorType?colorIconParse.colorMic:colorIconParse.colorFrom}},"\u0110ang ghi \xe2m..."),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.l,{sx:{lineHeight:"18px",border:"none",outline:"none",backgroundColor:"#fff",maxHeight:"60px",minHeight:"30px",resize:"none",padding:"9px",boxSizing:"border-box",fontSize:"15px"},placeholder:(null===placeholderInput||void 0===placeholderInput?void 0:placeholderInput.length)>0?placeholderInput:"Nh\u1eadp c\xe2u chat",onChange:function(e){return typingMsg(e)},value:sendMsg,ref:InputChat,onFocus:function(){return onFocusInput()},onBlur:function(){return onBLurInput()},rows:1,disabled:enableVoice}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{ml:5,mr:"10px",sx:{cursor:"pointer",minWidth:void 0},onTouchEnd:handleTouchEnd,onClick:function(){return stopRecording()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconOnMic,null)))):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:isFocus?{width:"100%",alignItems:"center",position:"absolute",maxHeight:"72px",minHeight:"56px",resize:"none",padding:"9px",boxSizing:"border-box",border:isFocus?"1.5px solid #53c088":"none",borderRadius:"0 0 9px 9px",bottom:"0.5px"}:{width:"100%",alignItems:"center",position:"absolute",maxHeight:"72px",minHeight:"56px",resize:"none",padding:"7px",boxSizing:"border-box",border:showUserVoice&&!enableVoice?"1.5px solid #53C088":"none",borderRadius:"0 0 8px 8px",bottom:"0.5px"},bg:"#fff"},isShowProcessing&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{style:{position:"absolute",width:"100%",textAlign:"center",top:"-24px",fontWeight:500,color:"solid"===colorIconParse.colorType?colorIconParse.colorMic:colorIconParse.colorFrom}},"Tr\u1ee3 l\xfd \u1ea3o \u0111ang x\u1eed l\xfd..."),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{id:"myInputautocomplete-list",className:"autocomplete-items",sx:{position:"absolute",border:"1px solid #d4d4d4",borderBottom:"none",borderTop:"none",zIndex:"99",bottom:"100%",left:0,right:0,div:{padding:"5px 10px",cursor:"pointer",backgroundColor:"#fff",borderTop:"1px solid #d4d4d4",borderBottom:"1px solid #d4d4d4",fontSize:"14px","&:hover":{backgroundColor:"#e9e9e9"},b:{color:null!==(_colorIconParse$color5=colorIconParse.colorSend)&&void 0!==_colorIconParse$color5?_colorIconParse$color5:"#53C088"}}}},showSuggestions&&listSuggests.length>0&&listSuggests.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{onClick:function(){return onClickSuggest(e)},key:t},react_html_parser__WEBPACK_IMPORTED_MODULE_33___default()(e.code))}))),fileList.length>0&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{sx:{backgroundColor:"#fff",padding:"16px",position:"absolute",borderTopRightRadius:"8px",borderTopLeftRadius:"8px",zIndex:"98",bottom:"100%",left:0,right:0,maxHeight:"156px",overflowY:"scroll"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.e,{width:[128,null,192]},fileList.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{key:t,sx:{padding:"5px 10px",width:"185px",height:"58px",display:"flex",backgroundColor:"#DDE4E9",borderRadius:"8px",gap:"10px",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{width:"28px",height:"28px"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("img",{src:checkLogoExtension(e.name),alt:"icon_file",width:"28px"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{style:{WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"}},e.name)),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{onClick:function(){return delFile(t)},style:{cursor:"pointer"},width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M14.1667 5.8335L5.83334 14.1668",stroke:"#757575",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"square"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M14.1667 14.1668L5.83334 5.8335",stroke:"#757575",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"square"}))))})))),showUserVoice&&!enableVoice?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{cursor:"pointer",justifyContent:"center",alignItems:"center"},onClick:stopAllAudio},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{sx:{width:"32px",height:"32px"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.f,{src:_images_icons_stop_svg__WEBPACK_IMPORTED_MODULE_45___default.a,alt:"stop",width:"100%"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{className:"animation-audio"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("video",{src:"/2.mp4",muted:!0,autoPlay:!0,loop:!0,width:"100%"}))):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_7___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{mr:"10px",sx:{minWidth:void 0,cursor:"pointer"},onMouseDown:function(e){e.preventDefault(),handleNewUserMessage("/home")},onTouchEnd:handleTouchEnd},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconHome,null)),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.l,{sx:{lineHeight:"18px",border:"none",outline:"none",backgroundColor:"#fff",maxHeight:"60px",minHeight:"30px",resize:"none",padding:"9px",boxSizing:"border-box",fontSize:"15px"},placeholder:(null===placeholderInput||void 0===placeholderInput?void 0:placeholderInput.length)>0?placeholderInput:"Nh\u1eadp c\xe2u chat",onChange:function(e){return typingMsg(e)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),onEnter())},value:sendMsg,ref:InputChat,onFocus:function(){return onFocusInput()},onBlur:function(){return onBLurInput()},rows:1})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{height:"100%",alignItems:"center",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{mr:"10px",sx:{minWidth:void 0,height:"24px",".ant-upload-list":{display:"none"}},onTouchEnd:handleTouchEnd,onMouseDown:function(e){return e.preventDefault()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_37__.a,uploads,react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("label",{style:{cursor:"pointer",minWidth:void 0}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconUpFile,null))))),showSend?react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{ml:5,mr:"10px",sx:{cursor:"pointer",minWidth:void 0},onTouchEnd:handleTouchEnd,onMouseDown:function(e){e.preventDefault(),onEnter()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconSend,null)):react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{height:"100%",alignItems:"center",justifyContent:"center",width:50}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{onMouseDown:function(e){setMsg(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_5__.a)({},e),{},{delayTime:0,type_msg:"old"})}))),setenableVoice(!0),setremoveVoice(!1),setShowSend(!1),getAudio(),showIconTalk(!1)},onTouchEnd:handleTouchEnd},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconMic,null))))),!statusVoice&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.d,{sx:{width:"100%",alignItems:"center",position:"relative",maxHeight:"72px",minHeight:"56px",resize:"none",padding:"9px",boxSizing:"border-box",border:isFocus?"1px solid #53c088":"none",borderRadius:"0 0 9px 9px"},bg:"#fff"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{id:"myInputautocomplete-list",className:"autocomplete-items",sx:{position:"absolute",border:"1px solid #d4d4d4",borderBottom:"none",borderTop:"none",zIndex:"99",bottom:"100%",left:0,right:0,div:{padding:"10px",cursor:"pointer",backgroundColor:"#fff",borderTop:"1px solid #d4d4d4",borderBottom:"1px solid #d4d4d4","&:hover":{backgroundColor:"#e9e9e9"},b:{color:null!==(_colorIconParse$color6=colorIconParse.colorSend)&&void 0!==_colorIconParse$color6?_colorIconParse$color6:"#53C088"}}}},showSuggestions&&listSuggests.length>0&&listSuggests.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{onClick:function(){return onClickSuggest(e)},key:t},react_html_parser__WEBPACK_IMPORTED_MODULE_33___default()(e.code))}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.l,{sx:{lineHeight:"18px",border:"none",outline:"none",backgroundColor:"#fff",maxHeight:"60px",minHeight:"30px",resize:"none",padding:"9px",boxSizing:"border-box",fontSize:"15px"},placeholder:(null===placeholderInput||void 0===placeholderInput?void 0:placeholderInput.length)>0?placeholderInput:"Nh\u1eadp c\xe2u chat",onChange:function(e){return typingMsg(e)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),onEnter())},value:sendMsg,ref:InputChat,onFocus:function(){return onFocusInput()},onBlur:function(){return onBLurInput()},rows:1}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_16__.b,{ml:5,mr:"10px",sx:{cursor:"pointer",minWidth:void 0},onTouchEnd:handleTouchEnd,onMouseDown:function(e){e.preventDefault(),onEnter()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(IconSend,null)))))))};__webpack_exports__.a=BotLiveVer2},377:function(e,t,_){"use strict";_.r(t);var a=_(0),n=_.n(a),o=_(19),r=_.n(o),s=(_(256),_(257),_(75)),i=_(8),l=_(40),u=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("section",{className:"u-clearfix u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-section-1",id:"carousel_c23b"},n.a.createElement("div",{className:"u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1"},n.a.createElement("div",{className:"u-layout"},n.a.createElement("div",{className:"u-layout-row"},n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-left-cell u-size-30 u-image-1"},n.a.createElement("div",{className:"u-container-layout"})),n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-right-cell u-size-30 u-image-2"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-lg u-valign-middle-md u-container-layout-2"},n.a.createElement("div",{className:"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-group u-group-1"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-container-layout-3"},n.a.createElement("h3",{className:"u-text u-text-1"},"Future innovations"),n.a.createElement("h1",{className:"u-text u-title u-text-2"},"Technology Revolution"),n.a.createElement("p",{className:"u-large-text u-text u-text-variant u-text-3"},"The future is fast approaching, and a new era of digital innovation and disruption is here."))))))))))},c=_(5),d=_(1),p=_(3),E=function(){n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_mb.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]);var e=Object(a.useState)(""),t=Object(d.a)(e,2),_=t[0],o=t[1],r=Object(a.useState)(!1),s=Object(d.a)(r,2),i=s[0],l=s[1],u=Object(a.useRef)(null),E=Object(a.useState)(""),m=Object(d.a)(E,2),b=m[0],O=m[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),g=v[0],M=v[1],h=Object(a.useState)(""),P=Object(d.a)(h,2),D=P[0],T=P[1],C=Object(a.useState)(""),A=Object(d.a)(C,2),I=A[0],S=A[1],x=Object(a.useState)(!1),y=Object(d.a)(x,2),R=y[0],w=y[1],U=Object(a.useState)(""),L=Object(d.a)(U,2),B=L[0],W=L[1],K=Object(a.useState)(!1),k=Object(d.a)(K,2),j=k[0],N=k[1],V=Object(a.useState)(""),F=Object(d.a)(V,2),q=F[0],H=F[1],J=Object(a.useState)(!1),z=Object(d.a)(J,2),Y=z[0],G=z[1],Q=Object(a.useState)({errSource:!1,errCard:!1,errPrice:!1,errMessage:!1}),$=Object(d.a)(Q,2),X=$[0],Z=$[1],ee=Object(a.useState)(!1),te=Object(d.a)(ee,2),_e=te[0],ae=te[1];Object(a.useEffect)((function(){i&&setTimeout((function(){ne("Tai_Khoan_Nguon"),l(!1)}),3e3)}),[i]),Object(a.useEffect)((function(){g&&setTimeout((function(){ne("So_The"),M(!1)}),3e3)}),[g]),Object(a.useEffect)((function(){R&&setTimeout((function(){ne("So_Tien"),w(!1)}),3e3)}),[R]),Object(a.useEffect)((function(){j&&setTimeout((function(){ne("ND_Chuyen_Khoan"),N(!1)}),3e3)}),[j]),Object(a.useEffect)((function(){Y&&setTimeout((function(){ne("Email_Thong_Bao"),G(!1)}),3e3)}),[Y]);var ne=function(e){window&&window.parent&&window.parent.postMessage({type:"errorCode",message:e},"*")};return n.a.createElement("div",{className:"u-body"},_e?n.a.createElement("h2",{style:{color:"#141ed2",textAlign:"center"}},"Chuy\u1ec3n kho\u1ea3n th\xe0nh c\xf4ng"):n.a.createElement(p.b,{pt:4,pb:4,sx:{maxWidth:"768px",marginLeft:"auto",marginRight:"auto",paddingLeft:"16px",paddingRight:"16px"}},n.a.createElement("h2",{style:{color:"#141ed2",textAlign:"center"}},"Chuy\u1ec3n kho\u1ea3n \u0111\u01a1n qua s\u1ed1 th\u1ebb"),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Th\xf4ng tin t\xe0i kho\u1ea3n"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"T\xe0i kho\u1ea3n ngu\u1ed3n"),n.a.createElement(p.j,{value:_,onChange:function(e){o(e.target.value),l(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errSource:!1})}))},ref:u,onFocus:function(){l(!0)},onBlur:function(){return l(!1)},sx:{borderColor:"#d2d2d2"}},n.a.createElement("option",{value:"",disabled:!0},"Select option"),n.a.createElement("option",{value:"1"},"CONG TY TNHH VNP VIET NAM - VND"),n.a.createElement("option",{value:"2"},"CONG TY TNHH VNP VIET NAM - USD")),X.errSource&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin"))),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem",marginTop:"30px"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Th\xf4ng tin th\u1ee5 h\u01b0\u1edfng"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"S\u1ed1 th\u1ebb*"),n.a.createElement(p.b,{sx:{display:"flex",flex:"1 30px"}},n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n ng\u01b0\u1eddi b\u1ea1n mu\u1ed1n chuy\u1ec3n",value:b,onChange:function(e){var t=function(e){for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),_=t&&t[0]||"",a=[],n=0;n<_.length;n+=4)a.push(_.substring(n,n+4));return a.length?a.join(" "):e}(e.target.value);O(t),M(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errCard:!1})}))},onFocus:function(){M(!0)},type:"text",onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},onBlur:function(){return M(!1)},sx:{borderColor:"#d2d2d2"}}),n.a.createElement(p.c,{sx:{marginLeft:15,width:290,color:"#fff",backgroundColor:"#141ed2"},onClick:function(){b.length>0&&T("2345 4567 6789 9012"===b?"NGUYEN VAN A":" ")},disabled:!(b.length>0)},"T\xecm t\xean ch\u1ee7 t\xe0i kho\u1ea3n")),X.errCard&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"T\xean ch\u1ee7 th\u1ebb*"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n ng\u01b0\u1eddi b\u1ea1n mu\u1ed1n chuy\u1ec3n",disabled:!0,value:D,sx:{borderColor:"#d2d2d2"}})))),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem",marginTop:"30px"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Chi ti\u1ebft giao d\u1ecbch"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"S\u1ed1 ti\u1ec1n*"),n.a.createElement(p.d,{sx:{alignItems:"center"}},n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n",onChange:function(e){var t=e.target.value.toString().replaceAll(".","").toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");S(t),w(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errPrice:!1})}))},value:I,onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},onFocus:function(){w(!0)},onBlur:function(){return w(!1)},sx:{borderColor:"#d2d2d2"}}),n.a.createElement(p.k,{sx:{fontWeight:600,color:"#141ed2"}},"VND")),X.errPrice&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"Nh\u1eadp n\u1ed9i dung chuy\u1ec3n kho\u1ea3n*"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp n\u1ed9i dung chuy\u1ec3n kho\u1ea3n (t\u1ed1i \u0111a 200 k\xfd t\u1ef1)",onChange:function(e){W(e.target.value),N(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errMessage:!1})}))},value:B,onFocus:function(){N(!0)},onBlur:function(){return N(!1)},sx:{borderColor:"#d2d2d2"}}),X.errMessage&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"Email th\xf4ng b\xe1o cho ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng (N\u1ebfu c\u1ea7n)"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp email ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng",value:q,onChange:function(e){H(e.target.value),G(!1)},onFocus:function(){G(!0)},onBlur:function(){return G(!1)},sx:{borderColor:"#d2d2d2"}})))),n.a.createElement(p.b,{sx:{marginTop:30,textAlign:"center"}},n.a.createElement(p.c,{sx:{width:290,color:"#fff",backgroundColor:"#141ed2",cursor:"pointer"},onClick:function(){""===_&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errSource:!0})})),""===b&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errCard:!0})})),""===I&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errPrice:!0})})),""===B&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errMessage:!0})})),""!==_&&""!==b&&""!==I&&""!==B&&ae(!0)}},"Ti\u1ebfp t\u1ee5c"))))},m=_(2),b=_.n(m),O=_(7),f=_(52),v=_.n(f),g=_(23),M=_(53),h=_.n(M),P=function(){var e=Object(i.q)().id,t="VnptSmartbot"+e,_=h()(t),o=Object(i.m)(),r=Object(a.useState)([]),s=Object(d.a)(r,2),l=s[0],u=s[1],c=Object(a.useRef)(null),E=Object(a.useState)(0),m=Object(d.a)(E,2),f=(m[0],m[1],Object(a.useState)(0)),M=Object(d.a)(f,2),P=(M[0],M[1],v.a.parse(o.search)),D=P.sendername,T=(P.botMetadata,P.isSupport),C=function(){var t=Object(O.a)(b.a.mark((function t(a){var n,o,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={bot_id:e,sender_id:D||"smartbot",metadata:{button_variables:[{variableName:"error_code",value:a}]},text:"/loi_tuong_tac_website",input_channel:"livechat"},t.next=3,g.a.livechatIDG(n,_);case 3:o=t.sent,r=null===o||void 0===o?void 0:o.data.object.sb.card_data,u(r),window&&window.parent&&window.parent.postMessage({type:"showError"},"*");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){window.onmessage=function(e){"errorCode"==e.data.type&&"true"===T&&C(e.data.message)}})),n.a.createElement(p.b,{style:{paddingTop:"10px"}},l.map((function(e,t){return n.a.createElement(p.d,{sx:{alignItems:"center",height:"100%"},mt:1,key:t},n.a.createElement(p.b,{ref:c,className:"textCard",id:"div_auto",ml:"-3px",sx:{height:"100%",position:"relative",background:"#F3F6F6",borderRadius:8,px:2}},n.a.createElement(p.d,{sx:{alignItems:"center",height:"100%"}},n.a.createElement(p.k,{sx:{fontSize:1,color:"textanswer",whiteSpace:"pre-line"}},e.text))))})))};var D=_(30),T=function(){n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_mb_v2.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]);var e=Object(a.useState)(""),t=Object(d.a)(e,2),_=t[0],o=t[1],r=Object(a.useState)(!1),s=Object(d.a)(r,2),i=s[0],l=s[1],u=Object(a.useRef)(null),E=Object(a.useState)(""),m=Object(d.a)(E,2),b=m[0],O=m[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),g=v[0],M=v[1],h=Object(a.useState)(""),P=Object(d.a)(h,2),D=P[0],T=P[1],C=Object(a.useState)(""),A=Object(d.a)(C,2),I=A[0],S=A[1],x=Object(a.useState)(!1),y=Object(d.a)(x,2),R=y[0],w=y[1],U=Object(a.useState)(""),L=Object(d.a)(U,2),B=L[0],W=L[1],K=Object(a.useState)(!1),k=Object(d.a)(K,2),j=k[0],N=k[1],V=Object(a.useState)(""),F=Object(d.a)(V,2),q=F[0],H=F[1],J=Object(a.useState)(!1),z=Object(d.a)(J,2),Y=z[0],G=z[1],Q=Object(a.useState)({errSource:!1,errCard:!1,errPrice:!1,errMessage:!1}),$=Object(d.a)(Q,2),X=$[0],Z=$[1],ee=Object(a.useState)(!1),te=Object(d.a)(ee,2),_e=te[0],ae=te[1];Object(a.useEffect)((function(){i&&setTimeout((function(){ne("Tai_Khoan_Nguon"),l(!1)}),3e3)}),[i]),Object(a.useEffect)((function(){g&&setTimeout((function(){ne("So_The"),M(!1)}),3e3)}),[g]),Object(a.useEffect)((function(){R&&setTimeout((function(){ne("So_Tien"),w(!1)}),3e3)}),[R]),Object(a.useEffect)((function(){j&&setTimeout((function(){ne("ND_Chuyen_Khoan"),N(!1)}),3e3)}),[j]),Object(a.useEffect)((function(){Y&&setTimeout((function(){ne("Email_Thong_Bao"),G(!1)}),3e3)}),[Y]);var ne=function(e){window&&window.parent&&window.parent.postMessage({type:"errorCode",message:e},"*")};return n.a.createElement("div",{className:"u-body"},_e?n.a.createElement("h2",{style:{color:"#141ed2",textAlign:"center"}},"Chuy\u1ec3n kho\u1ea3n th\xe0nh c\xf4ng"):n.a.createElement(p.b,{pt:4,pb:4,sx:{maxWidth:"768px",marginLeft:"auto",marginRight:"auto",paddingLeft:"16px",paddingRight:"16px"}},n.a.createElement("h2",{style:{color:"#141ed2",textAlign:"center"}},"Chuy\u1ec3n kho\u1ea3n \u0111\u01a1n qua s\u1ed1 th\u1ebb"),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Th\xf4ng tin t\xe0i kho\u1ea3n"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"T\xe0i kho\u1ea3n ngu\u1ed3n"),n.a.createElement(p.j,{value:_,onChange:function(e){o(e.target.value),l(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errSource:!1})}))},ref:u,onFocus:function(){l(!0)},onBlur:function(){return l(!1)},sx:{borderColor:"#d2d2d2"}},n.a.createElement("option",{value:"",disabled:!0},"Select option"),n.a.createElement("option",{value:"1"},"CONG TY TNHH VNP VIET NAM - VND"),n.a.createElement("option",{value:"2"},"CONG TY TNHH VNP VIET NAM - USD")),X.errSource&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin"))),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem",marginTop:"30px"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Th\xf4ng tin th\u1ee5 h\u01b0\u1edfng"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"S\u1ed1 th\u1ebb*"),n.a.createElement(p.b,{sx:{display:"flex",flex:"1 30px"}},n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n ng\u01b0\u1eddi b\u1ea1n mu\u1ed1n chuy\u1ec3n",value:b,onChange:function(e){var t=function(e){for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),_=t&&t[0]||"",a=[],n=0;n<_.length;n+=4)a.push(_.substring(n,n+4));return a.length?a.join(" "):e}(e.target.value);O(t),M(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errCard:!1})}))},onFocus:function(){M(!0)},type:"text",onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},onBlur:function(){return M(!1)},sx:{borderColor:"#d2d2d2"}}),n.a.createElement(p.c,{sx:{marginLeft:15,width:290,color:"#fff",backgroundColor:"#141ed2"},onClick:function(){b.length>0&&T("2345 4567 6789 9012"===b?"NGUYEN VAN A":" ")},disabled:!(b.length>0)},"T\xecm t\xean ch\u1ee7 t\xe0i kho\u1ea3n")),X.errCard&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"T\xean ch\u1ee7 th\u1ebb*"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 t\xe0i kho\u1ea3n ng\u01b0\u1eddi b\u1ea1n mu\u1ed1n chuy\u1ec3n",disabled:!0,value:D,sx:{borderColor:"#d2d2d2"}})))),n.a.createElement(p.b,{sx:{padding:"0 28px",boxShadow:"0 0 1rem 0 rgb(51 51 51 / 20%)",borderRadius:"0.5rem",marginTop:"30px"}},n.a.createElement(p.k,{sx:{padding:"1rem 0",fontSize:"1.25rem",color:"#141ed2",display:"block",borderBottom:"1px solid #959595"}},"Chi ti\u1ebft giao d\u1ecbch"),n.a.createElement(p.b,{sx:{padding:"1rem 0"}},n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap"}},"S\u1ed1 ti\u1ec1n*"),n.a.createElement(p.d,{sx:{alignItems:"center"}},n.a.createElement(p.g,{placeholder:"Nh\u1eadp s\u1ed1 ti\u1ec1n",onChange:function(e){var t=e.target.value.toString().replaceAll(".","").toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.");S(t),w(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errPrice:!1})}))},value:I,onKeyPress:function(e){/[0-9]/.test(e.key)||e.preventDefault()},onFocus:function(){w(!0)},onBlur:function(){return w(!1)},sx:{borderColor:"#d2d2d2"}}),n.a.createElement(p.k,{sx:{fontWeight:600,color:"#141ed2"}},"VND")),X.errPrice&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"Nh\u1eadp n\u1ed9i dung chuy\u1ec3n kho\u1ea3n*"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp n\u1ed9i dung chuy\u1ec3n kho\u1ea3n (t\u1ed1i \u0111a 200 k\xfd t\u1ef1)",onChange:function(e){W(e.target.value),N(!1),Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errMessage:!1})}))},value:B,onFocus:function(){N(!0)},onBlur:function(){return N(!1)},sx:{borderColor:"#d2d2d2"}}),X.errMessage&&n.a.createElement(p.k,{sx:{color:"red"}},"Vui l\xf2ng nh\u1eadp th\xf4ng tin")),n.a.createElement(p.b,null,n.a.createElement(p.h,{sx:{fontWeight:600,marginBottom:"1rem",display:"flex",alignItems:"center",whiteSpace:"nowrap",marginTop:30}},"Email th\xf4ng b\xe1o cho ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng (N\u1ebfu c\u1ea7n)"),n.a.createElement(p.g,{placeholder:"Nh\u1eadp email ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng",value:q,onChange:function(e){H(e.target.value),G(!1)},onFocus:function(){G(!0)},onBlur:function(){return G(!1)},sx:{borderColor:"#d2d2d2"}})))),n.a.createElement(p.b,{sx:{marginTop:30,textAlign:"center"}},n.a.createElement(p.c,{sx:{width:290,color:"#fff",backgroundColor:"#141ed2",cursor:"pointer"},onClick:function(){""===_&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errSource:!0})})),""===b&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errCard:!0})})),""===I&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errPrice:!0})})),""===B&&Z((function(e){return Object(c.a)(Object(c.a)({},e),{},{errMessage:!0})})),""!==_&&""!==b&&""!==I&&""!==B&&ae(!0)}},"Ti\u1ebfp t\u1ee5c"))))},C=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_bca.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("img",{src:"https://ic-storage.vnpt.vn/public-files/smartbot/Hero-banner.png",style:{maxWidth:"100%",height:"auto"}}))},A=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_masan.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("section",{className:"u-clearfix u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-section-1",id:"carousel_c23b"},n.a.createElement("div",{className:"u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1"},n.a.createElement("div",{className:"u-layout"},n.a.createElement("div",{className:"u-layout-row"},n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-left-cell u-size-30 u-image-1"},n.a.createElement("div",{className:"u-container-layout"})),n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-right-cell u-size-30 u-image-2"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-lg u-valign-middle-md u-container-layout-2"},n.a.createElement("div",{className:"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-group u-group-1"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-container-layout-3"},n.a.createElement("h3",{className:"u-text u-text-1"},"Future innovations"),n.a.createElement("h1",{className:"u-text u-title u-text-2"},"Technology Revolution"),n.a.createElement("p",{className:"u-large-text u-text u-text-variant u-text-3"},"The future is fast approaching, and a new era of digital innovation and disruption is here."))))))))))},I=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_interactive.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("section",{className:"u-clearfix u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-section-1",id:"carousel_c23b"},n.a.createElement("div",{className:"u-clearfix u-expanded-width u-layout-wrap u-layout-wrap-1"},n.a.createElement("div",{className:"u-layout"},n.a.createElement("div",{className:"u-layout-row"},n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-left-cell u-size-30 u-image-1"},n.a.createElement("div",{className:"u-container-layout"})),n.a.createElement("div",{className:"u-container-style u-image u-layout-cell u-right-cell u-size-30 u-image-2"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-lg u-valign-middle-md u-container-layout-2"},n.a.createElement("div",{className:"u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-group u-group-1"},n.a.createElement("div",{className:"u-container-layout u-valign-middle-md u-valign-middle-sm u-valign-middle-xs u-container-layout-3"},n.a.createElement("h3",{className:"u-text u-text-1"},"Future innovations"),n.a.createElement("h1",{className:"u-text u-title u-text-2"},"Technology Revolution"),n.a.createElement("p",{className:"u-large-text u-text u-text-variant u-text-3"},"The future is fast approaching, and a new era of digital innovation and disruption is here."))))))))))},S=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_shb.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("img",{src:"https://ic-storage.vnpt.vn/public-files/smartbot/Hero-banner.png",style:{maxWidth:"100%",height:"auto"}}))},x=function(){return n.a.useEffect((function(){var e=document.createElement("script");return e.src="/demo_pnj.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}}),[]),n.a.createElement("div",{className:"u-body"},n.a.createElement("img",{src:"https://ic-storage.vnpt.vn/public-files/smartbot/Hero-banner.png",style:{maxWidth:"100%",height:"auto"}}))},y=function(){return n.a.createElement(s.a,null,n.a.createElement(i.c,null,n.a.createElement(i.a,{path:"/bot/:id",element:n.a.createElement(l.a,null)}),n.a.createElement(i.a,{path:"/bot_ver2/:id",element:n.a.createElement(D.a,null)}),n.a.createElement(i.a,{path:"/bot_support/:id",element:n.a.createElement(P,null)}),n.a.createElement(i.a,{path:"/demolivechat",element:n.a.createElement(u,null)}),n.a.createElement(i.a,{path:"/demobca",element:n.a.createElement(C,null)}),n.a.createElement(i.a,{path:"/livechatmb",element:n.a.createElement(E,null)}),n.a.createElement(i.a,{path:"/livechatmb_v2",element:n.a.createElement(T,null)}),n.a.createElement(i.a,{path:"/demo_masan",element:n.a.createElement(A,null)}),n.a.createElement(i.a,{path:"/demo_ic",element:n.a.createElement(I,null)}),n.a.createElement(i.a,{path:"/demo_shb",element:n.a.createElement(S,null)}),n.a.createElement(i.a,{path:"/poc_pnj",element:n.a.createElement(x,null)})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},39:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var a=_(152),n=_(0),o=_.n(n),r=_(3),s=["children","typing"],i=function(e){var t=e.children,_=(e.typing,Object(a.a)(e,s));return o.a.createElement(r.d,{sx:{ml:3,marginRight:"40px",wordWrap:"break-word"}},o.a.createElement(r.d,Object.assign({ml:0,sx:{flexDirection:"column",boxSizing:"border-box",flexBasis:"100%"}},_),t))}},40:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return useLogo}));var _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(90),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),_components_TextCard__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(212),_components_ImgCard__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(214),_components_QuickReplyCard__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(218),_components_Carousel__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(219),react_router_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(8),react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(211),react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_chat_widget_lib_styles_css__WEBPACK_IMPORTED_MODULE_12__),theme_ui__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3),query_string__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(52),query_string__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_14__),theme_ui__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(249),_src_theme__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(129),_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(23),react_infinite_scroll_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(130),react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(73),react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19__),_hooks_useFetchMore__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(131),md5__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(53),md5__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_21__),_components_Reply__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(39),_components_Questions__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(105),_images_icons_send_svg__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(172),_images_icons_send_svg__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_images_icons_send_svg__WEBPACK_IMPORTED_MODULE_24__),_images_icons_sendGradient_svg__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(220),_images_icons_sendGradient_svg__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_images_icons_sendGradient_svg__WEBPACK_IMPORTED_MODULE_25__),_images_icons_microphone_svg__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(221),_images_icons_microphone_svg__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_images_icons_microphone_svg__WEBPACK_IMPORTED_MODULE_26__),_images_banphim_svg__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(222),_images_banphim_svg__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_images_banphim_svg__WEBPACK_IMPORTED_MODULE_27__),_images_bgVoice_svg__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(223),_images_bgVoice_svg__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_images_bgVoice_svg__WEBPACK_IMPORTED_MODULE_28__),_images_voicegradient_svg__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(224),_images_voicegradient_svg__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_images_voicegradient_svg__WEBPACK_IMPORTED_MODULE_29__),lodash__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(49),lodash__WEBPACK_IMPORTED_MODULE_30___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_30__),_containers_WaitingHome__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(132),_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(92),moment__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(35),moment__WEBPACK_IMPORTED_MODULE_33___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_33__),_apis_WebsocketService__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(133),js_cookie__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(70),js_cookie__WEBPACK_IMPORTED_MODULE_35___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_35__),react_html_parser__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(15),react_html_parser__WEBPACK_IMPORTED_MODULE_36___default=__webpack_require__.n(react_html_parser__WEBPACK_IMPORTED_MODULE_36__),facebookstyleReply=function(e){for(var t=0;t<e.length;t++){var _=e[t];if(!_.style&&("quickreply"==_.type||"text"==_.type))for(var a=t,n=t+1;n<e.length;n++){var o,r,s,i,l,u;if("quickreply"!=(null===(o=e[n])||void 0===o?void 0:o.type)&&"text"!=(null===(r=e[n])||void 0===r?void 0:r.type))break;n==a+1?(_.style="3","quickreply"!==(null===(s=e[n+1])||void 0===s?void 0:s.type)&&"text"!==(null===(i=e[n+1])||void 0===i?void 0:i.type)&&(e[n].style="1"),"quickreply"!=(null===(l=e[n+1])||void 0===l?void 0:l.type)&&"text"!=(null===(u=e[n+1])||void 0===u?void 0:u.type)||(e[n].style="2"),a=n):_.style="2"}}return e},VoiceSDK=window.VoiceSDK,MAX_TIME_VOICE=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).MAX_TIME_VOICE?Number(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).MAX_TIME_VOICE):30,DELAY_TIME=1,DEFAULT_MSG="C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 quan t\xe2m t\u1edbi d\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i, ch\xfac b\u1ea1n m\u1ed9t ng\xe0y t\u1ed1t l\xe0nh v\xe0 vui v\u1ebb",DEFAULT_TIME_END=420;function uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var ParseReply=function(e){var t=e.data,_=e.msg,a=e.setMsg,n=e.hiddenAudio,o=e.handleNewUserMessage,r=function(e,t){var n=_.map((function(_){return _.id==e?Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},_),{},{voting:t}):_}));a(n)};switch(null===t||void 0===t?void 0:t.type){case"text":return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_TextCard__WEBPACK_IMPORTED_MODULE_7__.a,{item:t,handleNewUserMessage:o,index:e.indexing,showIconTalk:e.showIconTalk,style:t.style,voting:r,hiddenAudio:n}));case"image":return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_ImgCard__WEBPACK_IMPORTED_MODULE_8__.a,{item:t,handleNewUserMessage:o,index:e.indexing,showIconTalk:e.showIconTalk,voting:r}));case"quickreply":return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_QuickReplyCard__WEBPACK_IMPORTED_MODULE_9__.a,{item:t,chat:e.loading,handleNewUserMessage:o,index:e.indexing,showIconTalk:e.showIconTalk,voting:r,hiddenAudio:n}));case"carousel":return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Carousel__WEBPACK_IMPORTED_MODULE_10__.a,{item:t,handleNewUserMessage:o,index:e.indexing,showIconTalk:e.showIconTalk,voting:r}));default:return null}},UserQuestion=function(e){var t,_,a,n,o;return"/home"===e.messUserChat?null:react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Questions__WEBPACK_IMPORTED_MODULE_23__.a,{style:{fontSize:null===(t=e.styleQues)||void 0===t?void 0:t.fontSize},bg:{bg:null===(_=e.styleQues)||void 0===_?void 0:_.bg,color:null===(a=e.styleQues)||void 0===a?void 0:a.color}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{bg:null===(n=e.styleQues)||void 0===n?void 0:n.bg,color:null===(o=e.styleQues)||void 0===o?void 0:o.color}},e.messUserChat))},BotContext=react__WEBPACK_IMPORTED_MODULE_6___default.a.createContext(null),useLogo=function(){return react__WEBPACK_IMPORTED_MODULE_6___default.a.useContext(BotContext)},getItem=function(e,t,_){var a=Object.keys(e).sort((function(e,t){return e-t})),n=a.indexOf(String(t));n+=_;for(var o=0,r=0;r<a.length;r++)r<=n&&(o+=e[a[r]].duration);return o},BotLive=function BotLive(props){var _stylesJSon$question$,_stylesJSon$question,_data$length,_useParams=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__.q)(),id=_useParams.id,tokenCodeString="VnptSmartbot"+id,txtHistory="historyChat"+id,txtTimeChat="timeStart"+id,infoChatwootName="infoChatwoot"+id,tokenCode=md5__WEBPACK_IMPORTED_MODULE_21___default()(tokenCodeString),_useState=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState2=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState,2),logo=_useState2[0],setLogo=_useState2[1],location=Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__.m)(),_queryString$parse=query_string__WEBPACK_IMPORTED_MODULE_14___default.a.parse(location.search),sendername=_queryString$parse.sendername,styles=_queryString$parse.styles,voiceType=_queryString$parse.voiceType,showHistory=_queryString$parse.showHistory,iconSend=_queryString$parse.iconSend,botMetadata=_queryString$parse.botMetadata,isSaveHistory=_queryString$parse.isSaveHistory,timeOpenUrl=_queryString$parse.timeOpenUrl,autoOpen=_queryString$parse.autoOpen,isSuggestions=_queryString$parse.isSuggestions,isOnMic=_queryString$parse.isOnMic,hiddenAudio=_queryString$parse.hiddenAudio,placeholderInput=_queryString$parse.placeholderInput,_useState3=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState4=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState6=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState5,2),loading=_useState6[0],setLoading=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState8=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState7,2),requestBot=_useState8[0],setRequestBot=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!0),_useState10=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState9,2),checkEndSession=_useState10[0],setCheckEndSession=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState12=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState11,2),boxchatOpen=_useState12[0],setBoxchatOpen=_useState12[1],stylesJSon=styles?JSON.parse(String(styles)):{},messagesEndRef=Object(react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),observed=Object(react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),_useState13=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState14=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState13,2),enableVoice=_useState14[0],setenableVoice=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState16=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState15,2),removeVoice=_useState16[0],setremoveVoice=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState18=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState17,2),sendMsg=_useState18[0],setsendMsg=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState20=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState19,2),msg=_useState20[0],setMsg=_useState20[1],_useState21=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(MAX_TIME_VOICE+1),_useState22=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState21,2),countTime=_useState22[0],setCoutTime=_useState22[1],_useState23=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState24=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState23,2),showSend=_useState24[0],setShowSend=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(void 0),_useState26=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState25,2),tokenVoice=_useState26[0],setTokenVoice=_useState26[1],_useState27=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(void 0),_useState28=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState27,2),tokenIdVoice=_useState28[0],setTokenIdVoice=_useState28[1],_useState29=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(void 0),_useState30=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState29,2),tokenKeyVoice=_useState30[0],setTokenKeyVoice=_useState30[1],_useState31=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState32=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState31,2),typeaudio=_useState32[0],settypeAudio=_useState32[1],_useState33=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState34=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState33,2),showUserVoice=_useState34[0],setshowUserVoice=_useState34[1],_useState35=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState36=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState35,2),showVoice=_useState36[0],setShowvoice=_useState36[1],_useState37=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(DEFAULT_TIME_END),_useState38=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState37,2),timeEnd=_useState38[0],setTimeEnd=_useState38[1],_useState39=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(DEFAULT_MSG),_useState40=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState39,2),msgSesion=_useState40[0],setMsgSesion=_useState40[1],_useState41=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(void 0),_useState42=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState41,2),endSessionStepId=_useState42[0],setEndSesionStepId=_useState42[1],_useState43=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(0),_useState44=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState43,2),delayTimeTotal=_useState44[0],setDelayTimeTotal=_useState44[1],_useState45=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState46=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState45,2),statusVoice=_useState46[0],setStatusVoice=_useState46[1],_useState47=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState48=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState47,2),isResetSession=_useState48[0],setIsResetSession=_useState48[1],_useState49=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(JSON.parse(js_cookie__WEBPACK_IMPORTED_MODULE_35___default.a.get(infoChatwootName)||"{}")),_useState50=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState49,2),infoChatwoot=_useState50[0],setInfoChatwoot=_useState50[1],currentTime=moment__WEBPACK_IMPORTED_MODULE_33___default()().format("X"),socketClient=new _apis_WebsocketService__WEBPACK_IMPORTED_MODULE_34__.a,_useState51=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(""),_useState52=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState51,2),newMess=_useState52[0],setNewMess=_useState52[1],_useState53=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)({}),_useState54=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState53,2),userMess=_useState54[0],setUserMess=_useState54[1],_useState55=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState56=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState55,2),listSuggests=_useState56[0],setListSuggests=_useState56[1],_useState57=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState58=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState57,2),showSuggestions=_useState58[0],setShowSuggestions=_useState58[1],InputChat=Object(react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null),_useState59=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1),_useState60=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState59,2),statusOnMic=_useState60[0],setStatusOnMic=_useState60[1];Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){return socketChatwootConnect(),function(){socketClient.close()}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if("true"==isSaveHistory){var dataHistory=localStorage.getItem(txtHistory)?localStorage.getItem(txtHistory):[],resultChatOld=eval(dataHistory);resultChatOld=resultChatOld.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old",buttons:"quickreply"==e.type?[]:e.buttons})})),setMsg(resultChatOld),setTimeout((function(){scrollToBottom()}),2e3)}}),[]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(!lodash__WEBPACK_IMPORTED_MODULE_30___default.a.isEmpty(userMess)&&!lodash__WEBPACK_IMPORTED_MODULE_30___default.a.isEmpty(newMess)&&window._callback&&"function"==typeof window._callback){var e={user:newMess,sb:userMess};window._callback(JSON.stringify(e))}}),[newMess,userMess]);var socketChatwootConnect=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a,n,o,r,s,i,l,u,c,d;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={bot_id:id,input_channel:"livechat",identifier:sendername||"smartbot"},e.next=3,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.socketChatwootConnect(t,tokenCode);case 3:200===(null===(_=e.sent)||void 0===_?void 0:_.status)&&(l=null===_||void 0===_?void 0:_.data.object,js_cookie__WEBPACK_IMPORTED_MODULE_35___default.a.set(infoChatwootName,JSON.stringify(l)),setInfoChatwoot(l),u=null===l||void 0===l||null===(a=l.object)||void 0===a||null===(n=a.contact)||void 0===n?void 0:n.pubsub_token,c=null===l||void 0===l||null===(o=l.object)||void 0===o||null===(r=o.contact)||void 0===r?void 0:r.account_id,d=null===l||void 0===l||null===(s=l.object)||void 0===s||null===(i=s.contact)||void 0===i?void 0:i.source_id,u&&c&&d&&(socketClient.open(),socketClient.connect(u,c,d),socketClient.subscribe(_callbackSocket,setUserMess),socketClient.onclose(),socketClient.onerror()));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_callbackSocket=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t){var _,a,n,o,r,s,i,l,u,c,d,p,E,m,b,O,f,v,g,M,h;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("User"===(null===t||void 0===t||null===(_=t.message)||void 0===_||null===(a=_.data)||void 0===a?void 0:a.sender_type)&&(i=null===t||void 0===t||null===(r=t.message)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.content,setMsg((function(e){return[{id:uuidv4(),buttons:[],text:i,source:"bot",delayTime:1,timeaudio:0,type:"text",play_type:"text",duration:0}].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))}))),"AgentBot"!=(null===t||void 0===t||null===(n=t.message)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.sender_type)){e.next=19;break}return(m=null!==(l=null===t||void 0===t||null===(u=t.message)||void 0===u||null===(c=u.data)||void 0===c||null===(d=c.content_attributes.items)||void 0===d?void 0:d.card_data)&&void 0!==l?l:[])[m.length-1].isFinal=!0,m[m.length-1].text_id=null===t||void 0===t||null===(p=t.message)||void 0===p||null===(E=p.data)||void 0===E?void 0:E.content_attributes.items.text_id,b=-1,O=Object(_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_32__.a)(),f={},v=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,_=!1,e.prev=2,n=_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,b+=1,e.t0=t.type,e.next="text"===e.t0?5:"quickreply"===e.t0?15:"image"===e.t0?25:"carousel"===e.t0?27:"open_current_tab"===e.t0?29:"open_new_tab"===e.t0?31:33;break;case 5:if(!t.audio_url||"text"===t.play_type){e.next=11;break}return e.next=8,O.getDuration(t.audio_url);case 8:e.t1=e.sent,e.next=12;break;case 11:e.t1=0;case 12:return _=e.t1,f[b]={id:t.id,duration:_+DELAY_TIME,play_type:t.play_type,index:b,timeaudio:_},e.abrupt("break",34);case 15:if(!t.audio_url||"text"===t.play_type){e.next=21;break}return e.next=18,O.getDuration(t.audio_url);case 18:e.t2=e.sent,e.next=22;break;case 21:e.t2=0;case 22:return a=e.t2,f[b]={id:t.id,duration:a+DELAY_TIME,play_type:t.play_type,index:b,timeaudio:a},e.abrupt("break",34);case 25:case 27:return f[b]={id:t.id,duration:DELAY_TIME,play_type:t.play_type,index:b},e.abrupt("break",34);case 29:return setTimeout((function(){window.open(t.text,"_parent")}),null!==timeOpenUrl&&void 0!==timeOpenUrl?timeOpenUrl:2e3),e.abrupt("break",34);case 31:return setTimeout((function(){window.open(t.text,"_blank")}),null!==timeOpenUrl&&void 0!==timeOpenUrl?timeOpenUrl:2e3),e.abrupt("break",34);case 33:return e.abrupt("break",34);case 34:case"end":return e.stop()}}),e)})),o=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_5__.a)(m);case 5:return e.next=7,o.next();case 7:if(!(t=!(r=e.sent).done)){e.next=12;break}return e.delegateYield(n(),"t0",9);case 9:t=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),_=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!_){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(){return e.apply(this,arguments)}}(),e.next=11,v();case 11:g=0,M=m.map((function(e,t){var _,a=getItem(f,t,-1);return g+=a,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{id:uuidv4(),delayTime:a,source:"bot",timeaudio:null===(_=f[t])||void 0===_?void 0:_.timeaudio})})),setDelayTimeTotal(g),h=M.reverse(),setMsg((function(e){return[].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(h),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))})),setRequestBot(!1),scrollToBottom(),setStatusOnMic("/home"!==newMess);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),handleNewUserMessage=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t,_,a){var n,o,r,s,i,l,u,c,d,p,E,m,b,O,f,v,g,M,h,P,D,T,C;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setsendMsg(""),_&&setMsg([{id:uuidv4(),text:_,source:"client"}].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))),setshowUserVoice(!0),setLoading(!0),r={bot_id:id,sender_id:sendername||"smartbot",metadata:botMetadata?JSON.parse(botMetadata):{},text:t,input_channel:"livechat",audio_url:a,tts_model:"news",tts_region:"male"===typeaudio?"male_south":"female_north",logSTT_id:a,conversation_id:null===infoChatwoot||void 0===infoChatwoot||null===(n=infoChatwoot.object)||void 0===n?void 0:n.id},localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_33___default()().format("DD/MM/YYYY HH:mm")),e.next=8,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.socketChatwootMessage(r,tokenCode);case 8:if(s=e.sent,setLoading(!1),i=null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.object.object,l=new Array,"normal"!==i.type){e.next=32;break}return l=null!==(u=null===s||void 0===s||null===(c=s.data)||void 0===c||null===(d=c.object)||void 0===d||null===(p=d.object.sb)||void 0===p?void 0:p.card_data)&&void 0!==u?u:[],window._callback&&"function"==typeof window._callback&&(v={user:t,sb:null!==(b=null===s||void 0===s||null===(O=s.data)||void 0===O||null===(f=O.object)||void 0===f?void 0:f.object.sb)&&void 0!==b?b:{}},window._callback(JSON.stringify(v))),l[l.length-1].isFinal=!0,l[l.length-1].text_id=null===s||void 0===s||null===(E=s.data)||void 0===E||null===(m=E.object.sb)||void 0===m?void 0:m.text_id,g=-1,M=Object(_helper_voiceDetect__WEBPACK_IMPORTED_MODULE_32__.a)(),h={},P=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,_=!1,e.prev=2,n=_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,g+=1,e.t0=t.type,e.next="text"===e.t0?5:"quickreply"===e.t0?15:"image"===e.t0?25:"carousel"===e.t0?27:"open_current_tab"===e.t0?29:"open_new_tab"===e.t0?31:33;break;case 5:if(!t.audio_url||"text"===t.play_type){e.next=11;break}return e.next=8,M.getDuration(t.audio_url);case 8:e.t1=e.sent,e.next=12;break;case 11:e.t1=0;case 12:return _=e.t1,h[g]={id:t.id,duration:_+DELAY_TIME,play_type:t.play_type,index:g,timeaudio:_},e.abrupt("break",34);case 15:if(!t.audio_url||"text"===t.play_type){e.next=21;break}return e.next=18,M.getDuration(t.audio_url);case 18:e.t2=e.sent,e.next=22;break;case 21:e.t2=0;case 22:return a=e.t2,h[g]={id:t.id,duration:a+DELAY_TIME,play_type:t.play_type,index:g,timeaudio:a},e.abrupt("break",34);case 25:case 27:return h[g]={id:t.id,duration:DELAY_TIME,play_type:t.play_type,index:g},e.abrupt("break",34);case 29:return setTimeout((function(){window.open(t.text,"_parent")}),null!==timeOpenUrl&&void 0!==timeOpenUrl?timeOpenUrl:2e3),e.abrupt("break",34);case 31:return setTimeout((function(){window.open(t.text,"_blank")}),null!==timeOpenUrl&&void 0!==timeOpenUrl?timeOpenUrl:2e3),e.abrupt("break",34);case 33:return e.abrupt("break",34);case 34:case"end":return e.stop()}}),e)})),o=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncIterator__WEBPACK_IMPORTED_MODULE_5__.a)(l);case 5:return e.next=7,o.next();case 7:if(!(t=!(r=e.sent).done)){e.next=12;break}return e.delegateYield(n(),"t0",9);case 9:t=!1,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),_=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!t||null==o.return){e.next=23;break}return e.next=23,o.return();case 23:if(e.prev=23,!_){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(){return e.apply(this,arguments)}}(),e.next=23,P();case 23:D=0,T=l.map((function(e,t){var _,a=getItem(h,t,-1);return D+=a,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{id:uuidv4(),delayTime:a,source:"bot",timeaudio:null===(_=h[t])||void 0===_?void 0:_.timeaudio})})),setDelayTimeTotal(D),_?((C=T.reverse()).push({id:uuidv4(),text:_,source:"client"}),setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(C),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})})))))):setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(T.reverse()),Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})}))))),setRequestBot(!1),scrollToBottom(),setStatusOnMic("/home"!==newMess),e.next=33;break;case 32:setNewMess(t);case 33:case"end":return e.stop()}}),e)})));return function(t,_,a){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){"true"===isOnMic&&setTimeout((function(){setenableVoice(!0),setremoveVoice(!1),setShowvoice(!0)}),1e3)}),[]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){0==firstPage.length&&loaded&&boxchatOpen&&0==msg.length&&handleNewUserMessage("/home")}),[loaded,msg,boxchatOpen]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){"true"==autoOpen&&setBoxchatOpen(!0)}),[autoOpen]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){window.onmessage=function(e){if("resetSession"==e.data&&(setIsResetSession(!0),endSessionStepId&&checkEndSession)){var t="?ic_bot_button_".concat(endSessionStepId);handleNewUserMessage(t),localStorage.removeItem("audio"),setCheckEndSession(!1)}"openBoxchat"==e.data&&setBoxchatOpen(!0)}})),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){var e,t=(new Date).toLocaleString();!0!==(null===(e=msg[0])||void 0===e?void 0:e.endSession)&&setTimeout((function(){window.parent.postMessage({type:"endTime",time:[timeEnd,t]},"*")}),1e3*Number(delayTimeTotal))}),[msg.length,sendMsg]);var _useState61=Object(react__WEBPACK_IMPORTED_MODULE_6__.useState)([]),_useState62=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__.a)(_useState61,2),firstPage=_useState62[0],setFirstPage=_useState62[1],getConfigBot=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a,n,o,r,s,i,l,u,c,d,p,E,m;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.getInfoBot(String(id),tokenCode);case 2:u=e.sent,setTokenVoice(null===u||void 0===u||null===(t=u.data.object)||void 0===t?void 0:t.tk),setTokenIdVoice(null===u||void 0===u||null===(_=u.data.object)||void 0===_?void 0:_.tkId),setTokenKeyVoice(null===u||void 0===u||null===(a=u.data.object)||void 0===a?void 0:a.tkKey),setTimeEnd(null!==(n=null===u||void 0===u||null===(o=u.data.object)||void 0===o?void 0:o.timeEndSession)&&void 0!==n?n:DEFAULT_TIME_END),setMsgSesion(null!==(r=null===u||void 0===u||null===(s=u.data.object)||void 0===s?void 0:s.endSessionTxT)&&void 0!==r?r:DEFAULT_MSG),setEndSesionStepId(null===u||void 0===u||null===(i=u.data.object)||void 0===i?void 0:i.stepEndSessionId),c=null===u||void 0===u||null===(l=u.data.object)||void 0===l?void 0:l.policies,d=null===c||void 0===c?void 0:c.find((function(e){return"Assistant policy"==e.policydefs})),(null===(p=d?JSON.parse(null===d||void 0===d?void 0:d.configuration):null)||void 0===p?void 0:p.speechToTextEnabled)?setStatusVoice(!0):setStatusVoice(!1),localStorage.getItem(txtTimeChat)&&moment__WEBPACK_IMPORTED_MODULE_33___default()(localStorage.getItem(txtTimeChat),"DD/MM/YYYY HH:mm").add(null!==(E=null===u||void 0===u||null===(m=u.data.object)||void 0===m?void 0:m.timeEndSession)&&void 0!==E?E:DEFAULT_TIME_END,"seconds").format("X")<currentTime&&(localStorage.removeItem(txtHistory),setMsg([]));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){getConfigBot()}),[]);var getFirstPage=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(){var t,_,a,n,o,r,s;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(setLoaded(!1),!showHistory){e.next=9;break}return e.next=4,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.getHistory(String(sendername),String(id),0,10,tokenCode);case 4:r=e.sent,setFirstPage(null!==(t=null===r||void 0===r||null===(_=r.data)||void 0===_||null===(a=_.result)||void 0===a?void 0:a.reverse())&&void 0!==t?t:[]),s=[],((null===r||void 0===r||null===(n=r.data)||void 0===n||null===(o=n.result)||void 0===o?void 0:o.reverse())||[]).map((function(e){e.card_data.reverse().map((function(t){s.push(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},t),{},{id:uuidv4(),source:e.source,type_msg:"old"}))}))})),setMsg([].concat(s,Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg)));case 9:setLoaded(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){getFirstPage()}),[]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(isSaveHistory&&msg.length>0)if(isResetSession)localStorage.removeItem(txtHistory);else if(msg.length>50){var e=msg.splice(msg.length-1,1);localStorage.setItem(txtHistory,JSON.stringify(e))}else localStorage.setItem(txtHistory,JSON.stringify(msg))}),[msg.length]);var scrollToBottom=function(){messagesEndRef.current&&messagesEndRef.current.scrollIntoView({behavior:"smooth",block:"end"})};react__WEBPACK_IMPORTED_MODULE_6___default.a.useEffect((function(){!0===enableVoice?(!showVoice&&VoiceSDK.startRecord((function(e,t){if(t&&(alert(t),setenableVoice(!1)),!1===e.loading){var _,a,n,o,r,s=(null===(_=e.result)||void 0===_?void 0:_.transcript)&&""!=(null===(a=e.result)||void 0===a?void 0:a.transcript)?null===(n=e.result)||void 0===n?void 0:n.transcript:sendMsg,i=null!==(o=null===(r=e.result)||void 0===r?void 0:r.audio_url)&&void 0!==o?o:null;""===s.trim()||removeVoice||(handleNewUserMessage(s,s,i),localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_33___default()().format("DD/MM/YYYY HH:mm")),setShowvoice(!0))}}),{url:"https://api.idg.vnpt.vn",freeTime:MAX_TIME_VOICE,silentTime:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).SILENT_TIME?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ENV:"production",REACT_APP_API_IDG_URL:"https://api.idg.vnpt.vn",REACT_APP_API_BASE_URL:"https://api-smartbot.vnpt.vn",REACT_APP_CHATWOOT_URL:"wss://livechat-smartbot.vnpt.vn/cable"}).SILENT_TIME:1,token:tokenVoice,tokenId:tokenIdVoice,tokenKey:tokenKeyVoice}),showVoice&&VoiceSDK.stopRecord((function(e,t){var _,a,n,o,r,s=(null===(_=e.result)||void 0===_?void 0:_.transcript)&&""!=(null===(a=e.result)||void 0===a?void 0:a.transcript)?null===(n=e.result)||void 0===n?void 0:n.transcript:sendMsg,i=null!==(o=null===(r=e.result)||void 0===r?void 0:r.audio_url)&&void 0!==o?o:null;""===s.trim()||removeVoice||(handleNewUserMessage(s,s,i),localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_33___default()().format("DD/MM/YYYY HH:mm")))}))):VoiceSDK.stopRecord((function(e,t){var _,a,n,o,r,s=(null===(_=e.result)||void 0===_?void 0:_.transcript)&&""!=(null===(a=e.result)||void 0===a?void 0:a.transcript)?null===(n=e.result)||void 0===n?void 0:n.transcript:sendMsg,i=null!==(o=null===(r=e.result)||void 0===r?void 0:r.audio_url)&&void 0!==o?o:null;""===s.trim()||removeVoice||(handleNewUserMessage(s,s,i),localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_33___default()().format("DD/MM/YYYY HH:mm")))}))}),[enableVoice,removeVoice,showVoice]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){if(enableVoice){var e=setInterval((function(){VoiceSDK.recording&&setCoutTime((function(e){return e-1}))}),1e3);return function(){return clearInterval(e)}}setCoutTime(MAX_TIME_VOICE+1)}),[enableVoice,showVoice]),Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){showVoice||setCoutTime(MAX_TIME_VOICE+1)}),[showVoice]),react__WEBPACK_IMPORTED_MODULE_6___default.a.useEffect((function(){scrollToBottom(),messagesEndRef.current&&scrollToBottom()}),[messagesEndRef,msg.length]);var onEnter=function(){""!=sendMsg.trim()&&(setShowSend(!1),setshowUserVoice(!1),setShowvoice(!1),setCheckEndSession(!0),handleNewUserMessage(sendMsg,sendMsg)),localStorage.setItem(txtTimeChat,moment__WEBPACK_IMPORTED_MODULE_33___default()().format("DD/MM/YYYY HH:mm")),setShowSuggestions(!1)},mergMsg=function(e){var t=[];(e.reverse()||[]).map((function(e){e.card_data.reverse().map((function(_){t.push(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},_),{},{id:uuidv4(),source:e.source,type_msg:"old"}))}))})),setMsg([].concat(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{type_msg:"old"})}))),t))},_useFetchMore=Object(_hooks_useFetchMore__WEBPACK_IMPORTED_MODULE_20__.a)(firstPage,10,function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t,_){var a,n,o;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.getHistory(String(sendername),String(id),t,_,tokenCode);case 2:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===n;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=null===(o=n.data)||void 0===o?void 0:o.result;case 11:if(e.t4=a=e.t3,e.t0=null!==e.t4,!e.t0){e.next=15;break}e.t0=void 0!==a;case 15:if(!e.t0){e.next=19;break}e.t5=a,e.next=20;break;case 19:e.t5=[];case 20:return e.abrupt("return",e.t5);case 21:case"end":return e.stop()}}),e)})));return function(t,_){return e.apply(this,arguments)}}(),mergMsg),data=_useFetchMore.data,fetchMore=_useFetchMore.fetchMore,hasMore=_useFetchMore.hasMore,typingMsg=function(e){setsendMsg(e.target.value),""!=e.target.value?(setShowSend(!0),"true"===isSuggestions&&(suggestChat(e.target.value),setShowSuggestions(!0))):(setShowSend(!1),"true"===isSuggestions&&setShowSuggestions(!1))},setTypeAudio=function(e){settypeAudio(e),localStorage.setItem("audio",e)};Object(react__WEBPACK_IMPORTED_MODULE_6__.useEffect)((function(){var e=String(localStorage.getItem("audio"));"male"!==e&&"female"!==e||setTypeAudio(e)}),[localStorage.getItem("audio")]);var showIconTalk=function(e){setshowUserVoice(e),"true"===isOnMic&&!1===e&&!0===statusOnMic&&(setenableVoice(!0),setremoveVoice(!1),setShowSend(!1),setShowvoice(!1))},suggestChat=function(){var e=Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function e(t){var _,a,n,o,r;return _app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _={text:t,highlight:!0,pre_tags:["<b>"],post_tags:["</b>"],bot_id:id},e.next=3,_apis_InitApiServices__WEBPACK_IMPORTED_MODULE_17__.a.suggestChat(_,tokenCode);case 3:200===(null===(a=e.sent)||void 0===a?void 0:a.status)&&(n=a.data.object,o=n.result.map((function(e){return{value:e.replace(/(<([^>]+)>)/gi,""),code:e}})),r=getRandom(o,5),setListSuggests(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onClickSuggest=function(e){setsendMsg(e.value),setShowSuggestions(!1),InputChat.current&&InputChat.current.focus()};function getRandom(e,t){var _=new Array(t),a=e.length,n=new Array(a);if(a>0&&a>t){for(;t--;){var o=Math.floor(Math.random()*a);_[t]=e[o in n?n[o]:o],n[o]=--a in n?n[a]:a}return _}return e}var onBLurInput=function(){setTimeout((function(){setShowSuggestions(!1)}),150)},onFocusInput=function(){sendMsg.length>0&&setShowSuggestions(!0)};return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_15__.a,{theme:_src_theme__WEBPACK_IMPORTED_MODULE_16__.a},!typeaudio&&voiceType&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_containers_WaitingHome__WEBPACK_IMPORTED_MODULE_31__.a,{onAction:function(e){return setTypeAudio(e)}}),!typeaudio&&voiceType||!loaded?!loaded&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{alignItems:"center",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19___default.a,{size:10,color:"#7D8FA9"})):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{backgroundColor:stylesJSon.bg?stylesJSon.bg:"#F3F6F6",boxShadow:"-5px -5px 20px rgba(247, 247, 247, 0.25), 5px 5px 20px rgba(0, 0, 0, 0.25)",borderRadius:16,justifyContent:"flex-end",height:"100%",".rcw-header":{display:"none",fontFamily:"Open Sans, sans-serif"},".rcw-messages-container":{marginTop:"20px"},".rcw-message-text":{fontFamily:"Open Sans, sans-serif",fontSize:1,background:null!==(_stylesJSon$question$=null===stylesJSon||void 0===stylesJSon||null===(_stylesJSon$question=stylesJSon.question)||void 0===_stylesJSon$question?void 0:_stylesJSon$question.bg)&&void 0!==_stylesJSon$question$?_stylesJSon$question$:"#53C088",color:"#fff"},".infinite-scroll-component":{paddingBottom:"50px"},"#messages":{}}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(BotContext.Provider,{value:{logo:logo,timeout:0,stylesJSon:stylesJSon}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{ref:observed,className:"conversation",id:"scrollableDiv",bg:stylesJSon.bg?stylesJSon.bg:"#F3F6F6",sx:{width:"100%",maxHeight:"90%",overflowY:"scroll",flexDirection:"column-reverse"}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.b,{ref:messagesEndRef,sx:{visibility:"hidden",height:0}},"last"),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_infinite_scroll_component__WEBPACK_IMPORTED_MODULE_18__.a,{dataLength:null!==(_data$length=null===data||void 0===data?void 0:data.length)&&void 0!==_data$length?_data$length:0,next:fetchMore,hasMore:hasMore,style:{display:"flex",flexDirection:"column-reverse"},inverse:!0,loader:react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19___default.a,{size:10,color:"#7D8FA9"})),scrollableTarget:"scrollableDiv"},requestBot?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(_components_Reply__WEBPACK_IMPORTED_MODULE_22__.a,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_spinners_BeatLoader__WEBPACK_IMPORTED_MODULE_19___default.a,{size:6,color:"#7D8FA9"})):null,facebookstyleReply(msg).map((function(e,t){return"bot"===e.source?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(ParseReply,{key:null===e||void 0===e?void 0:e.id,data:e,handleNewUserMessage:handleNewUserMessage,indexing:t,showIconTalk:showIconTalk,loading:loading,count:msg.length,msg:msg,setMsg:setMsg,hiddenAudio:hiddenAudio}):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(UserQuestion,{key:null===e||void 0===e?void 0:e.id,messUserChat:e.text,styleQues:null===stylesJSon||void 0===stylesJSon?void 0:stylesJSon.question})})))),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{width:"100%",height:45,position:"fixed",bottom:0,alignItems:"center"},mb:3},statusVoice&&(enableVoice?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{width:"100%",borderRadius:8,alignItems:"center"},mx:3},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{mb:3,bg:"#F3F6F6",sx:{width:"100%",height:"100%",alignItems:"center",borderRadius:8}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{width:"100%",backgroundSize:"contain",height:"100%",alignItems:"center",justifyContent:"space-between",backgroundImage:!showVoice&&"url(".concat(_images_bgVoice_svg__WEBPACK_IMPORTED_MODULE_28___default.a,")")}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{sx:{width:56},src:"male"===typeaudio?"/male.gif":"/female.gif",alt:"recording"}),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"}},showVoice?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{src:_images_voicegradient_svg__WEBPACK_IMPORTED_MODULE_29___default.a,onClick:function(){setShowvoice(!1)},alt:"SendGradientIcon",sx:{cursor:"pointer",width:56,height:"100%"}}):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{src:_images_icons_sendGradient_svg__WEBPACK_IMPORTED_MODULE_25___default.a,onClick:function(){setShowvoice(!0)},alt:"SendGradientIcon",sx:{cursor:"pointer",width:56,height:"100%"}}),!showVoice&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.k,{sx:{color:"#0687F0",fontSize:2,position:"absolute",width:200,bottom:-12,textAlign:"center"}},"Tr\u1ee3 l\xfd \u1ea3o \u0111ang l\u1eafng nghe ... ",countTime<=MAX_TIME_VOICE?countTime:""),showUserVoice&&showVoice&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.k,{sx:{color:"#0687F0",fontSize:2,position:"absolute",width:200,bottom:-12,textAlign:"center"}},"Tr\u1ee3 l\xfd \u1ea3o \u0111ang tr\u1ea3 l\u1eddi ")),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{src:_images_banphim_svg__WEBPACK_IMPORTED_MODULE_27___default.a,onClick:function(){setremoveVoice(!0),setenableVoice(!1)},alt:"deleteIcon",sx:{cursor:"pointer",width:56,height:"100%"}})))):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{width:"100%",height:40,borderRadius:8,alignItems:"center",position:"relative"},bg:"#fff",mx:3},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.b,{id:"myInputautocomplete-list",className:"autocomplete-items",sx:{position:"absolute",border:"1px solid #d4d4d4",borderBottom:"none",borderTop:"none",zIndex:"99",bottom:"100%",left:0,right:0,div:{padding:"5px 10px",cursor:"pointer",backgroundColor:"#fff",borderTop:"1px solid #d4d4d4",borderBottom:"1px solid #d4d4d4",fontSize:"14px","&:hover":{backgroundColor:"#e9e9e9"}}}},showSuggestions&&listSuggests.length>0&&listSuggests.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{onClick:function(){return onClickSuggest(e)},key:t},react_html_parser__WEBPACK_IMPORTED_MODULE_36___default()(e.code))}))),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.g,{sx:{height:30,border:"none",outline:"none",backgroundColor:"#fff"},disabled:enableVoice,placeholder:(null===placeholderInput||void 0===placeholderInput?void 0:placeholderInput.length)>0?placeholderInput:"Anh ch\u1ecb mu\u1ed1n h\u1ecfi g\xec \u1ea1",onChange:function(e){return typingMsg(e)},onKeyPress:function(e){"Enter"===e.key&&onEnter()},value:sendMsg,ref:InputChat,onFocus:function(){return onFocusInput()},onBlur:function(){return onBLurInput()}}),showSend?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{ml:5,mr:"10px",src:iconSend?String(iconSend):_images_icons_send_svg__WEBPACK_IMPORTED_MODULE_24___default.a,alt:"sendcon",sx:{cursor:"pointer",minWidth:void 0},onClick:function(){return onEnter()}}):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{height:"100%",alignItems:"center",justifyContent:"center",width:50}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{src:_images_icons_microphone_svg__WEBPACK_IMPORTED_MODULE_26___default.a,sx:{width:30,height:"100%",cursor:"pointer"},onClick:function(){setMsg(msg.map((function(e){return Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)(Object(_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_4__.a)({},e),{},{delayTime:0,type_msg:"old"})}))),setenableVoice(!0),setremoveVoice(!1),setShowSend(!1)}})))),!statusVoice&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{width:"100%",height:40,borderRadius:8,alignItems:"center",position:"relative"},bg:"#fff",mx:3},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.b,{id:"myInputautocomplete-list",className:"autocomplete-items",sx:{position:"absolute",border:"1px solid #d4d4d4",borderBottom:"none",borderTop:"none",zIndex:"99",bottom:"100%",left:0,right:0,div:{padding:"10px",cursor:"pointer",backgroundColor:"#fff",borderTop:"1px solid #d4d4d4",borderBottom:"1px solid #d4d4d4","&:hover":{backgroundColor:"#e9e9e9"}}}},showSuggestions&&listSuggests.length>0&&listSuggests.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{onClick:function(){return onClickSuggest(e)},key:t},react_html_parser__WEBPACK_IMPORTED_MODULE_36___default()(e.code))}))),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.g,{sx:{height:30,border:"none",outline:"none",backgroundColor:"#fff"},placeholder:(null===placeholderInput||void 0===placeholderInput?void 0:placeholderInput.length)>0?placeholderInput:"Anh ch\u1ecb mu\u1ed1n h\u1ecfi g\xec \u1ea1",onChange:function(e){return typingMsg(e)},onKeyPress:function(e){"Enter"===e.key&&onEnter()},value:sendMsg,ref:InputChat,onFocus:function(){return onFocusInput()},onBlur:function(){return onBLurInput()}}),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{ml:5,mr:"10px",src:iconSend?String(iconSend):_images_icons_send_svg__WEBPACK_IMPORTED_MODULE_24___default.a,alt:"sendcon",sx:{cursor:"pointer",minWidth:void 0},onClick:function(){return onEnter()}})))),showUserVoice&&!enableVoice&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.d,{sx:{position:"absolute",bottom:60,left:15,overflow:"hidden",borderRadius:"50%"}},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(theme_ui__WEBPACK_IMPORTED_MODULE_13__.f,{sx:{width:56},src:"male"===typeaudio?"/male.gif":"/female.gif",alt:"recording"}))))};__webpack_exports__.a=BotLive},44:function(e,t,_){"use strict";_.d(t,"a",(function(){return a}));var a=function(e){return e.replace(/(https?:\/\/[^\s]+)/g,(function(e){return'<a target="_blank" href="'+e+'">'+e+"</a>"}))}},51:function(e,t,_){"use strict";_.d(t,"a",(function(){return l}));var a=_(0),n=_.n(a),o=_(3),r=_(40),s=_(15),i=_.n(s),l=function(e){var t,_=e.handleNewUserMessage,a=e.item,s=a.title,l=a.type,u=a.payload,c="quick"===e.typeBtn,d=Object(r.b)(),p=null===d||void 0===d||null===(t=d.stylesJSon)||void 0===t?void 0:t.button,E=function(e,t){return e?t?e.color:e.bg:t?"#fff":"#17c48a"},m=function(e,t){return e?t?e.bg:e.color:t?"#53C088":"#fff"},b=function(e){return e?e.border:void 0};switch(l){case"postback":return n.a.createElement(o.b,{sx:{minWidth:76}},n.a.createElement(o.c,{color:E(p,c),title:s,sx:{background:m(p,c),border:b(p),width:"100%",overflow:"hidden",textOverflow:"ellipsis",fontWeight:null===p||void 0===p?void 0:p.fontWeight},onClick:function(){return _&&_(u,s)}},i()(s)));case"web_url":return n.a.createElement(o.b,{sx:{minWidth:76}},n.a.createElement(o.c,{color:E(p,c),title:s,sx:{background:m(p,c),border:b(p),width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:null===p||void 0===p?void 0:p.fontWeight}},n.a.createElement(o.i,{color:E(p,c),href:u,target:"_blank"},i()(s))));case"phone_number":return n.a.createElement(o.b,{sx:{minWidth:76}},n.a.createElement(o.c,{color:E(p,c),title:s,sx:{border:b(p),background:m(p,c),width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:null===p||void 0===p?void 0:p.fontWeight}},n.a.createElement(o.i,{color:E(p,c),href:"tel:".concat(u),target:"_blank"},i()(s))));default:return n.a.createElement(n.a.Fragment,null)}}},54:function(e,t,_){"use strict";var a=_(2),n=_.n(a),o=_(7),r=_(1),s=_(0),i=_.n(s),l=_(3),u=_(23),c=_(8),d=_(52),p=_.n(d),E=_(53),m=_.n(E);t.a=function(e){var t=Object(c.q)().id,_=Object(c.m)(),a=e.onVote,d=e.resultChat,E=Object(s.useState)(!1),b=Object(r.a)(E,2),O=b[0],f=b[1],v=Object(s.useRef)(null),g=p.a.parse(_.search),M=g.sendername,h=g.isVoting,P=g.colorIcon,D=P?JSON.parse(P):{},T="VnptSmartbot"+t,C=m()(T),A=Object(s.useState)(!1),I=Object(r.a)(A,2),S=I[0],x=I[1],y=function(){var e=Object(o.a)(n.a.mark((function e(_){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(d.id,_),o={set_variables:{bot_id:t,sender_id:M,user_rate:_,text_id:d.text_id}},e.next=4,u.a.feedbackMsg(o,C,{bot_id:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){1==d.voting||0==d.voting?f(!0):f(!1)}),[d]);var R=function(){f(!1),x(!0)};!function(e,t){var _=function(_){e.current&&!e.current.contains(_.target)&&t()};Object(s.useEffect)((function(){return document.addEventListener("click",_),function(){document.removeEventListener("click",_)}}))}(v,(function(){O||1!=d.voting&&0!=d.voting||f(!O)}));var w=function(){return i.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M20.7633 12.509C21.157 11.9887 21.375 11.3512 21.375 10.6879C21.375 9.63556 20.7867 8.63946 19.8398 8.084C19.5961 7.94102 19.3185 7.86576 19.0359 7.86603H13.4156L13.5563 4.98556C13.5891 4.28947 13.343 3.62853 12.8648 3.12463C12.6302 2.87625 12.3471 2.67864 12.0331 2.544C11.7191 2.40936 11.3807 2.34054 11.0391 2.34181C9.82031 2.34181 8.74219 3.16213 8.41875 4.33634L6.40547 11.6254H6.39844V21.6566H17.468C17.6836 21.6566 17.8945 21.6144 18.0891 21.5301C19.2047 21.0543 19.9242 19.9645 19.9242 18.7551C19.9242 18.4598 19.882 18.1691 19.7977 17.8879C20.1914 17.3676 20.4094 16.7301 20.4094 16.0668C20.4094 15.7715 20.3672 15.4809 20.2828 15.1996C20.6766 14.6793 20.8945 14.0418 20.8945 13.3785C20.8898 13.0832 20.8477 12.7902 20.7633 12.509ZM2.625 12.3754V20.9066C2.625 21.3215 2.96016 21.6566 3.375 21.6566H4.89844V11.6254H3.375C2.96016 11.6254 2.625 11.9606 2.625 12.3754Z",fill:D.colorVoteIcon||"#FCB017"}))},U=function(){return i.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M20.7633 11.4914C20.8477 11.2102 20.8898 10.9195 20.8898 10.6242C20.8898 9.96094 20.6719 9.32344 20.2781 8.80313C20.3625 8.52188 20.4047 8.23125 20.4047 7.93594C20.4047 7.27266 20.1867 6.63516 19.793 6.11484C19.8773 5.83359 19.9195 5.54297 19.9195 5.24766C19.9195 4.03828 19.2 2.94844 18.0844 2.47266C17.8883 2.38811 17.6768 2.34502 17.4633 2.34609H6.39844V12.3773H6.40547L8.41641 19.6617C8.73984 20.8359 9.81797 21.6562 11.0367 21.6562C11.7328 21.6562 12.382 21.3797 12.8625 20.8734C13.343 20.3695 13.5891 19.7086 13.5539 19.0125L13.4133 16.132H19.0359C19.3195 16.132 19.5961 16.057 19.8398 15.9141C20.7867 15.3633 21.375 14.3648 21.375 13.3125C21.375 12.6492 21.157 12.0117 20.7633 11.4914ZM2.625 3.09375V11.625C2.625 12.0398 2.96016 12.375 3.375 12.375H4.89844V2.34375H3.375C2.96016 2.34375 2.625 2.67891 2.625 3.09375Z",fill:D.colorVoteIcon||"#FCB017"}))},L=function(){return i.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22Z",stroke:"#28A948",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M16.5 14.5C16.5 14.5 15 16.5 12 16.5C9 16.5 7.5 14.5 7.5 14.5",stroke:"#28A948",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.a.createElement("path",{d:"M15.5 9C15.3674 9 15.2402 8.94732 15.1464 8.85355C15.0527 8.75979 15 8.63261 15 8.5C15 8.36739 15.0527 8.24021 15.1464 8.14645C15.2402 8.05268 15.3674 8 15.5 8C15.6326 8 15.7598 8.05268 15.8536 8.14645C15.9473 8.24021 16 8.36739 16 8.5C16 8.63261 15.9473 8.75979 15.8536 8.85355C15.7598 8.94732 15.6326 9 15.5 9ZM8.5 9C8.36739 9 8.24021 8.94732 8.14645 8.85355C8.05268 8.75979 8 8.63261 8 8.5C8 8.36739 8.05268 8.24021 8.14645 8.14645C8.24021 8.05268 8.36739 8 8.5 8C8.63261 8 8.75979 8.05268 8.85355 8.14645C8.94732 8.24021 9 8.36739 9 8.5C9 8.63261 8.94732 8.75979 8.85355 8.85355C8.75979 8.94732 8.63261 9 8.5 9Z",fill:"#28A948",stroke:"#28A948",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};return i.a.createElement(l.d,{sx:{marginLeft:"50px",position:"relative",height:"20px"}},i.a.createElement(l.b,{sx:{position:"absolute",top:"-20px",right:"-18px",boxShadow:"0px 2px 8px 0px rgba(0, 0, 0, 0.15)",borderRadius:"16px",overflow:"hidden"}},"true"==h&&i.a.createElement(l.b,{sx:{cursor:"pointer"}},i.a.createElement(l.b,{className:"item-status",sx:{boxShadow:"2px 2px 10px rgb(0 0 0 / 15%)",animation:"ease 2s",overflow:"hidden",border:"1px solid #D7DAED"},ref:v},i.a.createElement(l.d,{sx:{justifyContent:"space-between",flexDirection:"row",height:"32px",alignItems:"center",svg:{display:"block"}},onBlur:function(){return x(!1),void(1!=d.voting&&0!=d.voting||f(!0))},tabIndex:0},!O&&i.a.createElement(i.a.Fragment,null,!S&&i.a.createElement(l.b,{sx:{padding:"6px",background:"#FFFFFF",width:"36px",height:"36px","&:hover":{background:"#F3F6F6"}},onClick:function(){return x(!0)}},i.a.createElement(L,null)),S&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.b,{sx:{padding:"6px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return y(1)}},i.a.createElement(w,null)),i.a.createElement(l.b,{sx:{padding:"6px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return y(0)}},i.a.createElement(U,null)))),O&&1==d.voting&&i.a.createElement(l.b,{sx:{padding:"6px",background:"#FFFFFF",width:"36px",height:"36px","&:hover":{background:"#F3F6F6"}},onClick:function(){return R()}},i.a.createElement(w,null)),O&&0==d.voting&&i.a.createElement(l.b,{sx:{padding:"6px",background:"#FFFFFF",width:"36px",height:"36px","&:hover":{background:"#F3F6F6"}},onClick:function(){return R()}},i.a.createElement(U,null)))))))}},60:function(e,t,_){"use strict";_.d(t,"a",(function(){return r}));var a=_(0),n=_.n(a),o=_(3),r=function(){return n.a.createElement(o.d,{sx:{textAlign:"center",height:"36px",width:"76px",justifyContent:"center",alignItems:"center",span:{display:"inline-block",verticalAlign:"middle",width:"20px",height:"20px",background:"#FFFFFF",borderRadius:"20px",animation:"loader 0.8s infinite alternate","&:nth-of-type(2)":{animationDelay:"0.2s"},"&:nth-of-type(3)":{animationDelay:"0.6s"}},"@keyframes loader":{"0%":{opacity:"0.9",transform:"scale(0.5)"},"100%":{opacity:"0.1",transform:"scale(1)"}}}},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null))}},66:function(e,t,_){"use strict";_.d(t,"a",(function(){return i}));var a=_(0),n=_.n(a),o=_(3),r=_(213),s=_.n(r),i=function(){return n.a.createElement(o.d,{sx:{justifyContent:"center"},ml:160},n.a.createElement(s.a,{type:"bubbles",color:"#555657",width:25,height:0}))}},67:function(e,t,_){"use strict";var a=_(2),n=_.n(a),o=_(7),r=_(1),s=_(0),i=_.n(s),l=_(3),u=_(169),c=_.n(u),d=_(170),p=_.n(d),E=_(23),m=_(8),b=_(52),O=_.n(b),f=_(53),v=_.n(f);t.a=function(e){var t=Object(m.q)().id,_=Object(m.m)(),a=e.onVote,u=e.resultChat,d=Object(s.useState)(!1),b=Object(r.a)(d,2),f=b[0],g=b[1],M=Object(s.useRef)(null),h=O.a.parse(_.search),P=h.sendername,D=h.isVoting,T="VnptSmartbot"+t,C=v()(T),A=function(){var e=Object(o.a)(n.a.mark((function e(_){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(u.id,_),o={set_variables:{bot_id:t,sender_id:P,user_rate:_,text_id:u.text_id}},e.next=4,E.a.feedbackMsg(o,C,{bot_id:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){1==u.voting||0==u.voting?g(!0):g(!1)}),[u]);var I=function(){g(!1)};return function(e,t){var _=function(_){e.current&&!e.current.contains(_.target)&&t()};Object(s.useEffect)((function(){return document.addEventListener("click",_),function(){document.removeEventListener("click",_)}}))}(M,(function(){f||1!=u.voting&&0!=u.voting||g(!f)})),i.a.createElement(l.d,{sx:{marginLeft:"50px",marginTop:"5px"}},"true"==D&&i.a.createElement(l.b,{sx:{cursor:"pointer"}},i.a.createElement(l.b,{className:"item-status",sx:{boxShadow:"2px 2px 10px rgb(0 0 0 / 15%)",borderRadius:"16px",animation:"ease 2s",overflow:"hidden"},ref:M},i.a.createElement(l.d,{sx:{justifyContent:"space-between"}},!f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.b,{sx:{padding:"6px 6px 6px 12px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return A(1)}},i.a.createElement(l.f,{src:c.a,sx:{width:"19px",height:"19px",display:"block"}})),i.a.createElement(l.b,{sx:{padding:"6px 12px 6px 6px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return A(0)}},i.a.createElement(l.f,{src:p.a,sx:{width:"19px",height:"19px",display:"block"}}))),f&&1==u.voting&&i.a.createElement(l.b,{sx:{padding:"6px 12px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return I()}},i.a.createElement(l.f,{src:c.a,sx:{width:"19px",height:"19px",display:"block"}})),f&&0==u.voting&&i.a.createElement(l.b,{sx:{padding:"6px 12px",background:"#FFFFFF","&:hover":{background:"#F3F6F6"}},onClick:function(){return I()}},i.a.createElement(l.f,{src:p.a,sx:{width:"19px",height:"19px",display:"block"}}))))))}},92:function(e,t,_){"use strict";function a(){var e=new Audio,t=!1;return{getDuration:function(e){return _(e).then((function(e){return e&&e.duration||0})).catch((function(e){return 0}))},load:_};function _(a){return t?t.then((function(e){return _(a)})):t=new Promise((function(_,n){e.onloadedmetadata=function(a){t=!1,_(e)},e.onerror=function(e){t=!1,n()},e.src=a}))}}_.d(t,"a",(function(){return a}))}},[[251,1,2]]]);
//# sourceMappingURL=main.afd11239.chunk.js.map